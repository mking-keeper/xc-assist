#!/usr/bin/env node
import Ir from"node:process";import{spawn as Ga}from"child_process";import*as Qe from"fs/promises";import*as Kt from"path";import*as Zr from"os";var Ja=Object.create,yr=Object.defineProperty,Ha=Object.getOwnPropertyDescriptor,Wa=Object.getOwnPropertyNames,Ya=Object.getPrototypeOf,Xa=Object.prototype.hasOwnProperty,z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qa=(e,t)=>{for(var r in t)yr(e,r,{get:t[r],enumerable:!0})},es=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Wa(t))!Xa.call(e,s)&&s!==r&&yr(e,s,{get:()=>t[s],enumerable:!(a=Ha(t,s))||a.enumerable});return e},Lr=(e,t,r)=>(r=e!=null?Ja(Ya(e)):{},es(t||!e||!e.__esModule?yr(r,"default",{value:e,enumerable:!0}):r,e)),Tt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=class{};e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var r=class extends t{constructor(l){if(super(),!e.IDENTIFIER.test(l))throw new Error("CodeGen: name must be a valid identifier");this.str=l}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};e.Name=r;var a=class extends t{constructor(l){super(),this._items=typeof l=="string"?[l]:l}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let l=this._items[0];return l===""||l==='""'}get str(){var l;return(l=this._str)!==null&&l!==void 0?l:this._str=this._items.reduce((g,p)=>`${g}${p}`,"")}get names(){var l;return(l=this._names)!==null&&l!==void 0?l:this._names=this._items.reduce((g,p)=>(p instanceof r&&(g[p.str]=(g[p.str]||0)+1),g),{})}};e._Code=a,e.nil=new a("");function s(l,...g){let p=[l[0]],y=0;for(;y<g.length;)o(p,g[y]),p.push(l[++y]);return new a(p)}e._=s;var c=new a("+");function n(l,...g){let p=[j(l[0])],y=0;for(;y<g.length;)p.push(c),o(p,g[y]),p.push(c,j(l[++y]));return i(p),new a(p)}e.str=n;function o(l,g){g instanceof a?l.push(...g._items):g instanceof r?l.push(g):l.push(b(g))}e.addCodeArg=o;function i(l){let g=1;for(;g<l.length-1;){if(l[g]===c){let p=d(l[g-1],l[g+1]);if(p!==void 0){l.splice(g-1,3,p);continue}l[g++]="+"}g++}}function d(l,g){if(g==='""')return l;if(l==='""')return g;if(typeof l=="string")return g instanceof r||l[l.length-1]!=='"'?void 0:typeof g!="string"?`${l.slice(0,-1)}${g}"`:g[0]==='"'?l.slice(0,-1)+g.slice(1):void 0;if(typeof g=="string"&&g[0]==='"'&&!(l instanceof r))return`"${l}${g.slice(1)}`}function v(l,g){return g.emptyStr()?l:l.emptyStr()?g:n`${l}${g}`}e.strConcat=v;function b(l){return typeof l=="number"||typeof l=="boolean"||l===null?l:j(Array.isArray(l)?l.join(","):l)}function x(l){return new a(j(l))}e.stringify=x;function j(l){return JSON.stringify(l).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=j;function E(l){return typeof l=="string"&&e.IDENTIFIER.test(l)?new a(`.${l}`):s`[${l}]`}e.getProperty=E;function S(l){if(typeof l=="string"&&e.IDENTIFIER.test(l))return new a(`${l}`);throw new Error(`CodeGen: invalid export name: ${l}, use explicit $id name mapping`)}e.getEsmExportName=S;function f(l){return new a(l.toString())}e.regexpCode=f}),Rr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t=Tt(),r=class extends Error{constructor(i){super(`CodeGen: "code" for ${i} not defined`),this.value=i.value}},a;(function(i){i[i.Started=0]="Started",i[i.Completed=1]="Completed"})(a||(e.UsedValueState=a={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};var s=class{constructor({prefixes:i,parent:d}={}){this._names={},this._prefixes=i,this._parent=d}toName(i){return i instanceof t.Name?i:this.name(i)}name(i){return new t.Name(this._newName(i))}_newName(i){let d=this._names[i]||this._nameGroup(i);return`${i}${d.index++}`}_nameGroup(i){var d,v;if(!((v=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||v===void 0)&&v.has(i)||this._prefixes&&!this._prefixes.has(i))throw new Error(`CodeGen: prefix "${i}" is not allowed in this scope`);return this._names[i]={prefix:i,index:0}}};e.Scope=s;var c=class extends t.Name{constructor(i,d){super(d),this.prefix=i}setValue(i,{property:d,itemIndex:v}){this.value=i,this.scopePath=(0,t._)`.${new t.Name(d)}[${v}]`}};e.ValueScopeName=c;var n=(0,t._)`\n`,o=class extends s{constructor(i){super(i),this._values={},this._scope=i.scope,this.opts={...i,_n:i.lines?n:t.nil}}get(){return this._scope}name(i){return new c(i,this._newName(i))}value(i,d){var v;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let b=this.toName(i),{prefix:x}=b,j=(v=d.key)!==null&&v!==void 0?v:d.ref,E=this._values[x];if(E){let l=E.get(j);if(l)return l}else E=this._values[x]=new Map;E.set(j,b);let S=this._scope[x]||(this._scope[x]=[]),f=S.length;return S[f]=d.ref,b.setValue(d,{property:x,itemIndex:f}),b}getValue(i,d){let v=this._values[i];if(v)return v.get(d)}scopeRefs(i,d=this._values){return this._reduceValues(d,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${i}${v.scopePath}`})}scopeCode(i=this._values,d,v){return this._reduceValues(i,b=>{if(b.value===void 0)throw new Error(`CodeGen: name "${b}" has no value`);return b.value.code},d,v)}_reduceValues(i,d,v={},b){let x=t.nil;for(let j in i){let E=i[j];if(!E)continue;let S=v[j]=v[j]||new Map;E.forEach(f=>{if(S.has(f))return;S.set(f,a.Started);let l=d(f);if(l){let g=this.opts.es5?e.varKinds.var:e.varKinds.const;x=(0,t._)`${x}${g} ${f} = ${l};${this.opts._n}`}else if(l=b?.(f))x=(0,t._)`${x}${l}${this.opts._n}`;else throw new r(f);S.set(f,a.Completed)})}return x}};e.ValueScope=o}),oe=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=Tt(),r=Rr(),a=Tt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var s=Rr();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var c=class{optimizeNodes(){return this}optimizeNames(u,w){return this}},n=class extends c{constructor(u,w,O){super(),this.varKind=u,this.name=w,this.rhs=O}render({es5:u,_n:w}){let O=u?r.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${O} ${this.name}${V};`+w}optimizeNames(u,w){if(u[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,u,w)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}},o=class extends c{constructor(u,w,O){super(),this.lhs=u,this.rhs=w,this.sideEffects=O}render({_n:u}){return`${this.lhs} = ${this.rhs};`+u}optimizeNames(u,w){if(!(this.lhs instanceof t.Name&&!u[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,u,w),this}get names(){let u=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(u,this.rhs)}},i=class extends o{constructor(u,w,O,V){super(u,O,V),this.op=w}render({_n:u}){return`${this.lhs} ${this.op}= ${this.rhs};`+u}},d=class extends c{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`${this.label}:`+u}},v=class extends c{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`break${this.label?` ${this.label}`:""};`+u}},b=class extends c{constructor(u){super(),this.error=u}render({_n:u}){return`throw ${this.error};`+u}get names(){return this.error.names}},x=class extends c{constructor(u){super(),this.code=u}render({_n:u}){return`${this.code};`+u}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(u,w){return this.code=U(this.code,u,w),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}},j=class extends c{constructor(u=[]){super(),this.nodes=u}render(u){return this.nodes.reduce((w,O)=>w+O.render(u),"")}optimizeNodes(){let{nodes:u}=this,w=u.length;for(;w--;){let O=u[w].optimizeNodes();Array.isArray(O)?u.splice(w,1,...O):O?u[w]=O:u.splice(w,1)}return u.length>0?this:void 0}optimizeNames(u,w){let{nodes:O}=this,V=O.length;for(;V--;){let K=O[V];K.optimizeNames(u,w)||(W(u,K.names),O.splice(V,1))}return O.length>0?this:void 0}get names(){return this.nodes.reduce((u,w)=>q(u,w.names),{})}},E=class extends j{render(u){return"{"+u._n+super.render(u)+"}"+u._n}},S=class extends j{},f=class extends E{};f.kind="else";var l=class jt extends E{constructor(w,O){super(O),this.condition=w}render(w){let O=`if(${this.condition})`+super.render(w);return this.else&&(O+="else "+this.else.render(w)),O}optimizeNodes(){super.optimizeNodes();let w=this.condition;if(w===!0)return this.nodes;let O=this.else;if(O){let V=O.optimizeNodes();O=this.else=Array.isArray(V)?new f(V):V}if(O)return w===!1?O instanceof jt?O:O.nodes:this.nodes.length?this:new jt(ue(w),O instanceof jt?[O]:O.nodes);if(!(w===!1||!this.nodes.length))return this}optimizeNames(w,O){var V;if(this.else=(V=this.else)===null||V===void 0?void 0:V.optimizeNames(w,O),!!(super.optimizeNames(w,O)||this.else))return this.condition=U(this.condition,w,O),this}get names(){let w=super.names;return F(w,this.condition),this.else&&q(w,this.else.names),w}};l.kind="if";var g=class extends E{};g.kind="for";var p=class extends g{constructor(u){super(),this.iteration=u}render(u){return`for(${this.iteration})`+super.render(u)}optimizeNames(u,w){if(super.optimizeNames(u,w))return this.iteration=U(this.iteration,u,w),this}get names(){return q(super.names,this.iteration.names)}},y=class extends g{constructor(u,w,O,V){super(),this.varKind=u,this.name=w,this.from=O,this.to=V}render(u){let w=u.es5?r.varKinds.var:this.varKind,{name:O,from:V,to:K}=this;return`for(${w} ${O}=${V}; ${O}<${K}; ${O}++)`+super.render(u)}get names(){let u=F(super.names,this.from);return F(u,this.to)}},$=class extends g{constructor(u,w,O,V){super(),this.loop=u,this.varKind=w,this.name=O,this.iterable=V}render(u){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(u)}optimizeNames(u,w){if(super.optimizeNames(u,w))return this.iterable=U(this.iterable,u,w),this}get names(){return q(super.names,this.iterable.names)}},m=class extends E{constructor(u,w,O){super(),this.name=u,this.args=w,this.async=O}render(u){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(u)}};m.kind="func";var h=class extends j{render(u){return"return "+super.render(u)}};h.kind="return";var k=class extends E{render(u){let w="try"+super.render(u);return this.catch&&(w+=this.catch.render(u)),this.finally&&(w+=this.finally.render(u)),w}optimizeNodes(){var u,w;return super.optimizeNodes(),(u=this.catch)===null||u===void 0||u.optimizeNodes(),(w=this.finally)===null||w===void 0||w.optimizeNodes(),this}optimizeNames(u,w){var O,V;return super.optimizeNames(u,w),(O=this.catch)===null||O===void 0||O.optimizeNames(u,w),(V=this.finally)===null||V===void 0||V.optimizeNames(u,w),this}get names(){let u=super.names;return this.catch&&q(u,this.catch.names),this.finally&&q(u,this.finally.names),u}},T=class extends E{constructor(u){super(),this.error=u}render(u){return`catch(${this.error})`+super.render(u)}};T.kind="catch";var M=class extends E{render(u){return"finally"+super.render(u)}};M.kind="finally";var D=class{constructor(u,w={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...w,_n:w.lines?`
`:""},this._extScope=u,this._scope=new r.Scope({parent:u}),this._nodes=[new S]}toString(){return this._root.render(this.opts)}name(u){return this._scope.name(u)}scopeName(u){return this._extScope.name(u)}scopeValue(u,w){let O=this._extScope.value(u,w);return(this._values[O.prefix]||(this._values[O.prefix]=new Set)).add(O),O}getScopeValue(u,w){return this._extScope.getValue(u,w)}scopeRefs(u){return this._extScope.scopeRefs(u,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(u,w,O,V){let K=this._scope.toName(w);return O!==void 0&&V&&(this._constants[K.str]=O),this._leafNode(new n(u,K,O)),K}const(u,w,O){return this._def(r.varKinds.const,u,w,O)}let(u,w,O){return this._def(r.varKinds.let,u,w,O)}var(u,w,O){return this._def(r.varKinds.var,u,w,O)}assign(u,w,O){return this._leafNode(new o(u,w,O))}add(u,w){return this._leafNode(new i(u,e.operators.ADD,w))}code(u){return typeof u=="function"?u():u!==t.nil&&this._leafNode(new x(u)),this}object(...u){let w=["{"];for(let[O,V]of u)w.length>1&&w.push(","),w.push(O),(O!==V||this.opts.es5)&&(w.push(":"),(0,t.addCodeArg)(w,V));return w.push("}"),new t._Code(w)}if(u,w,O){if(this._blockNode(new l(u)),w&&O)this.code(w).else().code(O).endIf();else if(w)this.code(w).endIf();else if(O)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(u){return this._elseNode(new l(u))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(l,f)}_for(u,w){return this._blockNode(u),w&&this.code(w).endFor(),this}for(u,w){return this._for(new p(u),w)}forRange(u,w,O,V,K=this.opts.es5?r.varKinds.var:r.varKinds.let){let Y=this._scope.toName(u);return this._for(new y(K,Y,w,O),()=>V(Y))}forOf(u,w,O,V=r.varKinds.const){let K=this._scope.toName(u);if(this.opts.es5){let Y=w instanceof t.Name?w:this.var("_arr",w);return this.forRange("_i",0,(0,t._)`${Y}.length`,B=>{this.var(K,(0,t._)`${Y}[${B}]`),O(K)})}return this._for(new $("of",V,K,w),()=>O(K))}forIn(u,w,O,V=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(u,(0,t._)`Object.keys(${w})`,O);let K=this._scope.toName(u);return this._for(new $("in",V,K,w),()=>O(K))}endFor(){return this._endBlockNode(g)}label(u){return this._leafNode(new d(u))}break(u){return this._leafNode(new v(u))}return(u){let w=new h;if(this._blockNode(w),this.code(u),w.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(h)}try(u,w,O){if(!w&&!O)throw new Error('CodeGen: "try" without "catch" and "finally"');let V=new k;if(this._blockNode(V),this.code(u),w){let K=this.name("e");this._currNode=V.catch=new T(K),w(K)}return O&&(this._currNode=V.finally=new M,this.code(O)),this._endBlockNode(T,M)}throw(u){return this._leafNode(new b(u))}block(u,w){return this._blockStarts.push(this._nodes.length),u&&this.code(u).endBlock(w),this}endBlock(u){let w=this._blockStarts.pop();if(w===void 0)throw new Error("CodeGen: not in self-balancing block");let O=this._nodes.length-w;if(O<0||u!==void 0&&O!==u)throw new Error(`CodeGen: wrong number of nodes: ${O} vs ${u} expected`);return this._nodes.length=w,this}func(u,w=t.nil,O,V){return this._blockNode(new m(u,w,O)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(u=1){for(;u-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(u){return this._currNode.nodes.push(u),this}_blockNode(u){this._currNode.nodes.push(u),this._nodes.push(u)}_endBlockNode(u,w){let O=this._currNode;if(O instanceof u||w&&O instanceof w)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${w?`${u.kind}/${w.kind}`:u.kind}"`)}_elseNode(u){let w=this._currNode;if(!(w instanceof l))throw new Error('CodeGen: "else" without "if"');return this._currNode=w.else=u,this}get _root(){return this._nodes[0]}get _currNode(){let u=this._nodes;return u[u.length-1]}set _currNode(u){let w=this._nodes;w[w.length-1]=u}};e.CodeGen=D;function q(u,w){for(let O in w)u[O]=(u[O]||0)+(w[O]||0);return u}function F(u,w){return w instanceof t._CodeOrName?q(u,w.names):u}function U(u,w,O){if(u instanceof t.Name)return V(u);if(!K(u))return u;return new t._Code(u._items.reduce((Y,B)=>(B instanceof t.Name&&(B=V(B)),B instanceof t._Code?Y.push(...B._items):Y.push(B),Y),[]));function V(Y){let B=O[Y.str];return B===void 0||w[Y.str]!==1?Y:(delete w[Y.str],B)}function K(Y){return Y instanceof t._Code&&Y._items.some(B=>B instanceof t.Name&&w[B.str]===1&&O[B.str]!==void 0)}}function W(u,w){for(let O in w)u[O]=(u[O]||0)-(w[O]||0)}function ue(u){return typeof u=="boolean"||typeof u=="number"||u===null?!u:(0,t._)`!${A(u)}`}e.not=ue;var ve=I(e.operators.AND);function _e(...u){return u.reduce(ve)}e.and=_e;var ee=I(e.operators.OR);function P(...u){return u.reduce(ee)}e.or=P;function I(u){return(w,O)=>w===t.nil?O:O===t.nil?w:(0,t._)`${A(w)} ${u} ${A(O)}`}function A(u){return u instanceof t.Name?u:(0,t._)`(${u})`}}),pe=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;var t=oe(),r=Tt();function a(m){let h={};for(let k of m)h[k]=!0;return h}e.toHash=a;function s(m,h){return typeof h=="boolean"?h:Object.keys(h).length===0?!0:(c(m,h),!n(h,m.self.RULES.all))}e.alwaysValidSchema=s;function c(m,h=m.schema){let{opts:k,self:T}=m;if(!k.strictSchema||typeof h=="boolean")return;let M=T.RULES.keywords;for(let D in h)M[D]||$(m,`unknown keyword: "${D}"`)}e.checkUnknownRules=c;function n(m,h){if(typeof m=="boolean")return!m;for(let k in m)if(h[k])return!0;return!1}e.schemaHasRules=n;function o(m,h){if(typeof m=="boolean")return!m;for(let k in m)if(k!=="$ref"&&h.all[k])return!0;return!1}e.schemaHasRulesButRef=o;function i({topSchemaRef:m,schemaPath:h},k,T,M){if(!M){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,t._)`${k}`}return(0,t._)`${m}${h}${(0,t.getProperty)(T)}`}e.schemaRefOrVal=i;function d(m){return x(decodeURIComponent(m))}e.unescapeFragment=d;function v(m){return encodeURIComponent(b(m))}e.escapeFragment=v;function b(m){return typeof m=="number"?`${m}`:m.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=b;function x(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=x;function j(m,h){if(Array.isArray(m))for(let k of m)h(k);else h(m)}e.eachItem=j;function E({mergeNames:m,mergeToName:h,mergeValues:k,resultToName:T}){return(M,D,q,F)=>{let U=q===void 0?D:q instanceof t.Name?(D instanceof t.Name?m(M,D,q):h(M,D,q),q):D instanceof t.Name?(h(M,q,D),D):k(D,q);return F===t.Name&&!(U instanceof t.Name)?T(M,U):U}}e.mergeEvaluated={props:E({mergeNames:(m,h,k)=>m.if((0,t._)`${k} !== true && ${h} !== undefined`,()=>{m.if((0,t._)`${h} === true`,()=>m.assign(k,!0),()=>m.assign(k,(0,t._)`${k} || {}`).code((0,t._)`Object.assign(${k}, ${h})`))}),mergeToName:(m,h,k)=>m.if((0,t._)`${k} !== true`,()=>{h===!0?m.assign(k,!0):(m.assign(k,(0,t._)`${k} || {}`),f(m,k,h))}),mergeValues:(m,h)=>m===!0?!0:{...m,...h},resultToName:S}),items:E({mergeNames:(m,h,k)=>m.if((0,t._)`${k} !== true && ${h} !== undefined`,()=>m.assign(k,(0,t._)`${h} === true ? true : ${k} > ${h} ? ${k} : ${h}`)),mergeToName:(m,h,k)=>m.if((0,t._)`${k} !== true`,()=>m.assign(k,h===!0?!0:(0,t._)`${k} > ${h} ? ${k} : ${h}`)),mergeValues:(m,h)=>m===!0?!0:Math.max(m,h),resultToName:(m,h)=>m.var("items",h)})};function S(m,h){if(h===!0)return m.var("props",!0);let k=m.var("props",(0,t._)`{}`);return h!==void 0&&f(m,k,h),k}e.evaluatedPropsToName=S;function f(m,h,k){Object.keys(k).forEach(T=>m.assign((0,t._)`${h}${(0,t.getProperty)(T)}`,!0))}e.setEvaluated=f;var l={};function g(m,h){return m.scopeValue("func",{ref:h,code:l[h.code]||(l[h.code]=new r._Code(h.code))})}e.useFunc=g;var p;(function(m){m[m.Num=0]="Num",m[m.Str=1]="Str"})(p||(e.Type=p={}));function y(m,h,k){if(m instanceof t.Name){let T=h===p.Num;return k?T?(0,t._)`"[" + ${m} + "]"`:(0,t._)`"['" + ${m} + "']"`:T?(0,t._)`"/" + ${m}`:(0,t._)`"/" + ${m}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,t.getProperty)(m).toString():"/"+b(m)}e.getErrorPath=y;function $(m,h,k=m.opts.strictSchema){if(k){if(h=`strict mode: ${h}`,k===!0)throw new Error(h);m.self.logger.warn(h)}}e.checkStrictMode=$}),Ke=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};e.default=r}),Bt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=oe(),r=pe(),a=Ke();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:l})=>l?(0,t.str)`"${f}" keyword must be ${l} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function s(f,l=e.keywordError,g,p){let{it:y}=f,{gen:$,compositeRule:m,allErrors:h}=y,k=b(f,l,g);p??(m||h)?i($,k):d(y,(0,t._)`[${k}]`)}e.reportError=s;function c(f,l=e.keywordError,g){let{it:p}=f,{gen:y,compositeRule:$,allErrors:m}=p,h=b(f,l,g);i(y,h),$||m||d(p,a.default.vErrors)}e.reportExtraError=c;function n(f,l){f.assign(a.default.errors,l),f.if((0,t._)`${a.default.vErrors} !== null`,()=>f.if(l,()=>f.assign((0,t._)`${a.default.vErrors}.length`,l),()=>f.assign(a.default.vErrors,null)))}e.resetErrorsCount=n;function o({gen:f,keyword:l,schemaValue:g,data:p,errsCount:y,it:$}){if(y===void 0)throw new Error("ajv implementation error");let m=f.name("err");f.forRange("i",y,a.default.errors,h=>{f.const(m,(0,t._)`${a.default.vErrors}[${h}]`),f.if((0,t._)`${m}.instancePath === undefined`,()=>f.assign((0,t._)`${m}.instancePath`,(0,t.strConcat)(a.default.instancePath,$.errorPath))),f.assign((0,t._)`${m}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${l}`),$.opts.verbose&&(f.assign((0,t._)`${m}.schema`,g),f.assign((0,t._)`${m}.data`,p))})}e.extendErrors=o;function i(f,l){let g=f.const("err",l);f.if((0,t._)`${a.default.vErrors} === null`,()=>f.assign(a.default.vErrors,(0,t._)`[${g}]`),(0,t._)`${a.default.vErrors}.push(${g})`),f.code((0,t._)`${a.default.errors}++`)}function d(f,l){let{gen:g,validateName:p,schemaEnv:y}=f;y.$async?g.throw((0,t._)`new ${f.ValidationError}(${l})`):(g.assign((0,t._)`${p}.errors`,l),g.return(!1))}var v={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function b(f,l,g){let{createErrors:p}=f.it;return p===!1?(0,t._)`{}`:x(f,l,g)}function x(f,l,g={}){let{gen:p,it:y}=f,$=[j(y,g),E(f,g)];return S(f,l,$),p.object(...$)}function j({errorPath:f},{instancePath:l}){let g=l?(0,t.str)`${f}${(0,r.getErrorPath)(l,r.Type.Str)}`:f;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,g)]}function E({keyword:f,it:{errSchemaPath:l}},{schemaPath:g,parentSchema:p}){let y=p?l:(0,t.str)`${l}/${f}`;return g&&(y=(0,t.str)`${y}${(0,r.getErrorPath)(g,r.Type.Str)}`),[v.schemaPath,y]}function S(f,{params:l,message:g},p){let{keyword:y,data:$,schemaValue:m,it:h}=f,{opts:k,propertyName:T,topSchemaRef:M,schemaPath:D}=h;p.push([v.keyword,y],[v.params,typeof l=="function"?l(f):l||(0,t._)`{}`]),k.messages&&p.push([v.message,typeof g=="function"?g(f):g]),k.verbose&&p.push([v.schema,m],[v.parentSchema,(0,t._)`${M}${D}`],[a.default.data,$]),T&&p.push([v.propertyName,T])}}),ts=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;var t=Bt(),r=oe(),a=Ke(),s={message:"boolean schema is false"};function c(i){let{gen:d,schema:v,validateName:b}=i;v===!1?o(i,!1):typeof v=="object"&&v.$async===!0?d.return(a.default.data):(d.assign((0,r._)`${b}.errors`,null),d.return(!0))}e.topBoolOrEmptySchema=c;function n(i,d){let{gen:v,schema:b}=i;b===!1?(v.var(d,!1),o(i)):v.var(d,!0)}e.boolOrEmptySchema=n;function o(i,d){let{gen:v,data:b}=i,x={gen:v,keyword:"false schema",data:b,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,t.reportError)(x,s,void 0,d)}}),Kr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;var t=["string","number","integer","boolean","null","object","array"],r=new Set(t);function a(c){return typeof c=="string"&&r.has(c)}e.isJSONType=a;function s(){let c={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...c,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},c.number,c.string,c.array,c.object],post:{rules:[]},all:{},keywords:{}}}e.getRules=s}),Br=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0;function t({schema:s,self:c},n){let o=c.RULES.types[n];return o&&o!==!0&&r(s,o)}e.schemaHasRulesForType=t;function r(s,c){return c.rules.some(n=>a(s,n))}e.shouldUseGroup=r;function a(s,c){var n;return s[c.keyword]!==void 0||((n=c.definition.implements)===null||n===void 0?void 0:n.some(o=>s[o]!==void 0))}e.shouldUseRule=a}),It=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;var t=Kr(),r=Br(),a=Bt(),s=oe(),c=pe(),n;(function(p){p[p.Correct=0]="Correct",p[p.Wrong=1]="Wrong"})(n||(e.DataType=n={}));function o(p){let y=i(p.type);if(y.includes("null")){if(p.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!y.length&&p.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');p.nullable===!0&&y.push("null")}return y}e.getSchemaTypes=o;function i(p){let y=Array.isArray(p)?p:p?[p]:[];if(y.every(t.isJSONType))return y;throw new Error("type must be JSONType or JSONType[]: "+y.join(","))}e.getJSONTypes=i;function d(p,y){let{gen:$,data:m,opts:h}=p,k=b(y,h.coerceTypes),T=y.length>0&&!(k.length===0&&y.length===1&&(0,r.schemaHasRulesForType)(p,y[0]));if(T){let M=S(y,m,h.strictNumbers,n.Wrong);$.if(M,()=>{k.length?x(p,y,k):l(p)})}return T}e.coerceAndCheckDataType=d;var v=new Set(["string","number","integer","boolean","null"]);function b(p,y){return y?p.filter($=>v.has($)||y==="array"&&$==="array"):[]}function x(p,y,$){let{gen:m,data:h,opts:k}=p,T=m.let("dataType",(0,s._)`typeof ${h}`),M=m.let("coerced",(0,s._)`undefined`);k.coerceTypes==="array"&&m.if((0,s._)`${T} == 'object' && Array.isArray(${h}) && ${h}.length == 1`,()=>m.assign(h,(0,s._)`${h}[0]`).assign(T,(0,s._)`typeof ${h}`).if(S(y,h,k.strictNumbers),()=>m.assign(M,h))),m.if((0,s._)`${M} !== undefined`);for(let q of $)(v.has(q)||q==="array"&&k.coerceTypes==="array")&&D(q);m.else(),l(p),m.endIf(),m.if((0,s._)`${M} !== undefined`,()=>{m.assign(h,M),j(p,M)});function D(q){switch(q){case"string":m.elseIf((0,s._)`${T} == "number" || ${T} == "boolean"`).assign(M,(0,s._)`"" + ${h}`).elseIf((0,s._)`${h} === null`).assign(M,(0,s._)`""`);return;case"number":m.elseIf((0,s._)`${T} == "boolean" || ${h} === null
              || (${T} == "string" && ${h} && ${h} == +${h})`).assign(M,(0,s._)`+${h}`);return;case"integer":m.elseIf((0,s._)`${T} === "boolean" || ${h} === null
              || (${T} === "string" && ${h} && ${h} == +${h} && !(${h} % 1))`).assign(M,(0,s._)`+${h}`);return;case"boolean":m.elseIf((0,s._)`${h} === "false" || ${h} === 0 || ${h} === null`).assign(M,!1).elseIf((0,s._)`${h} === "true" || ${h} === 1`).assign(M,!0);return;case"null":m.elseIf((0,s._)`${h} === "" || ${h} === 0 || ${h} === false`),m.assign(M,null);return;case"array":m.elseIf((0,s._)`${T} === "string" || ${T} === "number"
              || ${T} === "boolean" || ${h} === null`).assign(M,(0,s._)`[${h}]`)}}}function j({gen:p,parentData:y,parentDataProperty:$},m){p.if((0,s._)`${y} !== undefined`,()=>p.assign((0,s._)`${y}[${$}]`,m))}function E(p,y,$,m=n.Correct){let h=m===n.Correct?s.operators.EQ:s.operators.NEQ,k;switch(p){case"null":return(0,s._)`${y} ${h} null`;case"array":k=(0,s._)`Array.isArray(${y})`;break;case"object":k=(0,s._)`${y} && typeof ${y} == "object" && !Array.isArray(${y})`;break;case"integer":k=T((0,s._)`!(${y} % 1) && !isNaN(${y})`);break;case"number":k=T();break;default:return(0,s._)`typeof ${y} ${h} ${p}`}return m===n.Correct?k:(0,s.not)(k);function T(M=s.nil){return(0,s.and)((0,s._)`typeof ${y} == "number"`,M,$?(0,s._)`isFinite(${y})`:s.nil)}}e.checkDataType=E;function S(p,y,$,m){if(p.length===1)return E(p[0],y,$,m);let h,k=(0,c.toHash)(p);if(k.array&&k.object){let T=(0,s._)`typeof ${y} != "object"`;h=k.null?T:(0,s._)`!${y} || ${T}`,delete k.null,delete k.array,delete k.object}else h=s.nil;k.number&&delete k.integer;for(let T in k)h=(0,s.and)(h,E(T,y,$,m));return h}e.checkDataTypes=S;var f={message:({schema:p})=>`must be ${p}`,params:({schema:p,schemaValue:y})=>typeof p=="string"?(0,s._)`{type: ${p}}`:(0,s._)`{type: ${y}}`};function l(p){let y=g(p);(0,a.reportError)(y,f)}e.reportTypeError=l;function g(p){let{gen:y,data:$,schema:m}=p,h=(0,c.schemaRefOrVal)(p,m,"type");return{gen:y,keyword:"type",data:$,schema:m.type,schemaCode:h,schemaValue:h,parentSchema:m,params:{},it:p}}}),rs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;var t=oe(),r=pe();function a(c,n){let{properties:o,items:i}=c.schema;if(n==="object"&&o)for(let d in o)s(c,d,o[d].default);else n==="array"&&Array.isArray(i)&&i.forEach((d,v)=>s(c,v,d.default))}e.assignDefaults=a;function s(c,n,o){let{gen:i,compositeRule:d,data:v,opts:b}=c;if(o===void 0)return;let x=(0,t._)`${v}${(0,t.getProperty)(n)}`;if(d){(0,r.checkStrictMode)(c,`default is ignored for: ${x}`);return}let j=(0,t._)`${x} === undefined`;b.useDefaults==="empty"&&(j=(0,t._)`${j} || ${x} === null || ${x} === ""`),i.if(j,(0,t._)`${x} = ${(0,t.stringify)(o)}`)}}),Re=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateUnion=e.validateArray=e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.isOwnProperty=e.hasPropFunc=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;var t=oe(),r=pe(),a=Ke(),s=pe();function c(p,y){let{gen:$,data:m,it:h}=p;$.if(b($,m,y,h.opts.ownProperties),()=>{p.setParams({missingProperty:(0,t._)`${y}`},!0),p.error()})}e.checkReportMissingProp=c;function n({gen:p,data:y,it:{opts:$}},m,h){return(0,t.or)(...m.map(k=>(0,t.and)(b(p,y,k,$.ownProperties),(0,t._)`${h} = ${k}`)))}e.checkMissingProp=n;function o(p,y){p.setParams({missingProperty:y},!0),p.error()}e.reportMissingProp=o;function i(p){return p.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}e.hasPropFunc=i;function d(p,y,$){return(0,t._)`${i(p)}.call(${y}, ${$})`}e.isOwnProperty=d;function v(p,y,$,m){let h=(0,t._)`${y}${(0,t.getProperty)($)} !== undefined`;return m?(0,t._)`${h} && ${d(p,y,$)}`:h}e.propertyInData=v;function b(p,y,$,m){let h=(0,t._)`${y}${(0,t.getProperty)($)} === undefined`;return m?(0,t.or)(h,(0,t.not)(d(p,y,$))):h}e.noPropertyInData=b;function x(p){return p?Object.keys(p).filter(y=>y!=="__proto__"):[]}e.allSchemaProperties=x;function j(p,y){return x(y).filter($=>!(0,r.alwaysValidSchema)(p,y[$]))}e.schemaProperties=j;function E({schemaCode:p,data:y,it:{gen:$,topSchemaRef:m,schemaPath:h,errorPath:k},it:T},M,D,q){let F=q?(0,t._)`${p}, ${y}, ${m}${h}`:y,U=[[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,k)],[a.default.parentData,T.parentData],[a.default.parentDataProperty,T.parentDataProperty],[a.default.rootData,a.default.rootData]];T.opts.dynamicRef&&U.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);let W=(0,t._)`${F}, ${$.object(...U)}`;return D!==t.nil?(0,t._)`${M}.call(${D}, ${W})`:(0,t._)`${M}(${W})`}e.callValidateCode=E;var S=(0,t._)`new RegExp`;function f({gen:p,it:{opts:y}},$){let m=y.unicodeRegExp?"u":"",{regExp:h}=y.code,k=h($,m);return p.scopeValue("pattern",{key:k.toString(),ref:k,code:(0,t._)`${h.code==="new RegExp"?S:(0,s.useFunc)(p,h)}(${$}, ${m})`})}e.usePattern=f;function l(p){let{gen:y,data:$,keyword:m,it:h}=p,k=y.name("valid");if(h.allErrors){let M=y.let("valid",!0);return T(()=>y.assign(M,!1)),M}return y.var(k,!0),T(()=>y.break()),k;function T(M){let D=y.const("len",(0,t._)`${$}.length`);y.forRange("i",0,D,q=>{p.subschema({keyword:m,dataProp:q,dataPropType:r.Type.Num},k),y.if((0,t.not)(k),M)})}}e.validateArray=l;function g(p){let{gen:y,schema:$,keyword:m,it:h}=p;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(M=>(0,r.alwaysValidSchema)(h,M))&&!h.opts.unevaluated)return;let k=y.let("valid",!1),T=y.name("_valid");y.block(()=>$.forEach((M,D)=>{let q=p.subschema({keyword:m,schemaProp:D,compositeRule:!0},T);y.assign(k,(0,t._)`${k} || ${T}`),p.mergeValidEvaluated(q,T)||y.if((0,t.not)(k))})),p.result(k,()=>p.reset(),()=>p.error(!0))}e.validateUnion=g}),as=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateKeywordUsage=e.validSchemaType=e.funcKeywordCode=e.macroKeywordCode=void 0;var t=oe(),r=Ke(),a=Re(),s=Bt();function c(j,E){let{gen:S,keyword:f,schema:l,parentSchema:g,it:p}=j,y=E.macro.call(p.self,l,g,p),$=v(S,f,y);p.opts.validateSchema!==!1&&p.self.validateSchema(y,!0);let m=S.name("valid");j.subschema({schema:y,schemaPath:t.nil,errSchemaPath:`${p.errSchemaPath}/${f}`,topSchemaRef:$,compositeRule:!0},m),j.pass(m,()=>j.error(!0))}e.macroKeywordCode=c;function n(j,E){var S;let{gen:f,keyword:l,schema:g,parentSchema:p,$data:y,it:$}=j;d($,E);let m=!y&&E.compile?E.compile.call($.self,g,p,$):E.validate,h=v(f,l,m),k=f.let("valid");j.block$data(k,T),j.ok((S=E.valid)!==null&&S!==void 0?S:k);function T(){if(E.errors===!1)q(),E.modifying&&o(j),F(()=>j.error());else{let U=E.async?M():D();E.modifying&&o(j),F(()=>i(j,U))}}function M(){let U=f.let("ruleErrs",null);return f.try(()=>q((0,t._)`await `),W=>f.assign(k,!1).if((0,t._)`${W} instanceof ${$.ValidationError}`,()=>f.assign(U,(0,t._)`${W}.errors`),()=>f.throw(W))),U}function D(){let U=(0,t._)`${h}.errors`;return f.assign(U,null),q(t.nil),U}function q(U=E.async?(0,t._)`await `:t.nil){let W=$.opts.passContext?r.default.this:r.default.self,ue=!("compile"in E&&!y||E.schema===!1);f.assign(k,(0,t._)`${U}${(0,a.callValidateCode)(j,h,W,ue)}`,E.modifying)}function F(U){var W;f.if((0,t.not)((W=E.valid)!==null&&W!==void 0?W:k),U)}}e.funcKeywordCode=n;function o(j){let{gen:E,data:S,it:f}=j;E.if(f.parentData,()=>E.assign(S,(0,t._)`${f.parentData}[${f.parentDataProperty}]`))}function i(j,E){let{gen:S}=j;S.if((0,t._)`Array.isArray(${E})`,()=>{S.assign(r.default.vErrors,(0,t._)`${r.default.vErrors} === null ? ${E} : ${r.default.vErrors}.concat(${E})`).assign(r.default.errors,(0,t._)`${r.default.vErrors}.length`),(0,s.extendErrors)(j)},()=>j.error())}function d({schemaEnv:j},E){if(E.async&&!j.$async)throw new Error("async keyword in sync schema")}function v(j,E,S){if(S===void 0)throw new Error(`keyword "${E}" failed to compile`);return j.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,t.stringify)(S)})}function b(j,E,S=!1){return!E.length||E.some(f=>f==="array"?Array.isArray(j):f==="object"?j&&typeof j=="object"&&!Array.isArray(j):typeof j==f||S&&typeof j>"u")}e.validSchemaType=b;function x({schema:j,opts:E,self:S,errSchemaPath:f},l,g){if(Array.isArray(l.keyword)?!l.keyword.includes(g):l.keyword!==g)throw new Error("ajv implementation error");let p=l.dependencies;if(p?.some(y=>!Object.prototype.hasOwnProperty.call(j,y)))throw new Error(`parent schema must have dependencies of ${g}: ${p.join(",")}`);if(l.validateSchema&&!l.validateSchema(j[g])){let y=`keyword "${g}" value is invalid at path "${f}": `+S.errorsText(l.validateSchema.errors);if(E.validateSchema==="log")S.logger.error(y);else throw new Error(y)}}e.validateKeywordUsage=x}),ss=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendSubschemaMode=e.extendSubschemaData=e.getSubschema=void 0;var t=oe(),r=pe();function a(n,{keyword:o,schemaProp:i,schema:d,schemaPath:v,errSchemaPath:b,topSchemaRef:x}){if(o!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){let j=n.schema[o];return i===void 0?{schema:j,schemaPath:(0,t._)`${n.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${n.errSchemaPath}/${o}`}:{schema:j[i],schemaPath:(0,t._)`${n.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(i)}`,errSchemaPath:`${n.errSchemaPath}/${o}/${(0,r.escapeFragment)(i)}`}}if(d!==void 0){if(v===void 0||b===void 0||x===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:v,topSchemaRef:x,errSchemaPath:b}}throw new Error('either "keyword" or "schema" must be passed')}e.getSubschema=a;function s(n,o,{dataProp:i,dataPropType:d,data:v,dataTypes:b,propertyName:x}){if(v!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:j}=o;if(i!==void 0){let{errorPath:S,dataPathArr:f,opts:l}=o,g=j.let("data",(0,t._)`${o.data}${(0,t.getProperty)(i)}`,!0);E(g),n.errorPath=(0,t.str)`${S}${(0,r.getErrorPath)(i,d,l.jsPropertySyntax)}`,n.parentDataProperty=(0,t._)`${i}`,n.dataPathArr=[...f,n.parentDataProperty]}if(v!==void 0){let S=v instanceof t.Name?v:j.let("data",v,!0);E(S),x!==void 0&&(n.propertyName=x)}b&&(n.dataTypes=b);function E(S){n.data=S,n.dataLevel=o.dataLevel+1,n.dataTypes=[],o.definedProperties=new Set,n.parentData=o.data,n.dataNames=[...o.dataNames,S]}}e.extendSubschemaData=s;function c(n,{jtdDiscriminator:o,jtdMetadata:i,compositeRule:d,createErrors:v,allErrors:b}){d!==void 0&&(n.compositeRule=d),v!==void 0&&(n.createErrors=v),b!==void 0&&(n.allErrors=b),n.jtdDiscriminator=o,n.jtdMetadata=i}e.extendSubschemaMode=c}),Gt=z((e,t)=>{"use strict";t.exports=function r(a,s){if(a===s)return!0;if(a&&s&&typeof a=="object"&&typeof s=="object"){if(a.constructor!==s.constructor)return!1;var c,n,o;if(Array.isArray(a)){if(c=a.length,c!=s.length)return!1;for(n=c;n--!==0;)if(!r(a[n],s[n]))return!1;return!0}if(a.constructor===RegExp)return a.source===s.source&&a.flags===s.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===s.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===s.toString();if(o=Object.keys(a),c=o.length,c!==Object.keys(s).length)return!1;for(n=c;n--!==0;)if(!Object.prototype.hasOwnProperty.call(s,o[n]))return!1;for(n=c;n--!==0;){var i=o[n];if(!r(a[i],s[i]))return!1}return!0}return a!==a&&s!==s}}),is=z((e,t)=>{"use strict";var r=t.exports=function(c,n,o){typeof n=="function"&&(o=n,n={}),o=n.cb||o;var i=typeof o=="function"?o:o.pre||function(){},d=o.post||function(){};a(n,i,d,c,"",c)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function a(c,n,o,i,d,v,b,x,j,E){if(i&&typeof i=="object"&&!Array.isArray(i)){n(i,d,v,b,x,j,E);for(var S in i){var f=i[S];if(Array.isArray(f)){if(S in r.arrayKeywords)for(var l=0;l<f.length;l++)a(c,n,o,f[l],d+"/"+S+"/"+l,v,d,S,i,l)}else if(S in r.propsKeywords){if(f&&typeof f=="object")for(var g in f)a(c,n,o,f[g],d+"/"+S+"/"+s(g),v,d,S,i,g)}else(S in r.keywords||c.allKeys&&!(S in r.skipKeywords))&&a(c,n,o,f,d+"/"+S,v,d,S,i)}o(i,d,v,b,x,j,E)}}function s(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}}),Jt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;var t=pe(),r=Gt(),a=is(),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function c(f,l=!0){return typeof f=="boolean"?!0:l===!0?!o(f):l?i(f)<=l:!1}e.inlineRef=c;var n=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(f){for(let l in f){if(n.has(l))return!0;let g=f[l];if(Array.isArray(g)&&g.some(o)||typeof g=="object"&&o(g))return!0}return!1}function i(f){let l=0;for(let g in f)if(g==="$ref"||(l++,!s.has(g)&&(typeof f[g]=="object"&&(0,t.eachItem)(f[g],p=>l+=i(p)),l===1/0)))return 1/0;return l}function d(f,l="",g){g!==!1&&(l=x(l));let p=f.parse(l);return v(f,p)}e.getFullPath=d;function v(f,l){return f.serialize(l).split("#")[0]+"#"}e._getFullPath=v;var b=/#\/?$/;function x(f){return f?f.replace(b,""):""}e.normalizeId=x;function j(f,l,g){return g=x(g),f.resolve(l,g)}e.resolveUrl=j;var E=/^[a-z_][-a-z0-9._]*$/i;function S(f,l){if(typeof f=="boolean")return{};let{schemaId:g,uriResolver:p}=this.opts,y=x(f[g]||l),$={"":y},m=d(p,y,!1),h={},k=new Set;return a(f,{allKeys:!0},(D,q,F,U)=>{if(U===void 0)return;let W=m+q,ue=$[U];typeof D[g]=="string"&&(ue=ve.call(this,D[g])),_e.call(this,D.$anchor),_e.call(this,D.$dynamicAnchor),$[q]=ue;function ve(ee){let P=this.opts.uriResolver.resolve;if(ee=x(ue?P(ue,ee):ee),k.has(ee))throw M(ee);k.add(ee);let I=this.refs[ee];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?T(D,I.schema,ee):ee!==x(W)&&(ee[0]==="#"?(T(D,h[ee],ee),h[ee]=D):this.refs[ee]=W),ee}function _e(ee){if(typeof ee=="string"){if(!E.test(ee))throw new Error(`invalid anchor "${ee}"`);ve.call(this,`#${ee}`)}}}),h;function T(D,q,F){if(q!==void 0&&!r(D,q))throw M(F)}function M(D){return new Error(`reference "${D}" resolves to more than one schema`)}}e.getSchemaRefs=S}),Ht=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.KeywordCxt=e.validateFunctionCode=void 0;var t=ts(),r=It(),a=Br(),s=It(),c=rs(),n=as(),o=ss(),i=oe(),d=Ke(),v=Jt(),b=pe(),x=Bt();function j(_){if(m(_)&&(k(_),$(_))){l(_);return}E(_,()=>(0,t.topBoolOrEmptySchema)(_))}e.validateFunctionCode=j;function E({gen:_,validateName:C,schema:R,schemaEnv:Z,opts:L},J){L.code.es5?_.func(C,(0,i._)`${d.default.data}, ${d.default.valCxt}`,Z.$async,()=>{_.code((0,i._)`"use strict"; ${p(R,L)}`),f(_,L),_.code(J)}):_.func(C,(0,i._)`${d.default.data}, ${S(L)}`,Z.$async,()=>_.code(p(R,L)).code(J))}function S(_){return(0,i._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${_.dynamicRef?(0,i._)`, ${d.default.dynamicAnchors}={}`:i.nil}}={}`}function f(_,C){_.if(d.default.valCxt,()=>{_.var(d.default.instancePath,(0,i._)`${d.default.valCxt}.${d.default.instancePath}`),_.var(d.default.parentData,(0,i._)`${d.default.valCxt}.${d.default.parentData}`),_.var(d.default.parentDataProperty,(0,i._)`${d.default.valCxt}.${d.default.parentDataProperty}`),_.var(d.default.rootData,(0,i._)`${d.default.valCxt}.${d.default.rootData}`),C.dynamicRef&&_.var(d.default.dynamicAnchors,(0,i._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{_.var(d.default.instancePath,(0,i._)`""`),_.var(d.default.parentData,(0,i._)`undefined`),_.var(d.default.parentDataProperty,(0,i._)`undefined`),_.var(d.default.rootData,d.default.data),C.dynamicRef&&_.var(d.default.dynamicAnchors,(0,i._)`{}`)})}function l(_){let{schema:C,opts:R,gen:Z}=_;E(_,()=>{R.$comment&&C.$comment&&U(_),D(_),Z.let(d.default.vErrors,null),Z.let(d.default.errors,0),R.unevaluated&&g(_),T(_),W(_)})}function g(_){let{gen:C,validateName:R}=_;_.evaluated=C.const("evaluated",(0,i._)`${R}.evaluated`),C.if((0,i._)`${_.evaluated}.dynamicProps`,()=>C.assign((0,i._)`${_.evaluated}.props`,(0,i._)`undefined`)),C.if((0,i._)`${_.evaluated}.dynamicItems`,()=>C.assign((0,i._)`${_.evaluated}.items`,(0,i._)`undefined`))}function p(_,C){let R=typeof _=="object"&&_[C.schemaId];return R&&(C.code.source||C.code.process)?(0,i._)`/*# sourceURL=${R} */`:i.nil}function y(_,C){if(m(_)&&(k(_),$(_))){h(_,C);return}(0,t.boolOrEmptySchema)(_,C)}function $({schema:_,self:C}){if(typeof _=="boolean")return!_;for(let R in _)if(C.RULES.all[R])return!0;return!1}function m(_){return typeof _.schema!="boolean"}function h(_,C){let{schema:R,gen:Z,opts:L}=_;L.$comment&&R.$comment&&U(_),q(_),F(_);let J=Z.const("_errs",d.default.errors);T(_,J),Z.var(C,(0,i._)`${J} === ${d.default.errors}`)}function k(_){(0,b.checkUnknownRules)(_),M(_)}function T(_,C){if(_.opts.jtd)return ve(_,[],!1,C);let R=(0,r.getSchemaTypes)(_.schema),Z=(0,r.coerceAndCheckDataType)(_,R);ve(_,R,!Z,C)}function M(_){let{schema:C,errSchemaPath:R,opts:Z,self:L}=_;C.$ref&&Z.ignoreKeywordsWithRef&&(0,b.schemaHasRulesButRef)(C,L.RULES)&&L.logger.warn(`$ref: keywords ignored in schema at path "${R}"`)}function D(_){let{schema:C,opts:R}=_;C.default!==void 0&&R.useDefaults&&R.strictSchema&&(0,b.checkStrictMode)(_,"default is ignored in the schema root")}function q(_){let C=_.schema[_.opts.schemaId];C&&(_.baseId=(0,v.resolveUrl)(_.opts.uriResolver,_.baseId,C))}function F(_){if(_.schema.$async&&!_.schemaEnv.$async)throw new Error("async schema in sync schema")}function U({gen:_,schemaEnv:C,schema:R,errSchemaPath:Z,opts:L}){let J=R.$comment;if(L.$comment===!0)_.code((0,i._)`${d.default.self}.logger.log(${J})`);else if(typeof L.$comment=="function"){let fe=(0,i.str)`${Z}/$comment`,ye=_.scopeValue("root",{ref:C.root});_.code((0,i._)`${d.default.self}.opts.$comment(${J}, ${fe}, ${ye}.schema)`)}}function W(_){let{gen:C,schemaEnv:R,validateName:Z,ValidationError:L,opts:J}=_;R.$async?C.if((0,i._)`${d.default.errors} === 0`,()=>C.return(d.default.data),()=>C.throw((0,i._)`new ${L}(${d.default.vErrors})`)):(C.assign((0,i._)`${Z}.errors`,d.default.vErrors),J.unevaluated&&ue(_),C.return((0,i._)`${d.default.errors} === 0`))}function ue({gen:_,evaluated:C,props:R,items:Z}){R instanceof i.Name&&_.assign((0,i._)`${C}.props`,R),Z instanceof i.Name&&_.assign((0,i._)`${C}.items`,Z)}function ve(_,C,R,Z){let{gen:L,schema:J,data:fe,allErrors:ye,opts:be,self:me}=_,{RULES:le}=me;if(J.$ref&&(be.ignoreKeywordsWithRef||!(0,b.schemaHasRulesButRef)(J,le))){L.block(()=>Y(_,"$ref",le.all.$ref.definition));return}be.jtd||ee(_,C),L.block(()=>{for(let ge of le.rules)Pe(ge);Pe(le.post)});function Pe(ge){(0,a.shouldUseGroup)(J,ge)&&(ge.type?(L.if((0,s.checkDataType)(ge.type,fe,be.strictNumbers)),_e(_,ge),C.length===1&&C[0]===ge.type&&R&&(L.else(),(0,s.reportTypeError)(_)),L.endIf()):_e(_,ge),ye||L.if((0,i._)`${d.default.errors} === ${Z||0}`))}}function _e(_,C){let{gen:R,schema:Z,opts:{useDefaults:L}}=_;L&&(0,c.assignDefaults)(_,C.type),R.block(()=>{for(let J of C.rules)(0,a.shouldUseRule)(Z,J)&&Y(_,J.keyword,J.definition,C.type)})}function ee(_,C){_.schemaEnv.meta||!_.opts.strictTypes||(P(_,C),_.opts.allowUnionTypes||I(_,C),A(_,_.dataTypes))}function P(_,C){if(C.length){if(!_.dataTypes.length){_.dataTypes=C;return}C.forEach(R=>{w(_.dataTypes,R)||V(_,`type "${R}" not allowed by context "${_.dataTypes.join(",")}"`)}),O(_,C)}}function I(_,C){C.length>1&&!(C.length===2&&C.includes("null"))&&V(_,"use allowUnionTypes to allow union type keyword")}function A(_,C){let R=_.self.RULES.all;for(let Z in R){let L=R[Z];if(typeof L=="object"&&(0,a.shouldUseRule)(_.schema,L)){let{type:J}=L.definition;J.length&&!J.some(fe=>u(C,fe))&&V(_,`missing type "${J.join(",")}" for keyword "${Z}"`)}}}function u(_,C){return _.includes(C)||C==="number"&&_.includes("integer")}function w(_,C){return _.includes(C)||C==="integer"&&_.includes("number")}function O(_,C){let R=[];for(let Z of _.dataTypes)w(C,Z)?R.push(Z):C.includes("integer")&&Z==="number"&&R.push("integer");_.dataTypes=R}function V(_,C){let R=_.schemaEnv.baseId+_.errSchemaPath;C+=` at "${R}" (strictTypes)`,(0,b.checkStrictMode)(_,C,_.opts.strictTypes)}var K=class{constructor(_,C,R){if((0,n.validateKeywordUsage)(_,C,R),this.gen=_.gen,this.allErrors=_.allErrors,this.keyword=R,this.data=_.data,this.schema=_.schema[R],this.$data=C.$data&&_.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,b.schemaRefOrVal)(_,this.schema,R,this.$data),this.schemaType=C.schemaType,this.parentSchema=_.schema,this.params={},this.it=_,this.def=C,this.$data)this.schemaCode=_.gen.const("vSchema",we(this.$data,_));else if(this.schemaCode=this.schemaValue,!(0,n.validSchemaType)(this.schema,C.schemaType,C.allowUndefined))throw new Error(`${R} value must be ${JSON.stringify(C.schemaType)}`);("code"in C?C.trackErrors:C.errors!==!1)&&(this.errsCount=_.gen.const("_errs",d.default.errors))}result(_,C,R){this.failResult((0,i.not)(_),C,R)}failResult(_,C,R){this.gen.if(_),R?R():this.error(),C?(this.gen.else(),C(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_,C){this.failResult((0,i.not)(_),void 0,C)}fail(_){if(_===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(_),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_){if(!this.$data)return this.fail(_);let{schemaCode:C}=this;this.fail((0,i._)`${C} !== undefined && (${(0,i.or)(this.invalid$data(),_)})`)}error(_,C,R){if(C){this.setParams(C),this._error(_,R),this.setParams({});return}this._error(_,R)}_error(_,C){(_?x.reportExtraError:x.reportError)(this,this.def.error,C)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(_){this.allErrors||this.gen.if(_)}setParams(_,C){C?Object.assign(this.params,_):this.params=_}block$data(_,C,R=i.nil){this.gen.block(()=>{this.check$data(_,R),C()})}check$data(_=i.nil,C=i.nil){if(!this.$data)return;let{gen:R,schemaCode:Z,schemaType:L,def:J}=this;R.if((0,i.or)((0,i._)`${Z} === undefined`,C)),_!==i.nil&&R.assign(_,!0),(L.length||J.validateSchema)&&(R.elseIf(this.invalid$data()),this.$dataError(),_!==i.nil&&R.assign(_,!1)),R.else()}invalid$data(){let{gen:_,schemaCode:C,schemaType:R,def:Z,it:L}=this;return(0,i.or)(J(),fe());function J(){if(R.length){if(!(C instanceof i.Name))throw new Error("ajv implementation error");let ye=Array.isArray(R)?R:[R];return(0,i._)`${(0,s.checkDataTypes)(ye,C,L.opts.strictNumbers,s.DataType.Wrong)}`}return i.nil}function fe(){if(Z.validateSchema){let ye=_.scopeValue("validate$data",{ref:Z.validateSchema});return(0,i._)`!${ye}(${C})`}return i.nil}}subschema(_,C){let R=(0,o.getSubschema)(this.it,_);(0,o.extendSubschemaData)(R,this.it,_),(0,o.extendSubschemaMode)(R,_);let Z={...this.it,...R,items:void 0,props:void 0};return y(Z,C),Z}mergeEvaluated(_,C){let{it:R,gen:Z}=this;R.opts.unevaluated&&(R.props!==!0&&_.props!==void 0&&(R.props=b.mergeEvaluated.props(Z,_.props,R.props,C)),R.items!==!0&&_.items!==void 0&&(R.items=b.mergeEvaluated.items(Z,_.items,R.items,C)))}mergeValidEvaluated(_,C){let{it:R,gen:Z}=this;if(R.opts.unevaluated&&(R.props!==!0||R.items!==!0))return Z.if(C,()=>this.mergeEvaluated(_,i.Name)),!0}};e.KeywordCxt=K;function Y(_,C,R,Z){let L=new K(_,R,C);"code"in R?R.code(L,Z):L.$data&&R.validate?(0,n.funcKeywordCode)(L,R):"macro"in R?(0,n.macroKeywordCode)(L,R):(R.compile||R.validate)&&(0,n.funcKeywordCode)(L,R)}var B=/^\/(?:[^~]|~0|~1)*$/,se=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function we(_,{dataLevel:C,dataNames:R,dataPathArr:Z}){let L,J;if(_==="")return d.default.rootData;if(_[0]==="/"){if(!B.test(_))throw new Error(`Invalid JSON-pointer: ${_}`);L=_,J=d.default.rootData}else{let me=se.exec(_);if(!me)throw new Error(`Invalid JSON-pointer: ${_}`);let le=+me[1];if(L=me[2],L==="#"){if(le>=C)throw new Error(be("property/index",le));return Z[C-le]}if(le>C)throw new Error(be("data",le));if(J=R[C-le],!L)return J}let fe=J,ye=L.split("/");for(let me of ye)me&&(J=(0,i._)`${J}${(0,i.getProperty)((0,b.unescapeJsonPointer)(me))}`,fe=(0,i._)`${fe} && ${J}`);return fe;function be(me,le){return`Cannot access ${me} ${le} levels up, current level is ${C}`}}e.getData=we}),gr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=class extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}};e.default=t}),Wt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Jt(),r=class extends Error{constructor(a,s,c,n){super(n||`can't resolve reference ${c} from id ${s}`),this.missingRef=(0,t.resolveUrl)(a,s,c),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(a,this.missingRef))}};e.default=r}),vr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.getCompilingSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;var t=oe(),r=gr(),a=Ke(),s=Jt(),c=pe(),n=Ht(),o=class{constructor(l){var g;this.refs={},this.dynamicAnchors={};let p;typeof l.schema=="object"&&(p=l.schema),this.schema=l.schema,this.schemaId=l.schemaId,this.root=l.root||this,this.baseId=(g=l.baseId)!==null&&g!==void 0?g:(0,s.normalizeId)(p?.[l.schemaId||"$id"]),this.schemaPath=l.schemaPath,this.localRefs=l.localRefs,this.meta=l.meta,this.$async=p?.$async,this.refs={}}};e.SchemaEnv=o;function i(l){let g=b.call(this,l);if(g)return g;let p=(0,s.getFullPath)(this.opts.uriResolver,l.root.baseId),{es5:y,lines:$}=this.opts.code,{ownProperties:m}=this.opts,h=new t.CodeGen(this.scope,{es5:y,lines:$,ownProperties:m}),k;l.$async&&(k=h.scopeValue("Error",{ref:r.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));let T=h.scopeName("validate");l.validateName=T;let M={gen:h,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",this.opts.code.source===!0?{ref:l.schema,code:(0,t.stringify)(l.schema)}:{ref:l.schema}),validateName:T,ValidationError:k,schema:l.schema,schemaEnv:l,rootId:p,baseId:l.baseId||p,schemaPath:t.nil,errSchemaPath:l.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this},D;try{this._compilations.add(l),(0,n.validateFunctionCode)(M),h.optimize(this.opts.code.optimize);let q=h.toString();D=`${h.scopeRefs(a.default.scope)}return ${q}`,this.opts.code.process&&(D=this.opts.code.process(D,l));let F=new Function(`${a.default.self}`,`${a.default.scope}`,D)(this,this.scope.get());if(this.scope.value(T,{ref:F}),F.errors=null,F.schema=l.schema,F.schemaEnv=l,l.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:T,validateCode:q,scopeValues:h._values}),this.opts.unevaluated){let{props:U,items:W}=M;F.evaluated={props:U instanceof t.Name?void 0:U,items:W instanceof t.Name?void 0:W,dynamicProps:U instanceof t.Name,dynamicItems:W instanceof t.Name},F.source&&(F.source.evaluated=(0,t.stringify)(F.evaluated))}return l.validate=F,l}catch(q){throw delete l.validate,delete l.validateName,D&&this.logger.error("Error compiling schema, function code:",D),q}finally{this._compilations.delete(l)}}e.compileSchema=i;function d(l,g,p){var y;p=(0,s.resolveUrl)(this.opts.uriResolver,g,p);let $=l.refs[p];if($)return $;let m=j.call(this,l,p);if(m===void 0){let h=(y=l.localRefs)===null||y===void 0?void 0:y[p],{schemaId:k}=this.opts;h&&(m=new o({schema:h,schemaId:k,root:l,baseId:g}))}if(m!==void 0)return l.refs[p]=v.call(this,m)}e.resolveRef=d;function v(l){return(0,s.inlineRef)(l.schema,this.opts.inlineRefs)?l.schema:l.validate?l:i.call(this,l)}function b(l){for(let g of this._compilations)if(x(g,l))return g}e.getCompilingSchema=b;function x(l,g){return l.schema===g.schema&&l.root===g.root&&l.baseId===g.baseId}function j(l,g){let p;for(;typeof(p=this.refs[g])=="string";)g=p;return p||this.schemas[g]||E.call(this,l,g)}function E(l,g){let p=this.opts.uriResolver.parse(g),y=(0,s._getFullPath)(this.opts.uriResolver,p),$=(0,s.getFullPath)(this.opts.uriResolver,l.baseId,void 0);if(Object.keys(l.schema).length>0&&y===$)return f.call(this,p,l);let m=(0,s.normalizeId)(y),h=this.refs[m]||this.schemas[m];if(typeof h=="string"){let k=E.call(this,l,h);return typeof k?.schema!="object"?void 0:f.call(this,p,k)}if(typeof h?.schema=="object"){if(h.validate||i.call(this,h),m===(0,s.normalizeId)(g)){let{schema:k}=h,{schemaId:T}=this.opts,M=k[T];return M&&($=(0,s.resolveUrl)(this.opts.uriResolver,$,M)),new o({schema:k,schemaId:T,root:l,baseId:$})}return f.call(this,p,h)}}e.resolveSchema=E;var S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function f(l,{baseId:g,schema:p,root:y}){var $;if((($=l.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(let k of l.fragment.slice(1).split("/")){if(typeof p=="boolean")return;let T=p[(0,c.unescapeFragment)(k)];if(T===void 0)return;p=T;let M=typeof p=="object"&&p[this.opts.schemaId];!S.has(k)&&M&&(g=(0,s.resolveUrl)(this.opts.uriResolver,g,M))}let m;if(typeof p!="boolean"&&p.$ref&&!(0,c.schemaHasRulesButRef)(p,this.RULES)){let k=(0,s.resolveUrl)(this.opts.uriResolver,g,p.$ref);m=E.call(this,y,k)}let{schemaId:h}=this.opts;if(m=m||new o({schema:p,schemaId:h,root:y,baseId:g}),m.schema!==m.root.schema)return m}}),ns=z((e,t)=>{t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),Gr=z((e,t)=>{"use strict";var r=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),a=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(E){let S="",f=0,l=0;for(l=0;l<E.length;l++)if(f=E[l].charCodeAt(0),f!==48){if(!(f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102))return"";S+=E[l];break}for(l+=1;l<E.length;l++){if(f=E[l].charCodeAt(0),!(f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102))return"";S+=E[l]}return S}var c=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function n(E){return E.length=0,!0}function o(E,S,f){if(E.length){let l=s(E);if(l!=="")S.push(l);else return f.error=!0,!1;E.length=0}return!0}function i(E){let S=0,f={error:!1,address:"",zone:""},l=[],g=[],p=!1,y=!1,$=o;for(let m=0;m<E.length;m++){let h=E[m];if(!(h==="["||h==="]"))if(h===":"){if(p===!0&&(y=!0),!$(g,l,f))break;if(++S>7){f.error=!0;break}m>0&&E[m-1]===":"&&(p=!0),l.push(":");continue}else if(h==="%"){if(!$(g,l,f))break;$=n}else{g.push(h);continue}}return g.length&&($===n?f.zone=g.join(""):y?l.push(g.join("")):l.push(s(g))),f.address=l.join(""),f}function d(E){if(v(E,":")<2)return{host:E,isIPV6:!1};let S=i(E);if(S.error)return{host:E,isIPV6:!1};{let f=S.address,l=S.address;return S.zone&&(f+="%"+S.zone,l+="%25"+S.zone),{host:f,isIPV6:!0,escapedHost:l}}}function v(E,S){let f=0;for(let l=0;l<E.length;l++)E[l]===S&&f++;return f}function b(E){let S=E,f=[],l=-1,g=0;for(;g=S.length;){if(g===1){if(S===".")break;if(S==="/"){f.push("/");break}else{f.push(S);break}}else if(g===2){if(S[0]==="."){if(S[1]===".")break;if(S[1]==="/"){S=S.slice(2);continue}}else if(S[0]==="/"&&(S[1]==="."||S[1]==="/")){f.push("/");break}}else if(g===3&&S==="/.."){f.length!==0&&f.pop(),f.push("/");break}if(S[0]==="."){if(S[1]==="."){if(S[2]==="/"){S=S.slice(3);continue}}else if(S[1]==="/"){S=S.slice(2);continue}}else if(S[0]==="/"&&S[1]==="."){if(S[2]==="/"){S=S.slice(2);continue}else if(S[2]==="."&&S[3]==="/"){S=S.slice(3),f.length!==0&&f.pop();continue}}if((l=S.indexOf("/",1))===-1){f.push(S);break}else f.push(S.slice(0,l)),S=S.slice(l)}return f.join("")}function x(E,S){let f=S!==!0?escape:unescape;return E.scheme!==void 0&&(E.scheme=f(E.scheme)),E.userinfo!==void 0&&(E.userinfo=f(E.userinfo)),E.host!==void 0&&(E.host=f(E.host)),E.path!==void 0&&(E.path=f(E.path)),E.query!==void 0&&(E.query=f(E.query)),E.fragment!==void 0&&(E.fragment=f(E.fragment)),E}function j(E){let S=[];if(E.userinfo!==void 0&&(S.push(E.userinfo),S.push("@")),E.host!==void 0){let f=unescape(E.host);if(!a(f)){let l=d(f);l.isIPV6===!0?f=`[${l.escapedHost}]`:f=E.host}S.push(f)}return(typeof E.port=="number"||typeof E.port=="string")&&(S.push(":"),S.push(String(E.port))),S.length?S.join(""):void 0}t.exports={nonSimpleDomain:c,recomposeAuthority:j,normalizeComponentEncoding:x,removeDotSegments:b,isIPv4:a,isUUID:r,normalizeIPv6:d,stringArrayToHexStripped:s}}),os=z((e,t)=>{"use strict";var{isUUID:r}=Gr(),a=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,s=["http","https","ws","wss","urn","urn:uuid"];function c(h){return s.indexOf(h)!==-1}function n(h){return h.secure===!0?!0:h.secure===!1?!1:h.scheme?h.scheme.length===3&&(h.scheme[0]==="w"||h.scheme[0]==="W")&&(h.scheme[1]==="s"||h.scheme[1]==="S")&&(h.scheme[2]==="s"||h.scheme[2]==="S"):!1}function o(h){return h.host||(h.error=h.error||"HTTP URIs must have a host."),h}function i(h){let k=String(h.scheme).toLowerCase()==="https";return(h.port===(k?443:80)||h.port==="")&&(h.port=void 0),h.path||(h.path="/"),h}function d(h){return h.secure=n(h),h.resourceName=(h.path||"/")+(h.query?"?"+h.query:""),h.path=void 0,h.query=void 0,h}function v(h){if((h.port===(n(h)?443:80)||h.port==="")&&(h.port=void 0),typeof h.secure=="boolean"&&(h.scheme=h.secure?"wss":"ws",h.secure=void 0),h.resourceName){let[k,T]=h.resourceName.split("?");h.path=k&&k!=="/"?k:void 0,h.query=T,h.resourceName=void 0}return h.fragment=void 0,h}function b(h,k){if(!h.path)return h.error="URN can not be parsed",h;let T=h.path.match(a);if(T){let M=k.scheme||h.scheme||"urn";h.nid=T[1].toLowerCase(),h.nss=T[2];let D=`${M}:${k.nid||h.nid}`,q=m(D);h.path=void 0,q&&(h=q.parse(h,k))}else h.error=h.error||"URN can not be parsed.";return h}function x(h,k){if(h.nid===void 0)throw new Error("URN without nid cannot be serialized");let T=k.scheme||h.scheme||"urn",M=h.nid.toLowerCase(),D=`${T}:${k.nid||M}`,q=m(D);q&&(h=q.serialize(h,k));let F=h,U=h.nss;return F.path=`${M||k.nid}:${U}`,k.skipEscape=!0,F}function j(h,k){let T=h;return T.uuid=T.nss,T.nss=void 0,!k.tolerant&&(!T.uuid||!r(T.uuid))&&(T.error=T.error||"UUID is not valid."),T}function E(h){let k=h;return k.nss=(h.uuid||"").toLowerCase(),k}var S={scheme:"http",domainHost:!0,parse:o,serialize:i},f={scheme:"https",domainHost:S.domainHost,parse:o,serialize:i},l={scheme:"ws",domainHost:!0,parse:d,serialize:v},g={scheme:"wss",domainHost:l.domainHost,parse:l.parse,serialize:l.serialize},p={scheme:"urn",parse:b,serialize:x,skipNormalize:!0},y={scheme:"urn:uuid",parse:j,serialize:E,skipNormalize:!0},$={http:S,https:f,ws:l,wss:g,urn:p,"urn:uuid":y};Object.setPrototypeOf($,null);function m(h){return h&&($[h]||$[h.toLowerCase()])||void 0}t.exports={wsIsSecure:n,SCHEMES:$,isValidSchemeName:c,getSchemeHandler:m}}),Jr=z((e,t)=>{"use strict";var{normalizeIPv6:r,removeDotSegments:a,recomposeAuthority:s,normalizeComponentEncoding:c,isIPv4:n,nonSimpleDomain:o}=Gr(),{SCHEMES:i,getSchemeHandler:d}=os();function v(g,p){return typeof g=="string"?g=E(f(g,p),p):typeof g=="object"&&(g=f(E(g,p),p)),g}function b(g,p,y){let $=y?Object.assign({scheme:"null"},y):{scheme:"null"},m=x(f(g,$),f(p,$),$,!0);return $.skipEscape=!0,E(m,$)}function x(g,p,y,$){let m={};return $||(g=f(E(g,y),y),p=f(E(p,y),y)),y=y||{},!y.tolerant&&p.scheme?(m.scheme=p.scheme,m.userinfo=p.userinfo,m.host=p.host,m.port=p.port,m.path=a(p.path||""),m.query=p.query):(p.userinfo!==void 0||p.host!==void 0||p.port!==void 0?(m.userinfo=p.userinfo,m.host=p.host,m.port=p.port,m.path=a(p.path||""),m.query=p.query):(p.path?(p.path[0]==="/"?m.path=a(p.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?m.path="/"+p.path:g.path?m.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+p.path:m.path=p.path,m.path=a(m.path)),m.query=p.query):(m.path=g.path,p.query!==void 0?m.query=p.query:m.query=g.query),m.userinfo=g.userinfo,m.host=g.host,m.port=g.port),m.scheme=g.scheme),m.fragment=p.fragment,m}function j(g,p,y){return typeof g=="string"?(g=unescape(g),g=E(c(f(g,y),!0),{...y,skipEscape:!0})):typeof g=="object"&&(g=E(c(g,!0),{...y,skipEscape:!0})),typeof p=="string"?(p=unescape(p),p=E(c(f(p,y),!0),{...y,skipEscape:!0})):typeof p=="object"&&(p=E(c(p,!0),{...y,skipEscape:!0})),g.toLowerCase()===p.toLowerCase()}function E(g,p){let y={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},$=Object.assign({},p),m=[],h=d($.scheme||y.scheme);h&&h.serialize&&h.serialize(y,$),y.path!==void 0&&($.skipEscape?y.path=unescape(y.path):(y.path=escape(y.path),y.scheme!==void 0&&(y.path=y.path.split("%3A").join(":")))),$.reference!=="suffix"&&y.scheme&&m.push(y.scheme,":");let k=s(y);if(k!==void 0&&($.reference!=="suffix"&&m.push("//"),m.push(k),y.path&&y.path[0]!=="/"&&m.push("/")),y.path!==void 0){let T=y.path;!$.absolutePath&&(!h||!h.absolutePath)&&(T=a(T)),k===void 0&&T[0]==="/"&&T[1]==="/"&&(T="/%2F"+T.slice(2)),m.push(T)}return y.query!==void 0&&m.push("?",y.query),y.fragment!==void 0&&m.push("#",y.fragment),m.join("")}var S=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(g,p){let y=Object.assign({},p),$={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},m=!1;y.reference==="suffix"&&(y.scheme?g=y.scheme+":"+g:g="//"+g);let h=g.match(S);if(h){if($.scheme=h[1],$.userinfo=h[3],$.host=h[4],$.port=parseInt(h[5],10),$.path=h[6]||"",$.query=h[7],$.fragment=h[8],isNaN($.port)&&($.port=h[5]),$.host)if(n($.host)===!1){let T=r($.host);$.host=T.host.toLowerCase(),m=T.isIPV6}else m=!0;$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&$.query===void 0&&!$.path?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==$.reference&&($.error=$.error||"URI is not a "+y.reference+" reference.");let k=d(y.scheme||$.scheme);if(!y.unicodeSupport&&(!k||!k.unicodeSupport)&&$.host&&(y.domainHost||k&&k.domainHost)&&m===!1&&o($.host))try{$.host=URL.domainToASCII($.host.toLowerCase())}catch(T){$.error=$.error||"Host's domain name can not be converted to ASCII: "+T}(!k||k&&!k.skipNormalize)&&(g.indexOf("%")!==-1&&($.scheme!==void 0&&($.scheme=unescape($.scheme)),$.host!==void 0&&($.host=unescape($.host))),$.path&&($.path=escape(unescape($.path))),$.fragment&&($.fragment=encodeURI(decodeURIComponent($.fragment)))),k&&k.parse&&k.parse($,y)}else $.error=$.error||"URI can not be parsed.";return $}var l={SCHEMES:i,normalize:v,resolve:b,resolveComponent:x,equal:j,serialize:E,parse:f};t.exports=l,t.exports.default=l,t.exports.fastUri=l}),ls=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Jr();t.code='require("ajv/dist/runtime/uri").default',e.default=t}),ds=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ht();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=oe();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});var a=gr(),s=Wt(),c=Kr(),n=vr(),o=oe(),i=Jt(),d=It(),v=pe(),b=ns(),x=ls(),j=(P,I)=>new RegExp(P,I);j.code="new RegExp";var E=["removeAdditional","useDefaults","coerceTypes"],S=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},l={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},g=200;function p(P){var I,A,u,w,O,V,K,Y,B,se,we,_,C,R,Z,L,J,fe,ye,be,me,le,Pe,ge,Ge;let Oe=P.strict,Je=(I=P.code)===null||I===void 0?void 0:I.optimize,it=Je===!0||Je===void 0?1:Je||0,nt=(u=(A=P.code)===null||A===void 0?void 0:A.regExp)!==null&&u!==void 0?u:j,ir=(w=P.uriResolver)!==null&&w!==void 0?w:x.default;return{strictSchema:(V=(O=P.strictSchema)!==null&&O!==void 0?O:Oe)!==null&&V!==void 0?V:!0,strictNumbers:(Y=(K=P.strictNumbers)!==null&&K!==void 0?K:Oe)!==null&&Y!==void 0?Y:!0,strictTypes:(se=(B=P.strictTypes)!==null&&B!==void 0?B:Oe)!==null&&se!==void 0?se:"log",strictTuples:(_=(we=P.strictTuples)!==null&&we!==void 0?we:Oe)!==null&&_!==void 0?_:"log",strictRequired:(R=(C=P.strictRequired)!==null&&C!==void 0?C:Oe)!==null&&R!==void 0?R:!1,code:P.code?{...P.code,optimize:it,regExp:nt}:{optimize:it,regExp:nt},loopRequired:(Z=P.loopRequired)!==null&&Z!==void 0?Z:g,loopEnum:(L=P.loopEnum)!==null&&L!==void 0?L:g,meta:(J=P.meta)!==null&&J!==void 0?J:!0,messages:(fe=P.messages)!==null&&fe!==void 0?fe:!0,inlineRefs:(ye=P.inlineRefs)!==null&&ye!==void 0?ye:!0,schemaId:(be=P.schemaId)!==null&&be!==void 0?be:"$id",addUsedSchema:(me=P.addUsedSchema)!==null&&me!==void 0?me:!0,validateSchema:(le=P.validateSchema)!==null&&le!==void 0?le:!0,validateFormats:(Pe=P.validateFormats)!==null&&Pe!==void 0?Pe:!0,unicodeRegExp:(ge=P.unicodeRegExp)!==null&&ge!==void 0?ge:!0,int32range:(Ge=P.int32range)!==null&&Ge!==void 0?Ge:!0,uriResolver:ir}}var y=class{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...p(P)};let{es5:I,lines:A}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:S,es5:I,lines:A}),this.logger=q(P.logger);let u=P.validateFormats;P.validateFormats=!1,this.RULES=(0,c.getRules)(),$.call(this,f,P,"NOT SUPPORTED"),$.call(this,l,P,"DEPRECATED","warn"),this._metaOpts=M.call(this),P.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&T.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),h.call(this),P.validateFormats=u}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:P,meta:I,schemaId:A}=this.opts,u=b;A==="id"&&(u={...b},u.id=u.$id,delete u.$id),I&&P&&this.addMetaSchema(u,u[A],!1)}defaultMeta(){let{meta:P,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[I]||P:void 0}validate(P,I){let A;if(typeof P=="string"){if(A=this.getSchema(P),!A)throw new Error(`no schema with key or ref "${P}"`)}else A=this.compile(P);let u=A(I);return"$async"in A||(this.errors=A.errors),u}compile(P,I){let A=this._addSchema(P,I);return A.validate||this._compileSchemaEnv(A)}compileAsync(P,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:A}=this.opts;return u.call(this,P,I);async function u(B,se){await w.call(this,B.$schema);let we=this._addSchema(B,se);return we.validate||O.call(this,we)}async function w(B){B&&!this.getSchema(B)&&await u.call(this,{$ref:B},!0)}async function O(B){try{return this._compileSchemaEnv(B)}catch(se){if(!(se instanceof s.default))throw se;return V.call(this,se),await K.call(this,se.missingSchema),O.call(this,B)}}function V({missingSchema:B,missingRef:se}){if(this.refs[B])throw new Error(`AnySchema ${B} is loaded but ${se} cannot be resolved`)}async function K(B){let se=await Y.call(this,B);this.refs[B]||await w.call(this,se.$schema),this.refs[B]||this.addSchema(se,B,I)}async function Y(B){let se=this._loading[B];if(se)return se;try{return await(this._loading[B]=A(B))}finally{delete this._loading[B]}}}addSchema(P,I,A,u=this.opts.validateSchema){if(Array.isArray(P)){for(let O of P)this.addSchema(O,void 0,A,u);return this}let w;if(typeof P=="object"){let{schemaId:O}=this.opts;if(w=P[O],w!==void 0&&typeof w!="string")throw new Error(`schema ${O} must be string`)}return I=(0,i.normalizeId)(I||w),this._checkUnique(I),this.schemas[I]=this._addSchema(P,A,I,u,!0),this}addMetaSchema(P,I,A=this.opts.validateSchema){return this.addSchema(P,I,!0,A),this}validateSchema(P,I){if(typeof P=="boolean")return!0;let A;if(A=P.$schema,A!==void 0&&typeof A!="string")throw new Error("$schema must be a string");if(A=A||this.opts.defaultMeta||this.defaultMeta(),!A)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let u=this.validate(A,P);if(!u&&I){let w="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(w);else throw new Error(w)}return u}getSchema(P){let I;for(;typeof(I=m.call(this,P))=="string";)P=I;if(I===void 0){let{schemaId:A}=this.opts,u=new n.SchemaEnv({schema:{},schemaId:A});if(I=n.resolveSchema.call(this,u,P),!I)return;this.refs[P]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let I=m.call(this,P);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{let I=P;this._cache.delete(I);let A=P[this.opts.schemaId];return A&&(A=(0,i.normalizeId)(A),delete this.schemas[A],delete this.refs[A]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(let I of P)this.addKeyword(I);return this}addKeyword(P,I){let A;if(typeof P=="string")A=P,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=A);else if(typeof P=="object"&&I===void 0){if(I=P,A=I.keyword,Array.isArray(A)&&!A.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,A,I),!I)return(0,v.eachItem)(A,w=>W.call(this,w)),this;ve.call(this,I);let u={...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)};return(0,v.eachItem)(A,u.type.length===0?w=>W.call(this,w,u):w=>u.type.forEach(O=>W.call(this,w,u,O))),this}getKeyword(P){let I=this.RULES.all[P];return typeof I=="object"?I.definition:!!I}removeKeyword(P){let{RULES:I}=this;delete I.keywords[P],delete I.all[P];for(let A of I.rules){let u=A.rules.findIndex(w=>w.keyword===P);u>=0&&A.rules.splice(u,1)}return this}addFormat(P,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[P]=I,this}errorsText(P=this.errors,{separator:I=", ",dataVar:A="data"}={}){return!P||P.length===0?"No errors":P.map(u=>`${A}${u.instancePath} ${u.message}`).reduce((u,w)=>u+I+w)}$dataMetaSchema(P,I){let A=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(let u of I){let w=u.split("/").slice(1),O=P;for(let V of w)O=O[V];for(let V in A){let K=A[V];if(typeof K!="object")continue;let{$data:Y}=K.definition,B=O[V];Y&&B&&(O[V]=ee(B))}}return P}_removeAllSchemas(P,I){for(let A in P){let u=P[A];(!I||I.test(A))&&(typeof u=="string"?delete P[A]:u&&!u.meta&&(this._cache.delete(u.schema),delete P[A]))}}_addSchema(P,I,A,u=this.opts.validateSchema,w=this.opts.addUsedSchema){let O,{schemaId:V}=this.opts;if(typeof P=="object")O=P[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let K=this._cache.get(P);if(K!==void 0)return K;A=(0,i.normalizeId)(O||A);let Y=i.getSchemaRefs.call(this,P,A);return K=new n.SchemaEnv({schema:P,schemaId:V,meta:I,baseId:A,localRefs:Y}),this._cache.set(K.schema,K),w&&!A.startsWith("#")&&(A&&this._checkUnique(A),this.refs[A]=K),u&&this.validateSchema(P,!0),K}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):n.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){let I=this.opts;this.opts=this._metaOpts;try{n.compileSchema.call(this,P)}finally{this.opts=I}}};y.ValidationError=a.default,y.MissingRefError=s.default,e.default=y;function $(P,I,A,u="error"){for(let w in P){let O=w;O in I&&this.logger[u](`${A}: option ${w}. ${P[O]}`)}}function m(P){return P=(0,i.normalizeId)(P),this.schemas[P]||this.refs[P]}function h(){let P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(let I in P)this.addSchema(P[I],I)}function k(){for(let P in this.opts.formats){let I=this.opts.formats[P];I&&this.addFormat(P,I)}}function T(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let I in P){let A=P[I];A.keyword||(A.keyword=I),this.addKeyword(A)}}function M(){let P={...this.opts};for(let I of E)delete P[I];return P}var D={log(){},warn(){},error(){}};function q(P){if(P===!1)return D;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}var F=/^[a-z_$][a-z0-9_$:-]*$/i;function U(P,I){let{RULES:A}=this;if((0,v.eachItem)(P,u=>{if(A.keywords[u])throw new Error(`Keyword ${u} is already defined`);if(!F.test(u))throw new Error(`Keyword ${u} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function W(P,I,A){var u;let w=I?.post;if(A&&w)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:O}=this,V=w?O.post:O.rules.find(({type:Y})=>Y===A);if(V||(V={type:A,rules:[]},O.rules.push(V)),O.keywords[P]=!0,!I)return;let K={keyword:P,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ue.call(this,V,K,I.before):V.rules.push(K),O.all[P]=K,(u=I.implements)===null||u===void 0||u.forEach(Y=>this.addKeyword(Y))}function ue(P,I,A){let u=P.rules.findIndex(w=>w.keyword===A);u>=0?P.rules.splice(u,0,I):(P.rules.push(I),this.logger.warn(`rule ${A} is not defined`))}function ve(P){let{metaSchema:I}=P;I!==void 0&&(P.$data&&this.opts.$data&&(I=ee(I)),P.validateSchema=this.compile(I,!0))}var _e={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ee(P){return{anyOf:[P,_e]}}}),cs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=t}),us=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;var t=Wt(),r=Re(),a=oe(),s=Ke(),c=vr(),n=pe(),o={keyword:"$ref",schemaType:"string",code(v){let{gen:b,schema:x,it:j}=v,{baseId:E,schemaEnv:S,validateName:f,opts:l,self:g}=j,{root:p}=S;if((x==="#"||x==="#/")&&E===p.baseId)return $();let y=c.resolveRef.call(g,p,E,x);if(y===void 0)throw new t.default(j.opts.uriResolver,E,x);if(y instanceof c.SchemaEnv)return m(y);return h(y);function $(){if(S===p)return d(v,f,S,S.$async);let k=b.scopeValue("root",{ref:p});return d(v,(0,a._)`${k}.validate`,p,p.$async)}function m(k){let T=i(v,k);d(v,T,k,k.$async)}function h(k){let T=b.scopeValue("schema",l.code.source===!0?{ref:k,code:(0,a.stringify)(k)}:{ref:k}),M=b.name("valid"),D=v.subschema({schema:k,dataTypes:[],schemaPath:a.nil,topSchemaRef:T,errSchemaPath:x},M);v.mergeEvaluated(D),v.ok(M)}}};function i(v,b){let{gen:x}=v;return b.validate?x.scopeValue("validate",{ref:b.validate}):(0,a._)`${x.scopeValue("wrapper",{ref:b})}.validate`}e.getValidate=i;function d(v,b,x,j){let{gen:E,it:S}=v,{allErrors:f,schemaEnv:l,opts:g}=S,p=g.passContext?s.default.this:a.nil;j?y():$();function y(){if(!l.$async)throw new Error("async schema referenced by sync schema");let k=E.let("valid");E.try(()=>{E.code((0,a._)`await ${(0,r.callValidateCode)(v,b,p)}`),h(b),f||E.assign(k,!0)},T=>{E.if((0,a._)`!(${T} instanceof ${S.ValidationError})`,()=>E.throw(T)),m(T),f||E.assign(k,!1)}),v.ok(k)}function $(){v.result((0,r.callValidateCode)(v,b,p),()=>h(b),()=>m(b))}function m(k){let T=(0,a._)`${k}.errors`;E.assign(s.default.vErrors,(0,a._)`${s.default.vErrors} === null ? ${T} : ${s.default.vErrors}.concat(${T})`),E.assign(s.default.errors,(0,a._)`${s.default.vErrors}.length`)}function h(k){var T;if(!S.opts.unevaluated)return;let M=(T=x?.validate)===null||T===void 0?void 0:T.evaluated;if(S.props!==!0)if(M&&!M.dynamicProps)M.props!==void 0&&(S.props=n.mergeEvaluated.props(E,M.props,S.props));else{let D=E.var("props",(0,a._)`${k}.evaluated.props`);S.props=n.mergeEvaluated.props(E,D,S.props,a.Name)}if(S.items!==!0)if(M&&!M.dynamicItems)M.items!==void 0&&(S.items=n.mergeEvaluated.items(E,M.items,S.items));else{let D=E.var("items",(0,a._)`${k}.evaluated.items`);S.items=n.mergeEvaluated.items(E,D,S.items,a.Name)}}}e.callRef=d,e.default=o}),ps=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=cs(),r=us(),a=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,r.default];e.default=a}),hs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=t.operators,a={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},s={message:({keyword:n,schemaCode:o})=>(0,t.str)`must be ${a[n].okStr} ${o}`,params:({keyword:n,schemaCode:o})=>(0,t._)`{comparison: ${a[n].okStr}, limit: ${o}}`},c={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:s,code(n){let{keyword:o,data:i,schemaCode:d}=n;n.fail$data((0,t._)`${i} ${a[o].fail} ${d} || isNaN(${i})`)}};e.default=c}),fs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r={message:({schemaCode:s})=>(0,t.str)`must be multiple of ${s}`,params:({schemaCode:s})=>(0,t._)`{multipleOf: ${s}}`},a={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:r,code(s){let{gen:c,data:n,schemaCode:o,it:i}=s,d=i.opts.multipleOfPrecision,v=c.let("res"),b=d?(0,t._)`Math.abs(Math.round(${v}) - ${v}) > 1e-${d}`:(0,t._)`${v} !== parseInt(${v})`;s.fail$data((0,t._)`(${o} === 0 || (${v} = ${n}/${o}, ${b}))`)}};e.default=a}),ms=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){let a=r.length,s=0,c=0,n;for(;c<a;)s++,n=r.charCodeAt(c++),n>=55296&&n<=56319&&c<a&&(n=r.charCodeAt(c),(n&64512)===56320&&c++);return s}e.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'}),ys=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a=ms(),s={message({keyword:n,schemaCode:o}){let i=n==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${o} characters`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},c={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s,code(n){let{keyword:o,data:i,schemaCode:d,it:v}=n,b=o==="maxLength"?t.operators.GT:t.operators.LT,x=v.opts.unicode===!1?(0,t._)`${i}.length`:(0,t._)`${(0,r.useFunc)(n.gen,a.default)}(${i})`;n.fail$data((0,t._)`${x} ${b} ${d}`)}};e.default=c}),gs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),r=oe(),a={message:({schemaCode:c})=>(0,r.str)`must match pattern "${c}"`,params:({schemaCode:c})=>(0,r._)`{pattern: ${c}}`},s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:a,code(c){let{data:n,$data:o,schema:i,schemaCode:d,it:v}=c,b=v.opts.unicodeRegExp?"u":"",x=o?(0,r._)`(new RegExp(${d}, ${b}))`:(0,t.usePattern)(c,i);c.fail$data((0,r._)`!${x}.test(${n})`)}};e.default=s}),vs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r={message({keyword:s,schemaCode:c}){let n=s==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${n} than ${c} properties`},params:({schemaCode:s})=>(0,t._)`{limit: ${s}}`},a={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:r,code(s){let{keyword:c,data:n,schemaCode:o}=s,i=c==="maxProperties"?t.operators.GT:t.operators.LT;s.fail$data((0,t._)`Object.keys(${n}).length ${i} ${o}`)}};e.default=a}),_s=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),r=oe(),a=pe(),s={message:({params:{missingProperty:n}})=>(0,r.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,r._)`{missingProperty: ${n}}`},c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:s,code(n){let{gen:o,schema:i,schemaCode:d,data:v,$data:b,it:x}=n,{opts:j}=x;if(!b&&i.length===0)return;let E=i.length>=j.loopRequired;if(x.allErrors?S():f(),j.strictRequired){let p=n.parentSchema.properties,{definedProperties:y}=n.it;for(let $ of i)if(p?.[$]===void 0&&!y.has($)){let m=x.schemaEnv.baseId+x.errSchemaPath,h=`required property "${$}" is not defined at "${m}" (strictRequired)`;(0,a.checkStrictMode)(x,h,x.opts.strictRequired)}}function S(){if(E||b)n.block$data(r.nil,l);else for(let p of i)(0,t.checkReportMissingProp)(n,p)}function f(){let p=o.let("missing");if(E||b){let y=o.let("valid",!0);n.block$data(y,()=>g(p,y)),n.ok(y)}else o.if((0,t.checkMissingProp)(n,i,p)),(0,t.reportMissingProp)(n,p),o.else()}function l(){o.forOf("prop",d,p=>{n.setParams({missingProperty:p}),o.if((0,t.noPropertyInData)(o,v,p,j.ownProperties),()=>n.error())})}function g(p,y){n.setParams({missingProperty:p}),o.forOf(p,d,()=>{o.assign(y,(0,t.propertyInData)(o,v,p,j.ownProperties)),o.if((0,r.not)(y),()=>{n.error(),o.break()})},r.nil)}}};e.default=c}),$s=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r={message({keyword:s,schemaCode:c}){let n=s==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${n} than ${c} items`},params:({schemaCode:s})=>(0,t._)`{limit: ${s}}`},a={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:r,code(s){let{keyword:c,data:n,schemaCode:o}=s,i=c==="maxItems"?t.operators.GT:t.operators.LT;s.fail$data((0,t._)`${n}.length ${i} ${o}`)}};e.default=a}),_r=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Gt();t.code='require("ajv/dist/runtime/equal").default',e.default=t}),bs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=It(),r=oe(),a=pe(),s=_r(),c={message:({params:{i:o,j:i}})=>(0,r.str)`must NOT have duplicate items (items ## ${i} and ${o} are identical)`,params:({params:{i:o,j:i}})=>(0,r._)`{i: ${o}, j: ${i}}`},n={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:c,code(o){let{gen:i,data:d,$data:v,schema:b,parentSchema:x,schemaCode:j,it:E}=o;if(!v&&!b)return;let S=i.let("valid"),f=x.items?(0,t.getSchemaTypes)(x.items):[];o.block$data(S,l,(0,r._)`${j} === false`),o.ok(S);function l(){let $=i.let("i",(0,r._)`${d}.length`),m=i.let("j");o.setParams({i:$,j:m}),i.assign(S,!0),i.if((0,r._)`${$} > 1`,()=>(g()?p:y)($,m))}function g(){return f.length>0&&!f.some($=>$==="object"||$==="array")}function p($,m){let h=i.name("item"),k=(0,t.checkDataTypes)(f,h,E.opts.strictNumbers,t.DataType.Wrong),T=i.const("indices",(0,r._)`{}`);i.for((0,r._)`;${$}--;`,()=>{i.let(h,(0,r._)`${d}[${$}]`),i.if(k,(0,r._)`continue`),f.length>1&&i.if((0,r._)`typeof ${h} == "string"`,(0,r._)`${h} += "_"`),i.if((0,r._)`typeof ${T}[${h}] == "number"`,()=>{i.assign(m,(0,r._)`${T}[${h}]`),o.error(),i.assign(S,!1).break()}).code((0,r._)`${T}[${h}] = ${$}`)})}function y($,m){let h=(0,a.useFunc)(i,s.default),k=i.name("outer");i.label(k).for((0,r._)`;${$}--;`,()=>i.for((0,r._)`${m} = ${$}; ${m}--;`,()=>i.if((0,r._)`${h}(${d}[${$}], ${d}[${m}])`,()=>{o.error(),i.assign(S,!1).break(k)})))}}};e.default=n}),ws=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a=_r(),s={message:"must be equal to constant",params:({schemaCode:n})=>(0,t._)`{allowedValue: ${n}}`},c={keyword:"const",$data:!0,error:s,code(n){let{gen:o,data:i,$data:d,schemaCode:v,schema:b}=n;d||b&&typeof b=="object"?n.fail$data((0,t._)`!${(0,r.useFunc)(o,a.default)}(${i}, ${v})`):n.fail((0,t._)`${b} !== ${i}`)}};e.default=c}),ks=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a=_r(),s={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,t._)`{allowedValues: ${n}}`},c={keyword:"enum",schemaType:"array",$data:!0,error:s,code(n){let{gen:o,data:i,$data:d,schema:v,schemaCode:b,it:x}=n;if(!d&&v.length===0)throw new Error("enum must have non-empty array");let j=v.length>=x.opts.loopEnum,E,S=()=>E??(E=(0,r.useFunc)(o,a.default)),f;if(j||d)f=o.let("valid"),n.block$data(f,l);else{if(!Array.isArray(v))throw new Error("ajv implementation error");let p=o.const("vSchema",b);f=(0,t.or)(...v.map((y,$)=>g(p,$)))}n.pass(f);function l(){o.assign(f,!1),o.forOf("v",b,p=>o.if((0,t._)`${S()}(${i}, ${p})`,()=>o.assign(f,!0).break()))}function g(p,y){let $=v[y];return typeof $=="object"&&$!==null?(0,t._)`${S()}(${i}, ${p}[${y}])`:(0,t._)`${i} === ${$}`}}};e.default=c}),Ss=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=hs(),r=fs(),a=ys(),s=gs(),c=vs(),n=_s(),o=$s(),i=bs(),d=ws(),v=ks(),b=[t.default,r.default,a.default,s.default,c.default,n.default,o.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,v.default];e.default=b}),Hr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAdditionalItems=void 0;var t=oe(),r=pe(),a={message:({params:{len:n}})=>(0,t.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,t._)`{limit: ${n}}`},s={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:a,code(n){let{parentSchema:o,it:i}=n,{items:d}=o;if(!Array.isArray(d)){(0,r.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}c(n,d)}};function c(n,o){let{gen:i,schema:d,data:v,keyword:b,it:x}=n;x.items=!0;let j=i.const("len",(0,t._)`${v}.length`);if(d===!1)n.setParams({len:o.length}),n.pass((0,t._)`${j} <= ${o.length}`);else if(typeof d=="object"&&!(0,r.alwaysValidSchema)(x,d)){let S=i.var("valid",(0,t._)`${j} <= ${o.length}`);i.if((0,t.not)(S),()=>E(S)),n.ok(S)}function E(S){i.forRange("i",o.length,j,f=>{n.subschema({keyword:b,dataProp:f,dataPropType:r.Type.Num},S),x.allErrors||i.if((0,t.not)(S),()=>i.break())})}}e.validateAdditionalItems=c,e.default=s}),Wr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateTuple=void 0;var t=oe(),r=pe(),a=Re(),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){let{schema:o,it:i}=n;if(Array.isArray(o))return c(n,"additionalItems",o);i.items=!0,!(0,r.alwaysValidSchema)(i,o)&&n.ok((0,a.validateArray)(n))}};function c(n,o,i=n.schema){let{gen:d,parentSchema:v,data:b,keyword:x,it:j}=n;f(v),j.opts.unevaluated&&i.length&&j.items!==!0&&(j.items=r.mergeEvaluated.items(d,i.length,j.items));let E=d.name("valid"),S=d.const("len",(0,t._)`${b}.length`);i.forEach((l,g)=>{(0,r.alwaysValidSchema)(j,l)||(d.if((0,t._)`${S} > ${g}`,()=>n.subschema({keyword:x,schemaProp:g,dataProp:g},E)),n.ok(E))});function f(l){let{opts:g,errSchemaPath:p}=j,y=i.length,$=y===l.minItems&&(y===l.maxItems||l[o]===!1);if(g.strictTuples&&!$){let m=`"${x}" is ${y}-tuple, but minItems or maxItems/${o} are not specified or different at path "${p}"`;(0,r.checkStrictMode)(j,m,g.strictTuples)}}}e.validateTuple=c,e.default=s}),Es=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Wr(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:a=>(0,t.validateTuple)(a,"items")};e.default=r}),Ps=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a=Re(),s=Hr(),c={message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},n={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:c,code(o){let{schema:i,parentSchema:d,it:v}=o,{prefixItems:b}=d;v.items=!0,!(0,r.alwaysValidSchema)(v,i)&&(b?(0,s.validateAdditionalItems)(o,b):o.ok((0,a.validateArray)(o)))}};e.default=n}),Ns=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a={message:({params:{min:c,max:n}})=>n===void 0?(0,t.str)`must contain at least ${c} valid item(s)`:(0,t.str)`must contain at least ${c} and no more than ${n} valid item(s)`,params:({params:{min:c,max:n}})=>n===void 0?(0,t._)`{minContains: ${c}}`:(0,t._)`{minContains: ${c}, maxContains: ${n}}`},s={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:a,code(c){let{gen:n,schema:o,parentSchema:i,data:d,it:v}=c,b,x,{minContains:j,maxContains:E}=i;v.opts.next?(b=j===void 0?1:j,x=E):b=1;let S=n.const("len",(0,t._)`${d}.length`);if(c.setParams({min:b,max:x}),x===void 0&&b===0){(0,r.checkStrictMode)(v,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(x!==void 0&&b>x){(0,r.checkStrictMode)(v,'"minContains" > "maxContains" is always invalid'),c.fail();return}if((0,r.alwaysValidSchema)(v,o)){let y=(0,t._)`${S} >= ${b}`;x!==void 0&&(y=(0,t._)`${y} && ${S} <= ${x}`),c.pass(y);return}v.items=!0;let f=n.name("valid");x===void 0&&b===1?g(f,()=>n.if(f,()=>n.break())):b===0?(n.let(f,!0),x!==void 0&&n.if((0,t._)`${d}.length > 0`,l)):(n.let(f,!1),l()),c.result(f,()=>c.reset());function l(){let y=n.name("_valid"),$=n.let("count",0);g(y,()=>n.if(y,()=>p($)))}function g(y,$){n.forRange("i",0,S,m=>{c.subschema({keyword:"contains",dataProp:m,dataPropType:r.Type.Num,compositeRule:!0},y),$()})}function p(y){n.code((0,t._)`${y}++`),x===void 0?n.if((0,t._)`${y} >= ${b}`,()=>n.assign(f,!0).break()):(n.if((0,t._)`${y} > ${x}`,()=>n.assign(f,!1).break()),b===1?n.assign(f,!0):n.if((0,t._)`${y} >= ${b}`,()=>n.assign(f,!0)))}}};e.default=s}),js=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=oe(),r=pe(),a=Re();e.error={message:({params:{property:i,depsCount:d,deps:v}})=>{let b=d===1?"property":"properties";return(0,t.str)`must have ${b} ${v} when property ${i} is present`},params:({params:{property:i,depsCount:d,deps:v,missingProperty:b}})=>(0,t._)`{property: ${i},
    missingProperty: ${b},
    depsCount: ${d},
    deps: ${v}}`};var s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(i){let[d,v]=c(i);n(i,d),o(i,v)}};function c({schema:i}){let d={},v={};for(let b in i){if(b==="__proto__")continue;let x=Array.isArray(i[b])?d:v;x[b]=i[b]}return[d,v]}function n(i,d=i.schema){let{gen:v,data:b,it:x}=i;if(Object.keys(d).length===0)return;let j=v.let("missing");for(let E in d){let S=d[E];if(S.length===0)continue;let f=(0,a.propertyInData)(v,b,E,x.opts.ownProperties);i.setParams({property:E,depsCount:S.length,deps:S.join(", ")}),x.allErrors?v.if(f,()=>{for(let l of S)(0,a.checkReportMissingProp)(i,l)}):(v.if((0,t._)`${f} && (${(0,a.checkMissingProp)(i,S,j)})`),(0,a.reportMissingProp)(i,j),v.else())}}e.validatePropertyDeps=n;function o(i,d=i.schema){let{gen:v,data:b,keyword:x,it:j}=i,E=v.name("valid");for(let S in d)(0,r.alwaysValidSchema)(j,d[S])||(v.if((0,a.propertyInData)(v,b,S,j.opts.ownProperties),()=>{let f=i.subschema({keyword:x,schemaProp:S},E);i.mergeValidEvaluated(f,E)},()=>v.var(E,!0)),i.ok(E))}e.validateSchemaDeps=o,e.default=s}),xs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a={message:"property name must be valid",params:({params:c})=>(0,t._)`{propertyName: ${c.propertyName}}`},s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:a,code(c){let{gen:n,schema:o,data:i,it:d}=c;if((0,r.alwaysValidSchema)(d,o))return;let v=n.name("valid");n.forIn("key",i,b=>{c.setParams({propertyName:b}),c.subschema({keyword:"propertyNames",data:b,dataTypes:["string"],propertyName:b,compositeRule:!0},v),n.if((0,t.not)(v),()=>{c.error(!0),d.allErrors||n.break()})}),c.ok(v)}};e.default=s}),Yr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),r=oe(),a=Ke(),s=pe(),c={message:"must NOT have additional properties",params:({params:o})=>(0,r._)`{additionalProperty: ${o.additionalProperty}}`},n={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:c,code(o){let{gen:i,schema:d,parentSchema:v,data:b,errsCount:x,it:j}=o;if(!x)throw new Error("ajv implementation error");let{allErrors:E,opts:S}=j;if(j.props=!0,S.removeAdditional!=="all"&&(0,s.alwaysValidSchema)(j,d))return;let f=(0,t.allSchemaProperties)(v.properties),l=(0,t.allSchemaProperties)(v.patternProperties);g(),o.ok((0,r._)`${x} === ${a.default.errors}`);function g(){i.forIn("key",b,h=>{!f.length&&!l.length?$(h):i.if(p(h),()=>$(h))})}function p(h){let k;if(f.length>8){let T=(0,s.schemaRefOrVal)(j,v.properties,"properties");k=(0,t.isOwnProperty)(i,T,h)}else f.length?k=(0,r.or)(...f.map(T=>(0,r._)`${h} === ${T}`)):k=r.nil;return l.length&&(k=(0,r.or)(k,...l.map(T=>(0,r._)`${(0,t.usePattern)(o,T)}.test(${h})`))),(0,r.not)(k)}function y(h){i.code((0,r._)`delete ${b}[${h}]`)}function $(h){if(S.removeAdditional==="all"||S.removeAdditional&&d===!1){y(h);return}if(d===!1){o.setParams({additionalProperty:h}),o.error(),E||i.break();return}if(typeof d=="object"&&!(0,s.alwaysValidSchema)(j,d)){let k=i.name("valid");S.removeAdditional==="failing"?(m(h,k,!1),i.if((0,r.not)(k),()=>{o.reset(),y(h)})):(m(h,k),E||i.if((0,r.not)(k),()=>i.break()))}}function m(h,k,T){let M={keyword:"additionalProperties",dataProp:h,dataPropType:s.Type.Str};T===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(M,k)}}};e.default=n}),Os=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ht(),r=Re(),a=pe(),s=Yr(),c={keyword:"properties",type:"object",schemaType:"object",code(n){let{gen:o,schema:i,parentSchema:d,data:v,it:b}=n;b.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&s.default.code(new t.KeywordCxt(b,s.default,"additionalProperties"));let x=(0,r.allSchemaProperties)(i);for(let l of x)b.definedProperties.add(l);b.opts.unevaluated&&x.length&&b.props!==!0&&(b.props=a.mergeEvaluated.props(o,(0,a.toHash)(x),b.props));let j=x.filter(l=>!(0,a.alwaysValidSchema)(b,i[l]));if(j.length===0)return;let E=o.name("valid");for(let l of j)S(l)?f(l):(o.if((0,r.propertyInData)(o,v,l,b.opts.ownProperties)),f(l),b.allErrors||o.else().var(E,!0),o.endIf()),n.it.definedProperties.add(l),n.ok(E);function S(l){return b.opts.useDefaults&&!b.compositeRule&&i[l].default!==void 0}function f(l){n.subschema({keyword:"properties",schemaProp:l,dataProp:l},E)}}};e.default=c}),Cs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),r=oe(),a=pe(),s=pe(),c={keyword:"patternProperties",type:"object",schemaType:"object",code(n){let{gen:o,schema:i,data:d,parentSchema:v,it:b}=n,{opts:x}=b,j=(0,t.allSchemaProperties)(i),E=j.filter($=>(0,a.alwaysValidSchema)(b,i[$]));if(j.length===0||E.length===j.length&&(!b.opts.unevaluated||b.props===!0))return;let S=x.strictSchema&&!x.allowMatchingProperties&&v.properties,f=o.name("valid");b.props!==!0&&!(b.props instanceof r.Name)&&(b.props=(0,s.evaluatedPropsToName)(o,b.props));let{props:l}=b;g();function g(){for(let $ of j)S&&p($),b.allErrors?y($):(o.var(f,!0),y($),o.if(f))}function p($){for(let m in S)new RegExp($).test(m)&&(0,a.checkStrictMode)(b,`property ${m} matches pattern ${$} (use allowMatchingProperties)`)}function y($){o.forIn("key",d,m=>{o.if((0,r._)`${(0,t.usePattern)(n,$)}.test(${m})`,()=>{let h=E.includes($);h||n.subschema({keyword:"patternProperties",schemaProp:$,dataProp:m,dataPropType:s.Type.Str},f),b.opts.unevaluated&&l!==!0?o.assign((0,r._)`${l}[${m}]`,!0):!h&&!b.allErrors&&o.if((0,r.not)(f),()=>o.break())})})}}};e.default=c}),Ts=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=pe(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(a){let{gen:s,schema:c,it:n}=a;if((0,t.alwaysValidSchema)(n,c)){a.fail();return}let o=s.name("valid");a.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),a.failResult(o,()=>a.reset(),()=>a.error())},error:{message:"must NOT be valid"}};e.default=r}),Is=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:t.validateUnion,error:{message:"must match a schema in anyOf"}};e.default=r}),Rs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a={message:"must match exactly one schema in oneOf",params:({params:c})=>(0,t._)`{passingSchemas: ${c.passing}}`},s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:a,code(c){let{gen:n,schema:o,parentSchema:i,it:d}=c;if(!Array.isArray(o))throw new Error("ajv implementation error");if(d.opts.discriminator&&i.discriminator)return;let v=o,b=n.let("valid",!1),x=n.let("passing",null),j=n.name("_valid");c.setParams({passing:x}),n.block(E),c.result(b,()=>c.reset(),()=>c.error(!0));function E(){v.forEach((S,f)=>{let l;(0,r.alwaysValidSchema)(d,S)?n.var(j,!0):l=c.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},j),f>0&&n.if((0,t._)`${j} && ${b}`).assign(b,!1).assign(x,(0,t._)`[${x}, ${f}]`).else(),n.if(j,()=>{n.assign(b,!0),n.assign(x,f),l&&c.mergeEvaluated(l,t.Name)})})}}};e.default=s}),As=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=pe(),r={keyword:"allOf",schemaType:"array",code(a){let{gen:s,schema:c,it:n}=a;if(!Array.isArray(c))throw new Error("ajv implementation error");let o=s.name("valid");c.forEach((i,d)=>{if((0,t.alwaysValidSchema)(n,i))return;let v=a.subschema({keyword:"allOf",schemaProp:d},o);a.ok(o),a.mergeEvaluated(v)})}};e.default=r}),Ds=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=pe(),a={message:({params:n})=>(0,t.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,t._)`{failingKeyword: ${n.ifClause}}`},s={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:a,code(n){let{gen:o,parentSchema:i,it:d}=n;i.then===void 0&&i.else===void 0&&(0,r.checkStrictMode)(d,'"if" without "then" and "else" is ignored');let v=c(d,"then"),b=c(d,"else");if(!v&&!b)return;let x=o.let("valid",!0),j=o.name("_valid");if(E(),n.reset(),v&&b){let f=o.let("ifClause");n.setParams({ifClause:f}),o.if(j,S("then",f),S("else",f))}else v?o.if(j,S("then")):o.if((0,t.not)(j),S("else"));n.pass(x,()=>n.error(!0));function E(){let f=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},j);n.mergeEvaluated(f)}function S(f,l){return()=>{let g=n.subschema({keyword:f},j);o.assign(x,j),n.mergeValidEvaluated(g,x),l?o.assign(l,(0,t._)`${f}`):n.setParams({ifClause:f})}}}};function c(n,o){let i=n.schema[o];return i!==void 0&&!(0,r.alwaysValidSchema)(n,i)}e.default=s}),Ms=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=pe(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:a,parentSchema:s,it:c}){s.if===void 0&&(0,t.checkStrictMode)(c,`"${a}" without "if" is ignored`)}};e.default=r}),qs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Hr(),r=Es(),a=Wr(),s=Ps(),c=Ns(),n=js(),o=xs(),i=Yr(),d=Os(),v=Cs(),b=Ts(),x=Is(),j=Rs(),E=As(),S=Ds(),f=Ms();function l(g=!1){let p=[b.default,x.default,j.default,E.default,S.default,f.default,o.default,i.default,n.default,d.default,v.default];return g?p.push(r.default,s.default):p.push(t.default,a.default),p.push(c.default),p}e.default=l}),Vs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r={message:({schemaCode:s})=>(0,t.str)`must match format "${s}"`,params:({schemaCode:s})=>(0,t._)`{format: ${s}}`},a={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:r,code(s,c){let{gen:n,data:o,$data:i,schema:d,schemaCode:v,it:b}=s,{opts:x,errSchemaPath:j,schemaEnv:E,self:S}=b;if(!x.validateFormats)return;i?f():l();function f(){let g=n.scopeValue("formats",{ref:S.formats,code:x.code.formats}),p=n.const("fDef",(0,t._)`${g}[${v}]`),y=n.let("fType"),$=n.let("format");n.if((0,t._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,()=>n.assign(y,(0,t._)`${p}.type || "string"`).assign($,(0,t._)`${p}.validate`),()=>n.assign(y,(0,t._)`"string"`).assign($,p)),s.fail$data((0,t.or)(m(),h()));function m(){return x.strictSchema===!1?t.nil:(0,t._)`${v} && !${$}`}function h(){let k=E.$async?(0,t._)`(${p}.async ? await ${$}(${o}) : ${$}(${o}))`:(0,t._)`${$}(${o})`,T=(0,t._)`(typeof ${$} == "function" ? ${k} : ${$}.test(${o}))`;return(0,t._)`${$} && ${$} !== true && ${y} === ${c} && !${T}`}}function l(){let g=S.formats[d];if(!g){m();return}if(g===!0)return;let[p,y,$]=h(g);p===c&&s.pass(k());function m(){if(x.strictSchema===!1){S.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${d}" ignored in schema at path "${j}"`}}function h(T){let M=T instanceof RegExp?(0,t.regexpCode)(T):x.code.formats?(0,t._)`${x.code.formats}${(0,t.getProperty)(d)}`:void 0,D=n.scopeValue("formats",{key:d,ref:T,code:M});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,t._)`${D}.validate`]:["string",T,D]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!E.$async)throw new Error("async format in sync schema");return(0,t._)`await ${$}(${o})`}return typeof y=="function"?(0,t._)`${$}(${o})`:(0,t._)`${$}.test(${o})`}}}};e.default=a}),zs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Vs(),r=[t.default];e.default=r}),Fs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),Us=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ps(),r=Ss(),a=qs(),s=zs(),c=Fs(),n=[t.default,r.default,(0,a.default)(),s.default,c.metadataVocabulary,c.contentVocabulary];e.default=n}),Zs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0;var t;(function(r){r.Tag="tag",r.Mapping="mapping"})(t||(e.DiscrError=t={}))}),Ls=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=oe(),r=Zs(),a=vr(),s=Wt(),c=pe(),n={message:({params:{discrError:i,tagName:d}})=>i===r.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:i,tag:d,tagName:v}})=>(0,t._)`{error: ${i}, tag: ${v}, tagValue: ${d}}`},o={keyword:"discriminator",type:"object",schemaType:"object",error:n,code(i){let{gen:d,data:v,schema:b,parentSchema:x,it:j}=i,{oneOf:E}=x;if(!j.opts.discriminator)throw new Error("discriminator: requires discriminator option");let S=b.propertyName;if(typeof S!="string")throw new Error("discriminator: requires propertyName");if(b.mapping)throw new Error("discriminator: mapping is not supported");if(!E)throw new Error("discriminator: requires oneOf keyword");let f=d.let("valid",!1),l=d.const("tag",(0,t._)`${v}${(0,t.getProperty)(S)}`);d.if((0,t._)`typeof ${l} == "string"`,()=>g(),()=>i.error(!1,{discrError:r.DiscrError.Tag,tag:l,tagName:S})),i.ok(f);function g(){let $=y();d.if(!1);for(let m in $)d.elseIf((0,t._)`${l} === ${m}`),d.assign(f,p($[m]));d.else(),i.error(!1,{discrError:r.DiscrError.Mapping,tag:l,tagName:S}),d.endIf()}function p($){let m=d.name("valid"),h=i.subschema({keyword:"oneOf",schemaProp:$},m);return i.mergeEvaluated(h,t.Name),m}function y(){var $;let m={},h=T(x),k=!0;for(let q=0;q<E.length;q++){let F=E[q];if(F?.$ref&&!(0,c.schemaHasRulesButRef)(F,j.self.RULES)){let W=F.$ref;if(F=a.resolveRef.call(j.self,j.schemaEnv.root,j.baseId,W),F instanceof a.SchemaEnv&&(F=F.schema),F===void 0)throw new s.default(j.opts.uriResolver,j.baseId,W)}let U=($=F?.properties)===null||$===void 0?void 0:$[S];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${S}"`);k=k&&(h||T(F)),M(U,q)}if(!k)throw new Error(`discriminator: "${S}" must be required`);return m;function T({required:q}){return Array.isArray(q)&&q.includes(S)}function M(q,F){if(q.const)D(q.const,F);else if(q.enum)for(let U of q.enum)D(U,F);else throw new Error(`discriminator: "properties/${S}" must have "const" or "enum"`)}function D(q,F){if(typeof q!="string"||q in m)throw new Error(`discriminator: "${S}" values must be unique strings`);m[q]=F}}}};e.default=o}),Ks=z((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),Bs=z((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;var r=ds(),a=Us(),s=Ls(),c=Ks(),n=["/properties"],o="http://json-schema.org/draft-07/schema",i=class extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(j=>this.addVocabulary(j)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let j=this.opts.$data?this.$dataMetaSchema(c,n):c;this.addMetaSchema(j,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}};e.Ajv=i,t.exports=e=i,t.exports.Ajv=i,Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var d=Ht();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var v=oe();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});var b=gr();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return b.default}});var x=Wt();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return x.default}})}),Gs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(D,q){return{validate:D,compare:q}}e.fullFormats={date:t(c,n),time:t(i(!0),d),"date-time":t(x(!0),j),"iso-time":t(i(),v),"iso-date-time":t(x(),E),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:l,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:M,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:p,int32:{type:"number",validate:m},int64:{type:"number",validate:h},float:{type:"number",validate:k},double:{type:"number",validate:k},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,j),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,v),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,E),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(D){return D%4===0&&(D%100!==0||D%400===0)}var a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function c(D){let q=a.exec(D);if(!q)return!1;let F=+q[1],U=+q[2],W=+q[3];return U>=1&&U<=12&&W>=1&&W<=(U===2&&r(F)?29:s[U])}function n(D,q){if(D&&q)return D>q?1:D<q?-1:0}var o=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function i(D){return function(q){let F=o.exec(q);if(!F)return!1;let U=+F[1],W=+F[2],ue=+F[3],ve=F[4],_e=F[5]==="-"?-1:1,ee=+(F[6]||0),P=+(F[7]||0);if(ee>23||P>59||D&&!ve)return!1;if(U<=23&&W<=59&&ue<60)return!0;let I=W-P*_e,A=U-ee*_e-(I<0?1:0);return(A===23||A===-1)&&(I===59||I===-1)&&ue<61}}function d(D,q){if(!(D&&q))return;let F=new Date("2020-01-01T"+D).valueOf(),U=new Date("2020-01-01T"+q).valueOf();if(F&&U)return F-U}function v(D,q){if(!(D&&q))return;let F=o.exec(D),U=o.exec(q);if(F&&U)return D=F[1]+F[2]+F[3],q=U[1]+U[2]+U[3],D>q?1:D<q?-1:0}var b=/t|\s/i;function x(D){let q=i(D);return function(F){let U=F.split(b);return U.length===2&&c(U[0])&&q(U[1])}}function j(D,q){if(!(D&&q))return;let F=new Date(D).valueOf(),U=new Date(q).valueOf();if(F&&U)return F-U}function E(D,q){if(!(D&&q))return;let[F,U]=D.split(b),[W,ue]=q.split(b),ve=n(F,W);if(ve!==void 0)return ve||d(U,ue)}var S=/\/|:/,f=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function l(D){return S.test(D)&&f.test(D)}var g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function p(D){return g.lastIndex=0,g.test(D)}var y=-(2**31),$=2**31-1;function m(D){return Number.isInteger(D)&&D<=$&&D>=y}function h(D){return Number.isInteger(D)}function k(){return!0}var T=/[^\\]\\Z/;function M(D){if(T.test(D))return!1;try{return new RegExp(D),!0}catch{return!1}}}),Rt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=class{};e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var r=class extends t{constructor(l){if(super(),!e.IDENTIFIER.test(l))throw new Error("CodeGen: name must be a valid identifier");this.str=l}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};e.Name=r;var a=class extends t{constructor(l){super(),this._items=typeof l=="string"?[l]:l}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let l=this._items[0];return l===""||l==='""'}get str(){var l;return(l=this._str)!==null&&l!==void 0?l:this._str=this._items.reduce((g,p)=>`${g}${p}`,"")}get names(){var l;return(l=this._names)!==null&&l!==void 0?l:this._names=this._items.reduce((g,p)=>(p instanceof r&&(g[p.str]=(g[p.str]||0)+1),g),{})}};e._Code=a,e.nil=new a("");function s(l,...g){let p=[l[0]],y=0;for(;y<g.length;)o(p,g[y]),p.push(l[++y]);return new a(p)}e._=s;var c=new a("+");function n(l,...g){let p=[j(l[0])],y=0;for(;y<g.length;)p.push(c),o(p,g[y]),p.push(c,j(l[++y]));return i(p),new a(p)}e.str=n;function o(l,g){g instanceof a?l.push(...g._items):g instanceof r?l.push(g):l.push(b(g))}e.addCodeArg=o;function i(l){let g=1;for(;g<l.length-1;){if(l[g]===c){let p=d(l[g-1],l[g+1]);if(p!==void 0){l.splice(g-1,3,p);continue}l[g++]="+"}g++}}function d(l,g){if(g==='""')return l;if(l==='""')return g;if(typeof l=="string")return g instanceof r||l[l.length-1]!=='"'?void 0:typeof g!="string"?`${l.slice(0,-1)}${g}"`:g[0]==='"'?l.slice(0,-1)+g.slice(1):void 0;if(typeof g=="string"&&g[0]==='"'&&!(l instanceof r))return`"${l}${g.slice(1)}`}function v(l,g){return g.emptyStr()?l:l.emptyStr()?g:n`${l}${g}`}e.strConcat=v;function b(l){return typeof l=="number"||typeof l=="boolean"||l===null?l:j(Array.isArray(l)?l.join(","):l)}function x(l){return new a(j(l))}e.stringify=x;function j(l){return JSON.stringify(l).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=j;function E(l){return typeof l=="string"&&e.IDENTIFIER.test(l)?new a(`.${l}`):s`[${l}]`}e.getProperty=E;function S(l){if(typeof l=="string"&&e.IDENTIFIER.test(l))return new a(`${l}`);throw new Error(`CodeGen: invalid export name: ${l}, use explicit $id name mapping`)}e.getEsmExportName=S;function f(l){return new a(l.toString())}e.regexpCode=f}),Ar=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t=Rt(),r=class extends Error{constructor(i){super(`CodeGen: "code" for ${i} not defined`),this.value=i.value}},a;(function(i){i[i.Started=0]="Started",i[i.Completed=1]="Completed"})(a||(e.UsedValueState=a={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};var s=class{constructor({prefixes:i,parent:d}={}){this._names={},this._prefixes=i,this._parent=d}toName(i){return i instanceof t.Name?i:this.name(i)}name(i){return new t.Name(this._newName(i))}_newName(i){let d=this._names[i]||this._nameGroup(i);return`${i}${d.index++}`}_nameGroup(i){var d,v;if(!((v=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||v===void 0)&&v.has(i)||this._prefixes&&!this._prefixes.has(i))throw new Error(`CodeGen: prefix "${i}" is not allowed in this scope`);return this._names[i]={prefix:i,index:0}}};e.Scope=s;var c=class extends t.Name{constructor(i,d){super(d),this.prefix=i}setValue(i,{property:d,itemIndex:v}){this.value=i,this.scopePath=(0,t._)`.${new t.Name(d)}[${v}]`}};e.ValueScopeName=c;var n=(0,t._)`\n`,o=class extends s{constructor(i){super(i),this._values={},this._scope=i.scope,this.opts={...i,_n:i.lines?n:t.nil}}get(){return this._scope}name(i){return new c(i,this._newName(i))}value(i,d){var v;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let b=this.toName(i),{prefix:x}=b,j=(v=d.key)!==null&&v!==void 0?v:d.ref,E=this._values[x];if(E){let l=E.get(j);if(l)return l}else E=this._values[x]=new Map;E.set(j,b);let S=this._scope[x]||(this._scope[x]=[]),f=S.length;return S[f]=d.ref,b.setValue(d,{property:x,itemIndex:f}),b}getValue(i,d){let v=this._values[i];if(v)return v.get(d)}scopeRefs(i,d=this._values){return this._reduceValues(d,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${i}${v.scopePath}`})}scopeCode(i=this._values,d,v){return this._reduceValues(i,b=>{if(b.value===void 0)throw new Error(`CodeGen: name "${b}" has no value`);return b.value.code},d,v)}_reduceValues(i,d,v={},b){let x=t.nil;for(let j in i){let E=i[j];if(!E)continue;let S=v[j]=v[j]||new Map;E.forEach(f=>{if(S.has(f))return;S.set(f,a.Started);let l=d(f);if(l){let g=this.opts.es5?e.varKinds.var:e.varKinds.const;x=(0,t._)`${x}${g} ${f} = ${l};${this.opts._n}`}else if(l=b?.(f))x=(0,t._)`${x}${l}${this.opts._n}`;else throw new r(f);S.set(f,a.Completed)})}return x}};e.ValueScope=o}),ne=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=Rt(),r=Ar(),a=Rt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var s=Ar();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var c=class{optimizeNodes(){return this}optimizeNames(u,w){return this}},n=class extends c{constructor(u,w,O){super(),this.varKind=u,this.name=w,this.rhs=O}render({es5:u,_n:w}){let O=u?r.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${O} ${this.name}${V};`+w}optimizeNames(u,w){if(u[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,u,w)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}},o=class extends c{constructor(u,w,O){super(),this.lhs=u,this.rhs=w,this.sideEffects=O}render({_n:u}){return`${this.lhs} = ${this.rhs};`+u}optimizeNames(u,w){if(!(this.lhs instanceof t.Name&&!u[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,u,w),this}get names(){let u=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(u,this.rhs)}},i=class extends o{constructor(u,w,O,V){super(u,O,V),this.op=w}render({_n:u}){return`${this.lhs} ${this.op}= ${this.rhs};`+u}},d=class extends c{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`${this.label}:`+u}},v=class extends c{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`break${this.label?` ${this.label}`:""};`+u}},b=class extends c{constructor(u){super(),this.error=u}render({_n:u}){return`throw ${this.error};`+u}get names(){return this.error.names}},x=class extends c{constructor(u){super(),this.code=u}render({_n:u}){return`${this.code};`+u}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(u,w){return this.code=U(this.code,u,w),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}},j=class extends c{constructor(u=[]){super(),this.nodes=u}render(u){return this.nodes.reduce((w,O)=>w+O.render(u),"")}optimizeNodes(){let{nodes:u}=this,w=u.length;for(;w--;){let O=u[w].optimizeNodes();Array.isArray(O)?u.splice(w,1,...O):O?u[w]=O:u.splice(w,1)}return u.length>0?this:void 0}optimizeNames(u,w){let{nodes:O}=this,V=O.length;for(;V--;){let K=O[V];K.optimizeNames(u,w)||(W(u,K.names),O.splice(V,1))}return O.length>0?this:void 0}get names(){return this.nodes.reduce((u,w)=>q(u,w.names),{})}},E=class extends j{render(u){return"{"+u._n+super.render(u)+"}"+u._n}},S=class extends j{},f=class extends E{};f.kind="else";var l=class xt extends E{constructor(w,O){super(O),this.condition=w}render(w){let O=`if(${this.condition})`+super.render(w);return this.else&&(O+="else "+this.else.render(w)),O}optimizeNodes(){super.optimizeNodes();let w=this.condition;if(w===!0)return this.nodes;let O=this.else;if(O){let V=O.optimizeNodes();O=this.else=Array.isArray(V)?new f(V):V}if(O)return w===!1?O instanceof xt?O:O.nodes:this.nodes.length?this:new xt(ue(w),O instanceof xt?[O]:O.nodes);if(!(w===!1||!this.nodes.length))return this}optimizeNames(w,O){var V;if(this.else=(V=this.else)===null||V===void 0?void 0:V.optimizeNames(w,O),!!(super.optimizeNames(w,O)||this.else))return this.condition=U(this.condition,w,O),this}get names(){let w=super.names;return F(w,this.condition),this.else&&q(w,this.else.names),w}};l.kind="if";var g=class extends E{};g.kind="for";var p=class extends g{constructor(u){super(),this.iteration=u}render(u){return`for(${this.iteration})`+super.render(u)}optimizeNames(u,w){if(super.optimizeNames(u,w))return this.iteration=U(this.iteration,u,w),this}get names(){return q(super.names,this.iteration.names)}},y=class extends g{constructor(u,w,O,V){super(),this.varKind=u,this.name=w,this.from=O,this.to=V}render(u){let w=u.es5?r.varKinds.var:this.varKind,{name:O,from:V,to:K}=this;return`for(${w} ${O}=${V}; ${O}<${K}; ${O}++)`+super.render(u)}get names(){let u=F(super.names,this.from);return F(u,this.to)}},$=class extends g{constructor(u,w,O,V){super(),this.loop=u,this.varKind=w,this.name=O,this.iterable=V}render(u){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(u)}optimizeNames(u,w){if(super.optimizeNames(u,w))return this.iterable=U(this.iterable,u,w),this}get names(){return q(super.names,this.iterable.names)}},m=class extends E{constructor(u,w,O){super(),this.name=u,this.args=w,this.async=O}render(u){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(u)}};m.kind="func";var h=class extends j{render(u){return"return "+super.render(u)}};h.kind="return";var k=class extends E{render(u){let w="try"+super.render(u);return this.catch&&(w+=this.catch.render(u)),this.finally&&(w+=this.finally.render(u)),w}optimizeNodes(){var u,w;return super.optimizeNodes(),(u=this.catch)===null||u===void 0||u.optimizeNodes(),(w=this.finally)===null||w===void 0||w.optimizeNodes(),this}optimizeNames(u,w){var O,V;return super.optimizeNames(u,w),(O=this.catch)===null||O===void 0||O.optimizeNames(u,w),(V=this.finally)===null||V===void 0||V.optimizeNames(u,w),this}get names(){let u=super.names;return this.catch&&q(u,this.catch.names),this.finally&&q(u,this.finally.names),u}},T=class extends E{constructor(u){super(),this.error=u}render(u){return`catch(${this.error})`+super.render(u)}};T.kind="catch";var M=class extends E{render(u){return"finally"+super.render(u)}};M.kind="finally";var D=class{constructor(u,w={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...w,_n:w.lines?`
`:""},this._extScope=u,this._scope=new r.Scope({parent:u}),this._nodes=[new S]}toString(){return this._root.render(this.opts)}name(u){return this._scope.name(u)}scopeName(u){return this._extScope.name(u)}scopeValue(u,w){let O=this._extScope.value(u,w);return(this._values[O.prefix]||(this._values[O.prefix]=new Set)).add(O),O}getScopeValue(u,w){return this._extScope.getValue(u,w)}scopeRefs(u){return this._extScope.scopeRefs(u,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(u,w,O,V){let K=this._scope.toName(w);return O!==void 0&&V&&(this._constants[K.str]=O),this._leafNode(new n(u,K,O)),K}const(u,w,O){return this._def(r.varKinds.const,u,w,O)}let(u,w,O){return this._def(r.varKinds.let,u,w,O)}var(u,w,O){return this._def(r.varKinds.var,u,w,O)}assign(u,w,O){return this._leafNode(new o(u,w,O))}add(u,w){return this._leafNode(new i(u,e.operators.ADD,w))}code(u){return typeof u=="function"?u():u!==t.nil&&this._leafNode(new x(u)),this}object(...u){let w=["{"];for(let[O,V]of u)w.length>1&&w.push(","),w.push(O),(O!==V||this.opts.es5)&&(w.push(":"),(0,t.addCodeArg)(w,V));return w.push("}"),new t._Code(w)}if(u,w,O){if(this._blockNode(new l(u)),w&&O)this.code(w).else().code(O).endIf();else if(w)this.code(w).endIf();else if(O)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(u){return this._elseNode(new l(u))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(l,f)}_for(u,w){return this._blockNode(u),w&&this.code(w).endFor(),this}for(u,w){return this._for(new p(u),w)}forRange(u,w,O,V,K=this.opts.es5?r.varKinds.var:r.varKinds.let){let Y=this._scope.toName(u);return this._for(new y(K,Y,w,O),()=>V(Y))}forOf(u,w,O,V=r.varKinds.const){let K=this._scope.toName(u);if(this.opts.es5){let Y=w instanceof t.Name?w:this.var("_arr",w);return this.forRange("_i",0,(0,t._)`${Y}.length`,B=>{this.var(K,(0,t._)`${Y}[${B}]`),O(K)})}return this._for(new $("of",V,K,w),()=>O(K))}forIn(u,w,O,V=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(u,(0,t._)`Object.keys(${w})`,O);let K=this._scope.toName(u);return this._for(new $("in",V,K,w),()=>O(K))}endFor(){return this._endBlockNode(g)}label(u){return this._leafNode(new d(u))}break(u){return this._leafNode(new v(u))}return(u){let w=new h;if(this._blockNode(w),this.code(u),w.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(h)}try(u,w,O){if(!w&&!O)throw new Error('CodeGen: "try" without "catch" and "finally"');let V=new k;if(this._blockNode(V),this.code(u),w){let K=this.name("e");this._currNode=V.catch=new T(K),w(K)}return O&&(this._currNode=V.finally=new M,this.code(O)),this._endBlockNode(T,M)}throw(u){return this._leafNode(new b(u))}block(u,w){return this._blockStarts.push(this._nodes.length),u&&this.code(u).endBlock(w),this}endBlock(u){let w=this._blockStarts.pop();if(w===void 0)throw new Error("CodeGen: not in self-balancing block");let O=this._nodes.length-w;if(O<0||u!==void 0&&O!==u)throw new Error(`CodeGen: wrong number of nodes: ${O} vs ${u} expected`);return this._nodes.length=w,this}func(u,w=t.nil,O,V){return this._blockNode(new m(u,w,O)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(u=1){for(;u-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(u){return this._currNode.nodes.push(u),this}_blockNode(u){this._currNode.nodes.push(u),this._nodes.push(u)}_endBlockNode(u,w){let O=this._currNode;if(O instanceof u||w&&O instanceof w)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${w?`${u.kind}/${w.kind}`:u.kind}"`)}_elseNode(u){let w=this._currNode;if(!(w instanceof l))throw new Error('CodeGen: "else" without "if"');return this._currNode=w.else=u,this}get _root(){return this._nodes[0]}get _currNode(){let u=this._nodes;return u[u.length-1]}set _currNode(u){let w=this._nodes;w[w.length-1]=u}};e.CodeGen=D;function q(u,w){for(let O in w)u[O]=(u[O]||0)+(w[O]||0);return u}function F(u,w){return w instanceof t._CodeOrName?q(u,w.names):u}function U(u,w,O){if(u instanceof t.Name)return V(u);if(!K(u))return u;return new t._Code(u._items.reduce((Y,B)=>(B instanceof t.Name&&(B=V(B)),B instanceof t._Code?Y.push(...B._items):Y.push(B),Y),[]));function V(Y){let B=O[Y.str];return B===void 0||w[Y.str]!==1?Y:(delete w[Y.str],B)}function K(Y){return Y instanceof t._Code&&Y._items.some(B=>B instanceof t.Name&&w[B.str]===1&&O[B.str]!==void 0)}}function W(u,w){for(let O in w)u[O]=(u[O]||0)-(w[O]||0)}function ue(u){return typeof u=="boolean"||typeof u=="number"||u===null?!u:(0,t._)`!${A(u)}`}e.not=ue;var ve=I(e.operators.AND);function _e(...u){return u.reduce(ve)}e.and=_e;var ee=I(e.operators.OR);function P(...u){return u.reduce(ee)}e.or=P;function I(u){return(w,O)=>w===t.nil?O:O===t.nil?w:(0,t._)`${A(w)} ${u} ${A(O)}`}function A(u){return u instanceof t.Name?u:(0,t._)`(${u})`}}),he=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;var t=ne(),r=Rt();function a(m){let h={};for(let k of m)h[k]=!0;return h}e.toHash=a;function s(m,h){return typeof h=="boolean"?h:Object.keys(h).length===0?!0:(c(m,h),!n(h,m.self.RULES.all))}e.alwaysValidSchema=s;function c(m,h=m.schema){let{opts:k,self:T}=m;if(!k.strictSchema||typeof h=="boolean")return;let M=T.RULES.keywords;for(let D in h)M[D]||$(m,`unknown keyword: "${D}"`)}e.checkUnknownRules=c;function n(m,h){if(typeof m=="boolean")return!m;for(let k in m)if(h[k])return!0;return!1}e.schemaHasRules=n;function o(m,h){if(typeof m=="boolean")return!m;for(let k in m)if(k!=="$ref"&&h.all[k])return!0;return!1}e.schemaHasRulesButRef=o;function i({topSchemaRef:m,schemaPath:h},k,T,M){if(!M){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,t._)`${k}`}return(0,t._)`${m}${h}${(0,t.getProperty)(T)}`}e.schemaRefOrVal=i;function d(m){return x(decodeURIComponent(m))}e.unescapeFragment=d;function v(m){return encodeURIComponent(b(m))}e.escapeFragment=v;function b(m){return typeof m=="number"?`${m}`:m.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=b;function x(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=x;function j(m,h){if(Array.isArray(m))for(let k of m)h(k);else h(m)}e.eachItem=j;function E({mergeNames:m,mergeToName:h,mergeValues:k,resultToName:T}){return(M,D,q,F)=>{let U=q===void 0?D:q instanceof t.Name?(D instanceof t.Name?m(M,D,q):h(M,D,q),q):D instanceof t.Name?(h(M,q,D),D):k(D,q);return F===t.Name&&!(U instanceof t.Name)?T(M,U):U}}e.mergeEvaluated={props:E({mergeNames:(m,h,k)=>m.if((0,t._)`${k} !== true && ${h} !== undefined`,()=>{m.if((0,t._)`${h} === true`,()=>m.assign(k,!0),()=>m.assign(k,(0,t._)`${k} || {}`).code((0,t._)`Object.assign(${k}, ${h})`))}),mergeToName:(m,h,k)=>m.if((0,t._)`${k} !== true`,()=>{h===!0?m.assign(k,!0):(m.assign(k,(0,t._)`${k} || {}`),f(m,k,h))}),mergeValues:(m,h)=>m===!0?!0:{...m,...h},resultToName:S}),items:E({mergeNames:(m,h,k)=>m.if((0,t._)`${k} !== true && ${h} !== undefined`,()=>m.assign(k,(0,t._)`${h} === true ? true : ${k} > ${h} ? ${k} : ${h}`)),mergeToName:(m,h,k)=>m.if((0,t._)`${k} !== true`,()=>m.assign(k,h===!0?!0:(0,t._)`${k} > ${h} ? ${k} : ${h}`)),mergeValues:(m,h)=>m===!0?!0:Math.max(m,h),resultToName:(m,h)=>m.var("items",h)})};function S(m,h){if(h===!0)return m.var("props",!0);let k=m.var("props",(0,t._)`{}`);return h!==void 0&&f(m,k,h),k}e.evaluatedPropsToName=S;function f(m,h,k){Object.keys(k).forEach(T=>m.assign((0,t._)`${h}${(0,t.getProperty)(T)}`,!0))}e.setEvaluated=f;var l={};function g(m,h){return m.scopeValue("func",{ref:h,code:l[h.code]||(l[h.code]=new r._Code(h.code))})}e.useFunc=g;var p;(function(m){m[m.Num=0]="Num",m[m.Str=1]="Str"})(p||(e.Type=p={}));function y(m,h,k){if(m instanceof t.Name){let T=h===p.Num;return k?T?(0,t._)`"[" + ${m} + "]"`:(0,t._)`"['" + ${m} + "']"`:T?(0,t._)`"/" + ${m}`:(0,t._)`"/" + ${m}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,t.getProperty)(m).toString():"/"+b(m)}e.getErrorPath=y;function $(m,h,k=m.opts.strictSchema){if(k){if(h=`strict mode: ${h}`,k===!0)throw new Error(h);m.self.logger.warn(h)}}e.checkStrictMode=$}),Be=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};e.default=r}),Yt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=ne(),r=he(),a=Be();e.keywordError={message:({keyword:f})=>(0,t.str)`must pass "${f}" keyword validation`},e.keyword$DataError={message:({keyword:f,schemaType:l})=>l?(0,t.str)`"${f}" keyword must be ${l} ($data)`:(0,t.str)`"${f}" keyword is invalid ($data)`};function s(f,l=e.keywordError,g,p){let{it:y}=f,{gen:$,compositeRule:m,allErrors:h}=y,k=b(f,l,g);p??(m||h)?i($,k):d(y,(0,t._)`[${k}]`)}e.reportError=s;function c(f,l=e.keywordError,g){let{it:p}=f,{gen:y,compositeRule:$,allErrors:m}=p,h=b(f,l,g);i(y,h),$||m||d(p,a.default.vErrors)}e.reportExtraError=c;function n(f,l){f.assign(a.default.errors,l),f.if((0,t._)`${a.default.vErrors} !== null`,()=>f.if(l,()=>f.assign((0,t._)`${a.default.vErrors}.length`,l),()=>f.assign(a.default.vErrors,null)))}e.resetErrorsCount=n;function o({gen:f,keyword:l,schemaValue:g,data:p,errsCount:y,it:$}){if(y===void 0)throw new Error("ajv implementation error");let m=f.name("err");f.forRange("i",y,a.default.errors,h=>{f.const(m,(0,t._)`${a.default.vErrors}[${h}]`),f.if((0,t._)`${m}.instancePath === undefined`,()=>f.assign((0,t._)`${m}.instancePath`,(0,t.strConcat)(a.default.instancePath,$.errorPath))),f.assign((0,t._)`${m}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${l}`),$.opts.verbose&&(f.assign((0,t._)`${m}.schema`,g),f.assign((0,t._)`${m}.data`,p))})}e.extendErrors=o;function i(f,l){let g=f.const("err",l);f.if((0,t._)`${a.default.vErrors} === null`,()=>f.assign(a.default.vErrors,(0,t._)`[${g}]`),(0,t._)`${a.default.vErrors}.push(${g})`),f.code((0,t._)`${a.default.errors}++`)}function d(f,l){let{gen:g,validateName:p,schemaEnv:y}=f;y.$async?g.throw((0,t._)`new ${f.ValidationError}(${l})`):(g.assign((0,t._)`${p}.errors`,l),g.return(!1))}var v={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function b(f,l,g){let{createErrors:p}=f.it;return p===!1?(0,t._)`{}`:x(f,l,g)}function x(f,l,g={}){let{gen:p,it:y}=f,$=[j(y,g),E(f,g)];return S(f,l,$),p.object(...$)}function j({errorPath:f},{instancePath:l}){let g=l?(0,t.str)`${f}${(0,r.getErrorPath)(l,r.Type.Str)}`:f;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,g)]}function E({keyword:f,it:{errSchemaPath:l}},{schemaPath:g,parentSchema:p}){let y=p?l:(0,t.str)`${l}/${f}`;return g&&(y=(0,t.str)`${y}${(0,r.getErrorPath)(g,r.Type.Str)}`),[v.schemaPath,y]}function S(f,{params:l,message:g},p){let{keyword:y,data:$,schemaValue:m,it:h}=f,{opts:k,propertyName:T,topSchemaRef:M,schemaPath:D}=h;p.push([v.keyword,y],[v.params,typeof l=="function"?l(f):l||(0,t._)`{}`]),k.messages&&p.push([v.message,typeof g=="function"?g(f):g]),k.verbose&&p.push([v.schema,m],[v.parentSchema,(0,t._)`${M}${D}`],[a.default.data,$]),T&&p.push([v.propertyName,T])}}),Js=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;var t=Yt(),r=ne(),a=Be(),s={message:"boolean schema is false"};function c(i){let{gen:d,schema:v,validateName:b}=i;v===!1?o(i,!1):typeof v=="object"&&v.$async===!0?d.return(a.default.data):(d.assign((0,r._)`${b}.errors`,null),d.return(!0))}e.topBoolOrEmptySchema=c;function n(i,d){let{gen:v,schema:b}=i;b===!1?(v.var(d,!1),o(i)):v.var(d,!0)}e.boolOrEmptySchema=n;function o(i,d){let{gen:v,data:b}=i,x={gen:v,keyword:"false schema",data:b,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,t.reportError)(x,s,void 0,d)}}),Xr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;var t=["string","number","integer","boolean","null","object","array"],r=new Set(t);function a(c){return typeof c=="string"&&r.has(c)}e.isJSONType=a;function s(){let c={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...c,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},c.number,c.string,c.array,c.object],post:{rules:[]},all:{},keywords:{}}}e.getRules=s}),Qr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0;function t({schema:s,self:c},n){let o=c.RULES.types[n];return o&&o!==!0&&r(s,o)}e.schemaHasRulesForType=t;function r(s,c){return c.rules.some(n=>a(s,n))}e.shouldUseGroup=r;function a(s,c){var n;return s[c.keyword]!==void 0||((n=c.definition.implements)===null||n===void 0?void 0:n.some(o=>s[o]!==void 0))}e.shouldUseRule=a}),At=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;var t=Xr(),r=Qr(),a=Yt(),s=ne(),c=he(),n;(function(p){p[p.Correct=0]="Correct",p[p.Wrong=1]="Wrong"})(n||(e.DataType=n={}));function o(p){let y=i(p.type);if(y.includes("null")){if(p.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!y.length&&p.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');p.nullable===!0&&y.push("null")}return y}e.getSchemaTypes=o;function i(p){let y=Array.isArray(p)?p:p?[p]:[];if(y.every(t.isJSONType))return y;throw new Error("type must be JSONType or JSONType[]: "+y.join(","))}e.getJSONTypes=i;function d(p,y){let{gen:$,data:m,opts:h}=p,k=b(y,h.coerceTypes),T=y.length>0&&!(k.length===0&&y.length===1&&(0,r.schemaHasRulesForType)(p,y[0]));if(T){let M=S(y,m,h.strictNumbers,n.Wrong);$.if(M,()=>{k.length?x(p,y,k):l(p)})}return T}e.coerceAndCheckDataType=d;var v=new Set(["string","number","integer","boolean","null"]);function b(p,y){return y?p.filter($=>v.has($)||y==="array"&&$==="array"):[]}function x(p,y,$){let{gen:m,data:h,opts:k}=p,T=m.let("dataType",(0,s._)`typeof ${h}`),M=m.let("coerced",(0,s._)`undefined`);k.coerceTypes==="array"&&m.if((0,s._)`${T} == 'object' && Array.isArray(${h}) && ${h}.length == 1`,()=>m.assign(h,(0,s._)`${h}[0]`).assign(T,(0,s._)`typeof ${h}`).if(S(y,h,k.strictNumbers),()=>m.assign(M,h))),m.if((0,s._)`${M} !== undefined`);for(let q of $)(v.has(q)||q==="array"&&k.coerceTypes==="array")&&D(q);m.else(),l(p),m.endIf(),m.if((0,s._)`${M} !== undefined`,()=>{m.assign(h,M),j(p,M)});function D(q){switch(q){case"string":m.elseIf((0,s._)`${T} == "number" || ${T} == "boolean"`).assign(M,(0,s._)`"" + ${h}`).elseIf((0,s._)`${h} === null`).assign(M,(0,s._)`""`);return;case"number":m.elseIf((0,s._)`${T} == "boolean" || ${h} === null
              || (${T} == "string" && ${h} && ${h} == +${h})`).assign(M,(0,s._)`+${h}`);return;case"integer":m.elseIf((0,s._)`${T} === "boolean" || ${h} === null
              || (${T} === "string" && ${h} && ${h} == +${h} && !(${h} % 1))`).assign(M,(0,s._)`+${h}`);return;case"boolean":m.elseIf((0,s._)`${h} === "false" || ${h} === 0 || ${h} === null`).assign(M,!1).elseIf((0,s._)`${h} === "true" || ${h} === 1`).assign(M,!0);return;case"null":m.elseIf((0,s._)`${h} === "" || ${h} === 0 || ${h} === false`),m.assign(M,null);return;case"array":m.elseIf((0,s._)`${T} === "string" || ${T} === "number"
              || ${T} === "boolean" || ${h} === null`).assign(M,(0,s._)`[${h}]`)}}}function j({gen:p,parentData:y,parentDataProperty:$},m){p.if((0,s._)`${y} !== undefined`,()=>p.assign((0,s._)`${y}[${$}]`,m))}function E(p,y,$,m=n.Correct){let h=m===n.Correct?s.operators.EQ:s.operators.NEQ,k;switch(p){case"null":return(0,s._)`${y} ${h} null`;case"array":k=(0,s._)`Array.isArray(${y})`;break;case"object":k=(0,s._)`${y} && typeof ${y} == "object" && !Array.isArray(${y})`;break;case"integer":k=T((0,s._)`!(${y} % 1) && !isNaN(${y})`);break;case"number":k=T();break;default:return(0,s._)`typeof ${y} ${h} ${p}`}return m===n.Correct?k:(0,s.not)(k);function T(M=s.nil){return(0,s.and)((0,s._)`typeof ${y} == "number"`,M,$?(0,s._)`isFinite(${y})`:s.nil)}}e.checkDataType=E;function S(p,y,$,m){if(p.length===1)return E(p[0],y,$,m);let h,k=(0,c.toHash)(p);if(k.array&&k.object){let T=(0,s._)`typeof ${y} != "object"`;h=k.null?T:(0,s._)`!${y} || ${T}`,delete k.null,delete k.array,delete k.object}else h=s.nil;k.number&&delete k.integer;for(let T in k)h=(0,s.and)(h,E(T,y,$,m));return h}e.checkDataTypes=S;var f={message:({schema:p})=>`must be ${p}`,params:({schema:p,schemaValue:y})=>typeof p=="string"?(0,s._)`{type: ${p}}`:(0,s._)`{type: ${y}}`};function l(p){let y=g(p);(0,a.reportError)(y,f)}e.reportTypeError=l;function g(p){let{gen:y,data:$,schema:m}=p,h=(0,c.schemaRefOrVal)(p,m,"type");return{gen:y,keyword:"type",data:$,schema:m.type,schemaCode:h,schemaValue:h,parentSchema:m,params:{},it:p}}}),Hs=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;var t=ne(),r=he();function a(c,n){let{properties:o,items:i}=c.schema;if(n==="object"&&o)for(let d in o)s(c,d,o[d].default);else n==="array"&&Array.isArray(i)&&i.forEach((d,v)=>s(c,v,d.default))}e.assignDefaults=a;function s(c,n,o){let{gen:i,compositeRule:d,data:v,opts:b}=c;if(o===void 0)return;let x=(0,t._)`${v}${(0,t.getProperty)(n)}`;if(d){(0,r.checkStrictMode)(c,`default is ignored for: ${x}`);return}let j=(0,t._)`${x} === undefined`;b.useDefaults==="empty"&&(j=(0,t._)`${j} || ${x} === null || ${x} === ""`),i.if(j,(0,t._)`${x} = ${(0,t.stringify)(o)}`)}}),Ae=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateUnion=e.validateArray=e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.isOwnProperty=e.hasPropFunc=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;var t=ne(),r=he(),a=Be(),s=he();function c(p,y){let{gen:$,data:m,it:h}=p;$.if(b($,m,y,h.opts.ownProperties),()=>{p.setParams({missingProperty:(0,t._)`${y}`},!0),p.error()})}e.checkReportMissingProp=c;function n({gen:p,data:y,it:{opts:$}},m,h){return(0,t.or)(...m.map(k=>(0,t.and)(b(p,y,k,$.ownProperties),(0,t._)`${h} = ${k}`)))}e.checkMissingProp=n;function o(p,y){p.setParams({missingProperty:y},!0),p.error()}e.reportMissingProp=o;function i(p){return p.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}e.hasPropFunc=i;function d(p,y,$){return(0,t._)`${i(p)}.call(${y}, ${$})`}e.isOwnProperty=d;function v(p,y,$,m){let h=(0,t._)`${y}${(0,t.getProperty)($)} !== undefined`;return m?(0,t._)`${h} && ${d(p,y,$)}`:h}e.propertyInData=v;function b(p,y,$,m){let h=(0,t._)`${y}${(0,t.getProperty)($)} === undefined`;return m?(0,t.or)(h,(0,t.not)(d(p,y,$))):h}e.noPropertyInData=b;function x(p){return p?Object.keys(p).filter(y=>y!=="__proto__"):[]}e.allSchemaProperties=x;function j(p,y){return x(y).filter($=>!(0,r.alwaysValidSchema)(p,y[$]))}e.schemaProperties=j;function E({schemaCode:p,data:y,it:{gen:$,topSchemaRef:m,schemaPath:h,errorPath:k},it:T},M,D,q){let F=q?(0,t._)`${p}, ${y}, ${m}${h}`:y,U=[[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,k)],[a.default.parentData,T.parentData],[a.default.parentDataProperty,T.parentDataProperty],[a.default.rootData,a.default.rootData]];T.opts.dynamicRef&&U.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);let W=(0,t._)`${F}, ${$.object(...U)}`;return D!==t.nil?(0,t._)`${M}.call(${D}, ${W})`:(0,t._)`${M}(${W})`}e.callValidateCode=E;var S=(0,t._)`new RegExp`;function f({gen:p,it:{opts:y}},$){let m=y.unicodeRegExp?"u":"",{regExp:h}=y.code,k=h($,m);return p.scopeValue("pattern",{key:k.toString(),ref:k,code:(0,t._)`${h.code==="new RegExp"?S:(0,s.useFunc)(p,h)}(${$}, ${m})`})}e.usePattern=f;function l(p){let{gen:y,data:$,keyword:m,it:h}=p,k=y.name("valid");if(h.allErrors){let M=y.let("valid",!0);return T(()=>y.assign(M,!1)),M}return y.var(k,!0),T(()=>y.break()),k;function T(M){let D=y.const("len",(0,t._)`${$}.length`);y.forRange("i",0,D,q=>{p.subschema({keyword:m,dataProp:q,dataPropType:r.Type.Num},k),y.if((0,t.not)(k),M)})}}e.validateArray=l;function g(p){let{gen:y,schema:$,keyword:m,it:h}=p;if(!Array.isArray($))throw new Error("ajv implementation error");if($.some(M=>(0,r.alwaysValidSchema)(h,M))&&!h.opts.unevaluated)return;let k=y.let("valid",!1),T=y.name("_valid");y.block(()=>$.forEach((M,D)=>{let q=p.subschema({keyword:m,schemaProp:D,compositeRule:!0},T);y.assign(k,(0,t._)`${k} || ${T}`),p.mergeValidEvaluated(q,T)||y.if((0,t.not)(k))})),p.result(k,()=>p.reset(),()=>p.error(!0))}e.validateUnion=g}),Ws=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateKeywordUsage=e.validSchemaType=e.funcKeywordCode=e.macroKeywordCode=void 0;var t=ne(),r=Be(),a=Ae(),s=Yt();function c(j,E){let{gen:S,keyword:f,schema:l,parentSchema:g,it:p}=j,y=E.macro.call(p.self,l,g,p),$=v(S,f,y);p.opts.validateSchema!==!1&&p.self.validateSchema(y,!0);let m=S.name("valid");j.subschema({schema:y,schemaPath:t.nil,errSchemaPath:`${p.errSchemaPath}/${f}`,topSchemaRef:$,compositeRule:!0},m),j.pass(m,()=>j.error(!0))}e.macroKeywordCode=c;function n(j,E){var S;let{gen:f,keyword:l,schema:g,parentSchema:p,$data:y,it:$}=j;d($,E);let m=!y&&E.compile?E.compile.call($.self,g,p,$):E.validate,h=v(f,l,m),k=f.let("valid");j.block$data(k,T),j.ok((S=E.valid)!==null&&S!==void 0?S:k);function T(){if(E.errors===!1)q(),E.modifying&&o(j),F(()=>j.error());else{let U=E.async?M():D();E.modifying&&o(j),F(()=>i(j,U))}}function M(){let U=f.let("ruleErrs",null);return f.try(()=>q((0,t._)`await `),W=>f.assign(k,!1).if((0,t._)`${W} instanceof ${$.ValidationError}`,()=>f.assign(U,(0,t._)`${W}.errors`),()=>f.throw(W))),U}function D(){let U=(0,t._)`${h}.errors`;return f.assign(U,null),q(t.nil),U}function q(U=E.async?(0,t._)`await `:t.nil){let W=$.opts.passContext?r.default.this:r.default.self,ue=!("compile"in E&&!y||E.schema===!1);f.assign(k,(0,t._)`${U}${(0,a.callValidateCode)(j,h,W,ue)}`,E.modifying)}function F(U){var W;f.if((0,t.not)((W=E.valid)!==null&&W!==void 0?W:k),U)}}e.funcKeywordCode=n;function o(j){let{gen:E,data:S,it:f}=j;E.if(f.parentData,()=>E.assign(S,(0,t._)`${f.parentData}[${f.parentDataProperty}]`))}function i(j,E){let{gen:S}=j;S.if((0,t._)`Array.isArray(${E})`,()=>{S.assign(r.default.vErrors,(0,t._)`${r.default.vErrors} === null ? ${E} : ${r.default.vErrors}.concat(${E})`).assign(r.default.errors,(0,t._)`${r.default.vErrors}.length`),(0,s.extendErrors)(j)},()=>j.error())}function d({schemaEnv:j},E){if(E.async&&!j.$async)throw new Error("async keyword in sync schema")}function v(j,E,S){if(S===void 0)throw new Error(`keyword "${E}" failed to compile`);return j.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,t.stringify)(S)})}function b(j,E,S=!1){return!E.length||E.some(f=>f==="array"?Array.isArray(j):f==="object"?j&&typeof j=="object"&&!Array.isArray(j):typeof j==f||S&&typeof j>"u")}e.validSchemaType=b;function x({schema:j,opts:E,self:S,errSchemaPath:f},l,g){if(Array.isArray(l.keyword)?!l.keyword.includes(g):l.keyword!==g)throw new Error("ajv implementation error");let p=l.dependencies;if(p?.some(y=>!Object.prototype.hasOwnProperty.call(j,y)))throw new Error(`parent schema must have dependencies of ${g}: ${p.join(",")}`);if(l.validateSchema&&!l.validateSchema(j[g])){let y=`keyword "${g}" value is invalid at path "${f}": `+S.errorsText(l.validateSchema.errors);if(E.validateSchema==="log")S.logger.error(y);else throw new Error(y)}}e.validateKeywordUsage=x}),Ys=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendSubschemaMode=e.extendSubschemaData=e.getSubschema=void 0;var t=ne(),r=he();function a(n,{keyword:o,schemaProp:i,schema:d,schemaPath:v,errSchemaPath:b,topSchemaRef:x}){if(o!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){let j=n.schema[o];return i===void 0?{schema:j,schemaPath:(0,t._)`${n.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${n.errSchemaPath}/${o}`}:{schema:j[i],schemaPath:(0,t._)`${n.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(i)}`,errSchemaPath:`${n.errSchemaPath}/${o}/${(0,r.escapeFragment)(i)}`}}if(d!==void 0){if(v===void 0||b===void 0||x===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:v,topSchemaRef:x,errSchemaPath:b}}throw new Error('either "keyword" or "schema" must be passed')}e.getSubschema=a;function s(n,o,{dataProp:i,dataPropType:d,data:v,dataTypes:b,propertyName:x}){if(v!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:j}=o;if(i!==void 0){let{errorPath:S,dataPathArr:f,opts:l}=o,g=j.let("data",(0,t._)`${o.data}${(0,t.getProperty)(i)}`,!0);E(g),n.errorPath=(0,t.str)`${S}${(0,r.getErrorPath)(i,d,l.jsPropertySyntax)}`,n.parentDataProperty=(0,t._)`${i}`,n.dataPathArr=[...f,n.parentDataProperty]}if(v!==void 0){let S=v instanceof t.Name?v:j.let("data",v,!0);E(S),x!==void 0&&(n.propertyName=x)}b&&(n.dataTypes=b);function E(S){n.data=S,n.dataLevel=o.dataLevel+1,n.dataTypes=[],o.definedProperties=new Set,n.parentData=o.data,n.dataNames=[...o.dataNames,S]}}e.extendSubschemaData=s;function c(n,{jtdDiscriminator:o,jtdMetadata:i,compositeRule:d,createErrors:v,allErrors:b}){d!==void 0&&(n.compositeRule=d),v!==void 0&&(n.createErrors=v),b!==void 0&&(n.allErrors=b),n.jtdDiscriminator=o,n.jtdMetadata=i}e.extendSubschemaMode=c}),Xs=z((e,t)=>{"use strict";var r=t.exports=function(c,n,o){typeof n=="function"&&(o=n,n={}),o=n.cb||o;var i=typeof o=="function"?o:o.pre||function(){},d=o.post||function(){};a(n,i,d,c,"",c)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function a(c,n,o,i,d,v,b,x,j,E){if(i&&typeof i=="object"&&!Array.isArray(i)){n(i,d,v,b,x,j,E);for(var S in i){var f=i[S];if(Array.isArray(f)){if(S in r.arrayKeywords)for(var l=0;l<f.length;l++)a(c,n,o,f[l],d+"/"+S+"/"+l,v,d,S,i,l)}else if(S in r.propsKeywords){if(f&&typeof f=="object")for(var g in f)a(c,n,o,f[g],d+"/"+S+"/"+s(g),v,d,S,i,g)}else(S in r.keywords||c.allKeys&&!(S in r.skipKeywords))&&a(c,n,o,f,d+"/"+S,v,d,S,i)}o(i,d,v,b,x,j,E)}}function s(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}}),Xt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;var t=he(),r=Gt(),a=Xs(),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function c(f,l=!0){return typeof f=="boolean"?!0:l===!0?!o(f):l?i(f)<=l:!1}e.inlineRef=c;var n=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(f){for(let l in f){if(n.has(l))return!0;let g=f[l];if(Array.isArray(g)&&g.some(o)||typeof g=="object"&&o(g))return!0}return!1}function i(f){let l=0;for(let g in f)if(g==="$ref"||(l++,!s.has(g)&&(typeof f[g]=="object"&&(0,t.eachItem)(f[g],p=>l+=i(p)),l===1/0)))return 1/0;return l}function d(f,l="",g){g!==!1&&(l=x(l));let p=f.parse(l);return v(f,p)}e.getFullPath=d;function v(f,l){return f.serialize(l).split("#")[0]+"#"}e._getFullPath=v;var b=/#\/?$/;function x(f){return f?f.replace(b,""):""}e.normalizeId=x;function j(f,l,g){return g=x(g),f.resolve(l,g)}e.resolveUrl=j;var E=/^[a-z_][-a-z0-9._]*$/i;function S(f,l){if(typeof f=="boolean")return{};let{schemaId:g,uriResolver:p}=this.opts,y=x(f[g]||l),$={"":y},m=d(p,y,!1),h={},k=new Set;return a(f,{allKeys:!0},(D,q,F,U)=>{if(U===void 0)return;let W=m+q,ue=$[U];typeof D[g]=="string"&&(ue=ve.call(this,D[g])),_e.call(this,D.$anchor),_e.call(this,D.$dynamicAnchor),$[q]=ue;function ve(ee){let P=this.opts.uriResolver.resolve;if(ee=x(ue?P(ue,ee):ee),k.has(ee))throw M(ee);k.add(ee);let I=this.refs[ee];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?T(D,I.schema,ee):ee!==x(W)&&(ee[0]==="#"?(T(D,h[ee],ee),h[ee]=D):this.refs[ee]=W),ee}function _e(ee){if(typeof ee=="string"){if(!E.test(ee))throw new Error(`invalid anchor "${ee}"`);ve.call(this,`#${ee}`)}}}),h;function T(D,q,F){if(q!==void 0&&!r(D,q))throw M(F)}function M(D){return new Error(`reference "${D}" resolves to more than one schema`)}}e.getSchemaRefs=S}),Qt=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.KeywordCxt=e.validateFunctionCode=void 0;var t=Js(),r=At(),a=Qr(),s=At(),c=Hs(),n=Ws(),o=Ys(),i=ne(),d=Be(),v=Xt(),b=he(),x=Yt();function j(_){if(m(_)&&(k(_),$(_))){l(_);return}E(_,()=>(0,t.topBoolOrEmptySchema)(_))}e.validateFunctionCode=j;function E({gen:_,validateName:C,schema:R,schemaEnv:Z,opts:L},J){L.code.es5?_.func(C,(0,i._)`${d.default.data}, ${d.default.valCxt}`,Z.$async,()=>{_.code((0,i._)`"use strict"; ${p(R,L)}`),f(_,L),_.code(J)}):_.func(C,(0,i._)`${d.default.data}, ${S(L)}`,Z.$async,()=>_.code(p(R,L)).code(J))}function S(_){return(0,i._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${_.dynamicRef?(0,i._)`, ${d.default.dynamicAnchors}={}`:i.nil}}={}`}function f(_,C){_.if(d.default.valCxt,()=>{_.var(d.default.instancePath,(0,i._)`${d.default.valCxt}.${d.default.instancePath}`),_.var(d.default.parentData,(0,i._)`${d.default.valCxt}.${d.default.parentData}`),_.var(d.default.parentDataProperty,(0,i._)`${d.default.valCxt}.${d.default.parentDataProperty}`),_.var(d.default.rootData,(0,i._)`${d.default.valCxt}.${d.default.rootData}`),C.dynamicRef&&_.var(d.default.dynamicAnchors,(0,i._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{_.var(d.default.instancePath,(0,i._)`""`),_.var(d.default.parentData,(0,i._)`undefined`),_.var(d.default.parentDataProperty,(0,i._)`undefined`),_.var(d.default.rootData,d.default.data),C.dynamicRef&&_.var(d.default.dynamicAnchors,(0,i._)`{}`)})}function l(_){let{schema:C,opts:R,gen:Z}=_;E(_,()=>{R.$comment&&C.$comment&&U(_),D(_),Z.let(d.default.vErrors,null),Z.let(d.default.errors,0),R.unevaluated&&g(_),T(_),W(_)})}function g(_){let{gen:C,validateName:R}=_;_.evaluated=C.const("evaluated",(0,i._)`${R}.evaluated`),C.if((0,i._)`${_.evaluated}.dynamicProps`,()=>C.assign((0,i._)`${_.evaluated}.props`,(0,i._)`undefined`)),C.if((0,i._)`${_.evaluated}.dynamicItems`,()=>C.assign((0,i._)`${_.evaluated}.items`,(0,i._)`undefined`))}function p(_,C){let R=typeof _=="object"&&_[C.schemaId];return R&&(C.code.source||C.code.process)?(0,i._)`/*# sourceURL=${R} */`:i.nil}function y(_,C){if(m(_)&&(k(_),$(_))){h(_,C);return}(0,t.boolOrEmptySchema)(_,C)}function $({schema:_,self:C}){if(typeof _=="boolean")return!_;for(let R in _)if(C.RULES.all[R])return!0;return!1}function m(_){return typeof _.schema!="boolean"}function h(_,C){let{schema:R,gen:Z,opts:L}=_;L.$comment&&R.$comment&&U(_),q(_),F(_);let J=Z.const("_errs",d.default.errors);T(_,J),Z.var(C,(0,i._)`${J} === ${d.default.errors}`)}function k(_){(0,b.checkUnknownRules)(_),M(_)}function T(_,C){if(_.opts.jtd)return ve(_,[],!1,C);let R=(0,r.getSchemaTypes)(_.schema),Z=(0,r.coerceAndCheckDataType)(_,R);ve(_,R,!Z,C)}function M(_){let{schema:C,errSchemaPath:R,opts:Z,self:L}=_;C.$ref&&Z.ignoreKeywordsWithRef&&(0,b.schemaHasRulesButRef)(C,L.RULES)&&L.logger.warn(`$ref: keywords ignored in schema at path "${R}"`)}function D(_){let{schema:C,opts:R}=_;C.default!==void 0&&R.useDefaults&&R.strictSchema&&(0,b.checkStrictMode)(_,"default is ignored in the schema root")}function q(_){let C=_.schema[_.opts.schemaId];C&&(_.baseId=(0,v.resolveUrl)(_.opts.uriResolver,_.baseId,C))}function F(_){if(_.schema.$async&&!_.schemaEnv.$async)throw new Error("async schema in sync schema")}function U({gen:_,schemaEnv:C,schema:R,errSchemaPath:Z,opts:L}){let J=R.$comment;if(L.$comment===!0)_.code((0,i._)`${d.default.self}.logger.log(${J})`);else if(typeof L.$comment=="function"){let fe=(0,i.str)`${Z}/$comment`,ye=_.scopeValue("root",{ref:C.root});_.code((0,i._)`${d.default.self}.opts.$comment(${J}, ${fe}, ${ye}.schema)`)}}function W(_){let{gen:C,schemaEnv:R,validateName:Z,ValidationError:L,opts:J}=_;R.$async?C.if((0,i._)`${d.default.errors} === 0`,()=>C.return(d.default.data),()=>C.throw((0,i._)`new ${L}(${d.default.vErrors})`)):(C.assign((0,i._)`${Z}.errors`,d.default.vErrors),J.unevaluated&&ue(_),C.return((0,i._)`${d.default.errors} === 0`))}function ue({gen:_,evaluated:C,props:R,items:Z}){R instanceof i.Name&&_.assign((0,i._)`${C}.props`,R),Z instanceof i.Name&&_.assign((0,i._)`${C}.items`,Z)}function ve(_,C,R,Z){let{gen:L,schema:J,data:fe,allErrors:ye,opts:be,self:me}=_,{RULES:le}=me;if(J.$ref&&(be.ignoreKeywordsWithRef||!(0,b.schemaHasRulesButRef)(J,le))){L.block(()=>Y(_,"$ref",le.all.$ref.definition));return}be.jtd||ee(_,C),L.block(()=>{for(let ge of le.rules)Pe(ge);Pe(le.post)});function Pe(ge){(0,a.shouldUseGroup)(J,ge)&&(ge.type?(L.if((0,s.checkDataType)(ge.type,fe,be.strictNumbers)),_e(_,ge),C.length===1&&C[0]===ge.type&&R&&(L.else(),(0,s.reportTypeError)(_)),L.endIf()):_e(_,ge),ye||L.if((0,i._)`${d.default.errors} === ${Z||0}`))}}function _e(_,C){let{gen:R,schema:Z,opts:{useDefaults:L}}=_;L&&(0,c.assignDefaults)(_,C.type),R.block(()=>{for(let J of C.rules)(0,a.shouldUseRule)(Z,J)&&Y(_,J.keyword,J.definition,C.type)})}function ee(_,C){_.schemaEnv.meta||!_.opts.strictTypes||(P(_,C),_.opts.allowUnionTypes||I(_,C),A(_,_.dataTypes))}function P(_,C){if(C.length){if(!_.dataTypes.length){_.dataTypes=C;return}C.forEach(R=>{w(_.dataTypes,R)||V(_,`type "${R}" not allowed by context "${_.dataTypes.join(",")}"`)}),O(_,C)}}function I(_,C){C.length>1&&!(C.length===2&&C.includes("null"))&&V(_,"use allowUnionTypes to allow union type keyword")}function A(_,C){let R=_.self.RULES.all;for(let Z in R){let L=R[Z];if(typeof L=="object"&&(0,a.shouldUseRule)(_.schema,L)){let{type:J}=L.definition;J.length&&!J.some(fe=>u(C,fe))&&V(_,`missing type "${J.join(",")}" for keyword "${Z}"`)}}}function u(_,C){return _.includes(C)||C==="number"&&_.includes("integer")}function w(_,C){return _.includes(C)||C==="integer"&&_.includes("number")}function O(_,C){let R=[];for(let Z of _.dataTypes)w(C,Z)?R.push(Z):C.includes("integer")&&Z==="number"&&R.push("integer");_.dataTypes=R}function V(_,C){let R=_.schemaEnv.baseId+_.errSchemaPath;C+=` at "${R}" (strictTypes)`,(0,b.checkStrictMode)(_,C,_.opts.strictTypes)}var K=class{constructor(_,C,R){if((0,n.validateKeywordUsage)(_,C,R),this.gen=_.gen,this.allErrors=_.allErrors,this.keyword=R,this.data=_.data,this.schema=_.schema[R],this.$data=C.$data&&_.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,b.schemaRefOrVal)(_,this.schema,R,this.$data),this.schemaType=C.schemaType,this.parentSchema=_.schema,this.params={},this.it=_,this.def=C,this.$data)this.schemaCode=_.gen.const("vSchema",we(this.$data,_));else if(this.schemaCode=this.schemaValue,!(0,n.validSchemaType)(this.schema,C.schemaType,C.allowUndefined))throw new Error(`${R} value must be ${JSON.stringify(C.schemaType)}`);("code"in C?C.trackErrors:C.errors!==!1)&&(this.errsCount=_.gen.const("_errs",d.default.errors))}result(_,C,R){this.failResult((0,i.not)(_),C,R)}failResult(_,C,R){this.gen.if(_),R?R():this.error(),C?(this.gen.else(),C(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_,C){this.failResult((0,i.not)(_),void 0,C)}fail(_){if(_===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(_),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_){if(!this.$data)return this.fail(_);let{schemaCode:C}=this;this.fail((0,i._)`${C} !== undefined && (${(0,i.or)(this.invalid$data(),_)})`)}error(_,C,R){if(C){this.setParams(C),this._error(_,R),this.setParams({});return}this._error(_,R)}_error(_,C){(_?x.reportExtraError:x.reportError)(this,this.def.error,C)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(_){this.allErrors||this.gen.if(_)}setParams(_,C){C?Object.assign(this.params,_):this.params=_}block$data(_,C,R=i.nil){this.gen.block(()=>{this.check$data(_,R),C()})}check$data(_=i.nil,C=i.nil){if(!this.$data)return;let{gen:R,schemaCode:Z,schemaType:L,def:J}=this;R.if((0,i.or)((0,i._)`${Z} === undefined`,C)),_!==i.nil&&R.assign(_,!0),(L.length||J.validateSchema)&&(R.elseIf(this.invalid$data()),this.$dataError(),_!==i.nil&&R.assign(_,!1)),R.else()}invalid$data(){let{gen:_,schemaCode:C,schemaType:R,def:Z,it:L}=this;return(0,i.or)(J(),fe());function J(){if(R.length){if(!(C instanceof i.Name))throw new Error("ajv implementation error");let ye=Array.isArray(R)?R:[R];return(0,i._)`${(0,s.checkDataTypes)(ye,C,L.opts.strictNumbers,s.DataType.Wrong)}`}return i.nil}function fe(){if(Z.validateSchema){let ye=_.scopeValue("validate$data",{ref:Z.validateSchema});return(0,i._)`!${ye}(${C})`}return i.nil}}subschema(_,C){let R=(0,o.getSubschema)(this.it,_);(0,o.extendSubschemaData)(R,this.it,_),(0,o.extendSubschemaMode)(R,_);let Z={...this.it,...R,items:void 0,props:void 0};return y(Z,C),Z}mergeEvaluated(_,C){let{it:R,gen:Z}=this;R.opts.unevaluated&&(R.props!==!0&&_.props!==void 0&&(R.props=b.mergeEvaluated.props(Z,_.props,R.props,C)),R.items!==!0&&_.items!==void 0&&(R.items=b.mergeEvaluated.items(Z,_.items,R.items,C)))}mergeValidEvaluated(_,C){let{it:R,gen:Z}=this;if(R.opts.unevaluated&&(R.props!==!0||R.items!==!0))return Z.if(C,()=>this.mergeEvaluated(_,i.Name)),!0}};e.KeywordCxt=K;function Y(_,C,R,Z){let L=new K(_,R,C);"code"in R?R.code(L,Z):L.$data&&R.validate?(0,n.funcKeywordCode)(L,R):"macro"in R?(0,n.macroKeywordCode)(L,R):(R.compile||R.validate)&&(0,n.funcKeywordCode)(L,R)}var B=/^\/(?:[^~]|~0|~1)*$/,se=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function we(_,{dataLevel:C,dataNames:R,dataPathArr:Z}){let L,J;if(_==="")return d.default.rootData;if(_[0]==="/"){if(!B.test(_))throw new Error(`Invalid JSON-pointer: ${_}`);L=_,J=d.default.rootData}else{let me=se.exec(_);if(!me)throw new Error(`Invalid JSON-pointer: ${_}`);let le=+me[1];if(L=me[2],L==="#"){if(le>=C)throw new Error(be("property/index",le));return Z[C-le]}if(le>C)throw new Error(be("data",le));if(J=R[C-le],!L)return J}let fe=J,ye=L.split("/");for(let me of ye)me&&(J=(0,i._)`${J}${(0,i.getProperty)((0,b.unescapeJsonPointer)(me))}`,fe=(0,i._)`${fe} && ${J}`);return fe;function be(me,le){return`Cannot access ${me} ${le} levels up, current level is ${C}`}}e.getData=we}),$r=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=class extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}};e.default=t}),er=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Xt(),r=class extends Error{constructor(a,s,c,n){super(n||`can't resolve reference ${c} from id ${s}`),this.missingRef=(0,t.resolveUrl)(a,s,c),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(a,this.missingRef))}};e.default=r}),br=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.getCompilingSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;var t=ne(),r=$r(),a=Be(),s=Xt(),c=he(),n=Qt(),o=class{constructor(l){var g;this.refs={},this.dynamicAnchors={};let p;typeof l.schema=="object"&&(p=l.schema),this.schema=l.schema,this.schemaId=l.schemaId,this.root=l.root||this,this.baseId=(g=l.baseId)!==null&&g!==void 0?g:(0,s.normalizeId)(p?.[l.schemaId||"$id"]),this.schemaPath=l.schemaPath,this.localRefs=l.localRefs,this.meta=l.meta,this.$async=p?.$async,this.refs={}}};e.SchemaEnv=o;function i(l){let g=b.call(this,l);if(g)return g;let p=(0,s.getFullPath)(this.opts.uriResolver,l.root.baseId),{es5:y,lines:$}=this.opts.code,{ownProperties:m}=this.opts,h=new t.CodeGen(this.scope,{es5:y,lines:$,ownProperties:m}),k;l.$async&&(k=h.scopeValue("Error",{ref:r.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));let T=h.scopeName("validate");l.validateName=T;let M={gen:h,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",this.opts.code.source===!0?{ref:l.schema,code:(0,t.stringify)(l.schema)}:{ref:l.schema}),validateName:T,ValidationError:k,schema:l.schema,schemaEnv:l,rootId:p,baseId:l.baseId||p,schemaPath:t.nil,errSchemaPath:l.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this},D;try{this._compilations.add(l),(0,n.validateFunctionCode)(M),h.optimize(this.opts.code.optimize);let q=h.toString();D=`${h.scopeRefs(a.default.scope)}return ${q}`,this.opts.code.process&&(D=this.opts.code.process(D,l));let F=new Function(`${a.default.self}`,`${a.default.scope}`,D)(this,this.scope.get());if(this.scope.value(T,{ref:F}),F.errors=null,F.schema=l.schema,F.schemaEnv=l,l.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:T,validateCode:q,scopeValues:h._values}),this.opts.unevaluated){let{props:U,items:W}=M;F.evaluated={props:U instanceof t.Name?void 0:U,items:W instanceof t.Name?void 0:W,dynamicProps:U instanceof t.Name,dynamicItems:W instanceof t.Name},F.source&&(F.source.evaluated=(0,t.stringify)(F.evaluated))}return l.validate=F,l}catch(q){throw delete l.validate,delete l.validateName,D&&this.logger.error("Error compiling schema, function code:",D),q}finally{this._compilations.delete(l)}}e.compileSchema=i;function d(l,g,p){var y;p=(0,s.resolveUrl)(this.opts.uriResolver,g,p);let $=l.refs[p];if($)return $;let m=j.call(this,l,p);if(m===void 0){let h=(y=l.localRefs)===null||y===void 0?void 0:y[p],{schemaId:k}=this.opts;h&&(m=new o({schema:h,schemaId:k,root:l,baseId:g}))}if(m!==void 0)return l.refs[p]=v.call(this,m)}e.resolveRef=d;function v(l){return(0,s.inlineRef)(l.schema,this.opts.inlineRefs)?l.schema:l.validate?l:i.call(this,l)}function b(l){for(let g of this._compilations)if(x(g,l))return g}e.getCompilingSchema=b;function x(l,g){return l.schema===g.schema&&l.root===g.root&&l.baseId===g.baseId}function j(l,g){let p;for(;typeof(p=this.refs[g])=="string";)g=p;return p||this.schemas[g]||E.call(this,l,g)}function E(l,g){let p=this.opts.uriResolver.parse(g),y=(0,s._getFullPath)(this.opts.uriResolver,p),$=(0,s.getFullPath)(this.opts.uriResolver,l.baseId,void 0);if(Object.keys(l.schema).length>0&&y===$)return f.call(this,p,l);let m=(0,s.normalizeId)(y),h=this.refs[m]||this.schemas[m];if(typeof h=="string"){let k=E.call(this,l,h);return typeof k?.schema!="object"?void 0:f.call(this,p,k)}if(typeof h?.schema=="object"){if(h.validate||i.call(this,h),m===(0,s.normalizeId)(g)){let{schema:k}=h,{schemaId:T}=this.opts,M=k[T];return M&&($=(0,s.resolveUrl)(this.opts.uriResolver,$,M)),new o({schema:k,schemaId:T,root:l,baseId:$})}return f.call(this,p,h)}}e.resolveSchema=E;var S=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function f(l,{baseId:g,schema:p,root:y}){var $;if((($=l.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(let k of l.fragment.slice(1).split("/")){if(typeof p=="boolean")return;let T=p[(0,c.unescapeFragment)(k)];if(T===void 0)return;p=T;let M=typeof p=="object"&&p[this.opts.schemaId];!S.has(k)&&M&&(g=(0,s.resolveUrl)(this.opts.uriResolver,g,M))}let m;if(typeof p!="boolean"&&p.$ref&&!(0,c.schemaHasRulesButRef)(p,this.RULES)){let k=(0,s.resolveUrl)(this.opts.uriResolver,g,p.$ref);m=E.call(this,y,k)}let{schemaId:h}=this.opts;if(m=m||new o({schema:p,schemaId:h,root:y,baseId:g}),m.schema!==m.root.schema)return m}}),Qs=z((e,t)=>{t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),ei=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Jr();t.code='require("ajv/dist/runtime/uri").default',e.default=t}),ti=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Qt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=ne();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});var a=$r(),s=er(),c=Xr(),n=br(),o=ne(),i=Xt(),d=At(),v=he(),b=Qs(),x=ei(),j=(P,I)=>new RegExp(P,I);j.code="new RegExp";var E=["removeAdditional","useDefaults","coerceTypes"],S=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},l={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},g=200;function p(P){var I,A,u,w,O,V,K,Y,B,se,we,_,C,R,Z,L,J,fe,ye,be,me,le,Pe,ge,Ge;let Oe=P.strict,Je=(I=P.code)===null||I===void 0?void 0:I.optimize,it=Je===!0||Je===void 0?1:Je||0,nt=(u=(A=P.code)===null||A===void 0?void 0:A.regExp)!==null&&u!==void 0?u:j,ir=(w=P.uriResolver)!==null&&w!==void 0?w:x.default;return{strictSchema:(V=(O=P.strictSchema)!==null&&O!==void 0?O:Oe)!==null&&V!==void 0?V:!0,strictNumbers:(Y=(K=P.strictNumbers)!==null&&K!==void 0?K:Oe)!==null&&Y!==void 0?Y:!0,strictTypes:(se=(B=P.strictTypes)!==null&&B!==void 0?B:Oe)!==null&&se!==void 0?se:"log",strictTuples:(_=(we=P.strictTuples)!==null&&we!==void 0?we:Oe)!==null&&_!==void 0?_:"log",strictRequired:(R=(C=P.strictRequired)!==null&&C!==void 0?C:Oe)!==null&&R!==void 0?R:!1,code:P.code?{...P.code,optimize:it,regExp:nt}:{optimize:it,regExp:nt},loopRequired:(Z=P.loopRequired)!==null&&Z!==void 0?Z:g,loopEnum:(L=P.loopEnum)!==null&&L!==void 0?L:g,meta:(J=P.meta)!==null&&J!==void 0?J:!0,messages:(fe=P.messages)!==null&&fe!==void 0?fe:!0,inlineRefs:(ye=P.inlineRefs)!==null&&ye!==void 0?ye:!0,schemaId:(be=P.schemaId)!==null&&be!==void 0?be:"$id",addUsedSchema:(me=P.addUsedSchema)!==null&&me!==void 0?me:!0,validateSchema:(le=P.validateSchema)!==null&&le!==void 0?le:!0,validateFormats:(Pe=P.validateFormats)!==null&&Pe!==void 0?Pe:!0,unicodeRegExp:(ge=P.unicodeRegExp)!==null&&ge!==void 0?ge:!0,int32range:(Ge=P.int32range)!==null&&Ge!==void 0?Ge:!0,uriResolver:ir}}var y=class{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...p(P)};let{es5:I,lines:A}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:S,es5:I,lines:A}),this.logger=q(P.logger);let u=P.validateFormats;P.validateFormats=!1,this.RULES=(0,c.getRules)(),$.call(this,f,P,"NOT SUPPORTED"),$.call(this,l,P,"DEPRECATED","warn"),this._metaOpts=M.call(this),P.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&T.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),h.call(this),P.validateFormats=u}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:P,meta:I,schemaId:A}=this.opts,u=b;A==="id"&&(u={...b},u.id=u.$id,delete u.$id),I&&P&&this.addMetaSchema(u,u[A],!1)}defaultMeta(){let{meta:P,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[I]||P:void 0}validate(P,I){let A;if(typeof P=="string"){if(A=this.getSchema(P),!A)throw new Error(`no schema with key or ref "${P}"`)}else A=this.compile(P);let u=A(I);return"$async"in A||(this.errors=A.errors),u}compile(P,I){let A=this._addSchema(P,I);return A.validate||this._compileSchemaEnv(A)}compileAsync(P,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:A}=this.opts;return u.call(this,P,I);async function u(B,se){await w.call(this,B.$schema);let we=this._addSchema(B,se);return we.validate||O.call(this,we)}async function w(B){B&&!this.getSchema(B)&&await u.call(this,{$ref:B},!0)}async function O(B){try{return this._compileSchemaEnv(B)}catch(se){if(!(se instanceof s.default))throw se;return V.call(this,se),await K.call(this,se.missingSchema),O.call(this,B)}}function V({missingSchema:B,missingRef:se}){if(this.refs[B])throw new Error(`AnySchema ${B} is loaded but ${se} cannot be resolved`)}async function K(B){let se=await Y.call(this,B);this.refs[B]||await w.call(this,se.$schema),this.refs[B]||this.addSchema(se,B,I)}async function Y(B){let se=this._loading[B];if(se)return se;try{return await(this._loading[B]=A(B))}finally{delete this._loading[B]}}}addSchema(P,I,A,u=this.opts.validateSchema){if(Array.isArray(P)){for(let O of P)this.addSchema(O,void 0,A,u);return this}let w;if(typeof P=="object"){let{schemaId:O}=this.opts;if(w=P[O],w!==void 0&&typeof w!="string")throw new Error(`schema ${O} must be string`)}return I=(0,i.normalizeId)(I||w),this._checkUnique(I),this.schemas[I]=this._addSchema(P,A,I,u,!0),this}addMetaSchema(P,I,A=this.opts.validateSchema){return this.addSchema(P,I,!0,A),this}validateSchema(P,I){if(typeof P=="boolean")return!0;let A;if(A=P.$schema,A!==void 0&&typeof A!="string")throw new Error("$schema must be a string");if(A=A||this.opts.defaultMeta||this.defaultMeta(),!A)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let u=this.validate(A,P);if(!u&&I){let w="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(w);else throw new Error(w)}return u}getSchema(P){let I;for(;typeof(I=m.call(this,P))=="string";)P=I;if(I===void 0){let{schemaId:A}=this.opts,u=new n.SchemaEnv({schema:{},schemaId:A});if(I=n.resolveSchema.call(this,u,P),!I)return;this.refs[P]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let I=m.call(this,P);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{let I=P;this._cache.delete(I);let A=P[this.opts.schemaId];return A&&(A=(0,i.normalizeId)(A),delete this.schemas[A],delete this.refs[A]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(let I of P)this.addKeyword(I);return this}addKeyword(P,I){let A;if(typeof P=="string")A=P,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=A);else if(typeof P=="object"&&I===void 0){if(I=P,A=I.keyword,Array.isArray(A)&&!A.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,A,I),!I)return(0,v.eachItem)(A,w=>W.call(this,w)),this;ve.call(this,I);let u={...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)};return(0,v.eachItem)(A,u.type.length===0?w=>W.call(this,w,u):w=>u.type.forEach(O=>W.call(this,w,u,O))),this}getKeyword(P){let I=this.RULES.all[P];return typeof I=="object"?I.definition:!!I}removeKeyword(P){let{RULES:I}=this;delete I.keywords[P],delete I.all[P];for(let A of I.rules){let u=A.rules.findIndex(w=>w.keyword===P);u>=0&&A.rules.splice(u,1)}return this}addFormat(P,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[P]=I,this}errorsText(P=this.errors,{separator:I=", ",dataVar:A="data"}={}){return!P||P.length===0?"No errors":P.map(u=>`${A}${u.instancePath} ${u.message}`).reduce((u,w)=>u+I+w)}$dataMetaSchema(P,I){let A=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(let u of I){let w=u.split("/").slice(1),O=P;for(let V of w)O=O[V];for(let V in A){let K=A[V];if(typeof K!="object")continue;let{$data:Y}=K.definition,B=O[V];Y&&B&&(O[V]=ee(B))}}return P}_removeAllSchemas(P,I){for(let A in P){let u=P[A];(!I||I.test(A))&&(typeof u=="string"?delete P[A]:u&&!u.meta&&(this._cache.delete(u.schema),delete P[A]))}}_addSchema(P,I,A,u=this.opts.validateSchema,w=this.opts.addUsedSchema){let O,{schemaId:V}=this.opts;if(typeof P=="object")O=P[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let K=this._cache.get(P);if(K!==void 0)return K;A=(0,i.normalizeId)(O||A);let Y=i.getSchemaRefs.call(this,P,A);return K=new n.SchemaEnv({schema:P,schemaId:V,meta:I,baseId:A,localRefs:Y}),this._cache.set(K.schema,K),w&&!A.startsWith("#")&&(A&&this._checkUnique(A),this.refs[A]=K),u&&this.validateSchema(P,!0),K}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):n.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){let I=this.opts;this.opts=this._metaOpts;try{n.compileSchema.call(this,P)}finally{this.opts=I}}};y.ValidationError=a.default,y.MissingRefError=s.default,e.default=y;function $(P,I,A,u="error"){for(let w in P){let O=w;O in I&&this.logger[u](`${A}: option ${w}. ${P[O]}`)}}function m(P){return P=(0,i.normalizeId)(P),this.schemas[P]||this.refs[P]}function h(){let P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(let I in P)this.addSchema(P[I],I)}function k(){for(let P in this.opts.formats){let I=this.opts.formats[P];I&&this.addFormat(P,I)}}function T(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let I in P){let A=P[I];A.keyword||(A.keyword=I),this.addKeyword(A)}}function M(){let P={...this.opts};for(let I of E)delete P[I];return P}var D={log(){},warn(){},error(){}};function q(P){if(P===!1)return D;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}var F=/^[a-z_$][a-z0-9_$:-]*$/i;function U(P,I){let{RULES:A}=this;if((0,v.eachItem)(P,u=>{if(A.keywords[u])throw new Error(`Keyword ${u} is already defined`);if(!F.test(u))throw new Error(`Keyword ${u} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function W(P,I,A){var u;let w=I?.post;if(A&&w)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:O}=this,V=w?O.post:O.rules.find(({type:Y})=>Y===A);if(V||(V={type:A,rules:[]},O.rules.push(V)),O.keywords[P]=!0,!I)return;let K={keyword:P,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ue.call(this,V,K,I.before):V.rules.push(K),O.all[P]=K,(u=I.implements)===null||u===void 0||u.forEach(Y=>this.addKeyword(Y))}function ue(P,I,A){let u=P.rules.findIndex(w=>w.keyword===A);u>=0?P.rules.splice(u,0,I):(P.rules.push(I),this.logger.warn(`rule ${A} is not defined`))}function ve(P){let{metaSchema:I}=P;I!==void 0&&(P.$data&&this.opts.$data&&(I=ee(I)),P.validateSchema=this.compile(I,!0))}var _e={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ee(P){return{anyOf:[P,_e]}}}),ri=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=t}),ai=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;var t=er(),r=Ae(),a=ne(),s=Be(),c=br(),n=he(),o={keyword:"$ref",schemaType:"string",code(v){let{gen:b,schema:x,it:j}=v,{baseId:E,schemaEnv:S,validateName:f,opts:l,self:g}=j,{root:p}=S;if((x==="#"||x==="#/")&&E===p.baseId)return $();let y=c.resolveRef.call(g,p,E,x);if(y===void 0)throw new t.default(j.opts.uriResolver,E,x);if(y instanceof c.SchemaEnv)return m(y);return h(y);function $(){if(S===p)return d(v,f,S,S.$async);let k=b.scopeValue("root",{ref:p});return d(v,(0,a._)`${k}.validate`,p,p.$async)}function m(k){let T=i(v,k);d(v,T,k,k.$async)}function h(k){let T=b.scopeValue("schema",l.code.source===!0?{ref:k,code:(0,a.stringify)(k)}:{ref:k}),M=b.name("valid"),D=v.subschema({schema:k,dataTypes:[],schemaPath:a.nil,topSchemaRef:T,errSchemaPath:x},M);v.mergeEvaluated(D),v.ok(M)}}};function i(v,b){let{gen:x}=v;return b.validate?x.scopeValue("validate",{ref:b.validate}):(0,a._)`${x.scopeValue("wrapper",{ref:b})}.validate`}e.getValidate=i;function d(v,b,x,j){let{gen:E,it:S}=v,{allErrors:f,schemaEnv:l,opts:g}=S,p=g.passContext?s.default.this:a.nil;j?y():$();function y(){if(!l.$async)throw new Error("async schema referenced by sync schema");let k=E.let("valid");E.try(()=>{E.code((0,a._)`await ${(0,r.callValidateCode)(v,b,p)}`),h(b),f||E.assign(k,!0)},T=>{E.if((0,a._)`!(${T} instanceof ${S.ValidationError})`,()=>E.throw(T)),m(T),f||E.assign(k,!1)}),v.ok(k)}function $(){v.result((0,r.callValidateCode)(v,b,p),()=>h(b),()=>m(b))}function m(k){let T=(0,a._)`${k}.errors`;E.assign(s.default.vErrors,(0,a._)`${s.default.vErrors} === null ? ${T} : ${s.default.vErrors}.concat(${T})`),E.assign(s.default.errors,(0,a._)`${s.default.vErrors}.length`)}function h(k){var T;if(!S.opts.unevaluated)return;let M=(T=x?.validate)===null||T===void 0?void 0:T.evaluated;if(S.props!==!0)if(M&&!M.dynamicProps)M.props!==void 0&&(S.props=n.mergeEvaluated.props(E,M.props,S.props));else{let D=E.var("props",(0,a._)`${k}.evaluated.props`);S.props=n.mergeEvaluated.props(E,D,S.props,a.Name)}if(S.items!==!0)if(M&&!M.dynamicItems)M.items!==void 0&&(S.items=n.mergeEvaluated.items(E,M.items,S.items));else{let D=E.var("items",(0,a._)`${k}.evaluated.items`);S.items=n.mergeEvaluated.items(E,D,S.items,a.Name)}}}e.callRef=d,e.default=o}),si=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ri(),r=ai(),a=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,r.default];e.default=a}),ii=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=t.operators,a={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},s={message:({keyword:n,schemaCode:o})=>(0,t.str)`must be ${a[n].okStr} ${o}`,params:({keyword:n,schemaCode:o})=>(0,t._)`{comparison: ${a[n].okStr}, limit: ${o}}`},c={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:s,code(n){let{keyword:o,data:i,schemaCode:d}=n;n.fail$data((0,t._)`${i} ${a[o].fail} ${d} || isNaN(${i})`)}};e.default=c}),ni=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r={message:({schemaCode:s})=>(0,t.str)`must be multiple of ${s}`,params:({schemaCode:s})=>(0,t._)`{multipleOf: ${s}}`},a={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:r,code(s){let{gen:c,data:n,schemaCode:o,it:i}=s,d=i.opts.multipleOfPrecision,v=c.let("res"),b=d?(0,t._)`Math.abs(Math.round(${v}) - ${v}) > 1e-${d}`:(0,t._)`${v} !== parseInt(${v})`;s.fail$data((0,t._)`(${o} === 0 || (${v} = ${n}/${o}, ${b}))`)}};e.default=a}),oi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(r){let a=r.length,s=0,c=0,n;for(;c<a;)s++,n=r.charCodeAt(c++),n>=55296&&n<=56319&&c<a&&(n=r.charCodeAt(c),(n&64512)===56320&&c++);return s}e.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'}),li=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a=oi(),s={message({keyword:n,schemaCode:o}){let i=n==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${o} characters`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},c={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s,code(n){let{keyword:o,data:i,schemaCode:d,it:v}=n,b=o==="maxLength"?t.operators.GT:t.operators.LT,x=v.opts.unicode===!1?(0,t._)`${i}.length`:(0,t._)`${(0,r.useFunc)(n.gen,a.default)}(${i})`;n.fail$data((0,t._)`${x} ${b} ${d}`)}};e.default=c}),di=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ne(),a={message:({schemaCode:c})=>(0,r.str)`must match pattern "${c}"`,params:({schemaCode:c})=>(0,r._)`{pattern: ${c}}`},s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:a,code(c){let{data:n,$data:o,schema:i,schemaCode:d,it:v}=c,b=v.opts.unicodeRegExp?"u":"",x=o?(0,r._)`(new RegExp(${d}, ${b}))`:(0,t.usePattern)(c,i);c.fail$data((0,r._)`!${x}.test(${n})`)}};e.default=s}),ci=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r={message({keyword:s,schemaCode:c}){let n=s==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${n} than ${c} properties`},params:({schemaCode:s})=>(0,t._)`{limit: ${s}}`},a={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:r,code(s){let{keyword:c,data:n,schemaCode:o}=s,i=c==="maxProperties"?t.operators.GT:t.operators.LT;s.fail$data((0,t._)`Object.keys(${n}).length ${i} ${o}`)}};e.default=a}),ui=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ne(),a=he(),s={message:({params:{missingProperty:n}})=>(0,r.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,r._)`{missingProperty: ${n}}`},c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:s,code(n){let{gen:o,schema:i,schemaCode:d,data:v,$data:b,it:x}=n,{opts:j}=x;if(!b&&i.length===0)return;let E=i.length>=j.loopRequired;if(x.allErrors?S():f(),j.strictRequired){let p=n.parentSchema.properties,{definedProperties:y}=n.it;for(let $ of i)if(p?.[$]===void 0&&!y.has($)){let m=x.schemaEnv.baseId+x.errSchemaPath,h=`required property "${$}" is not defined at "${m}" (strictRequired)`;(0,a.checkStrictMode)(x,h,x.opts.strictRequired)}}function S(){if(E||b)n.block$data(r.nil,l);else for(let p of i)(0,t.checkReportMissingProp)(n,p)}function f(){let p=o.let("missing");if(E||b){let y=o.let("valid",!0);n.block$data(y,()=>g(p,y)),n.ok(y)}else o.if((0,t.checkMissingProp)(n,i,p)),(0,t.reportMissingProp)(n,p),o.else()}function l(){o.forOf("prop",d,p=>{n.setParams({missingProperty:p}),o.if((0,t.noPropertyInData)(o,v,p,j.ownProperties),()=>n.error())})}function g(p,y){n.setParams({missingProperty:p}),o.forOf(p,d,()=>{o.assign(y,(0,t.propertyInData)(o,v,p,j.ownProperties)),o.if((0,r.not)(y),()=>{n.error(),o.break()})},r.nil)}}};e.default=c}),pi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r={message({keyword:s,schemaCode:c}){let n=s==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${n} than ${c} items`},params:({schemaCode:s})=>(0,t._)`{limit: ${s}}`},a={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:r,code(s){let{keyword:c,data:n,schemaCode:o}=s,i=c==="maxItems"?t.operators.GT:t.operators.LT;s.fail$data((0,t._)`${n}.length ${i} ${o}`)}};e.default=a}),wr=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Gt();t.code='require("ajv/dist/runtime/equal").default',e.default=t}),hi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=At(),r=ne(),a=he(),s=wr(),c={message:({params:{i:o,j:i}})=>(0,r.str)`must NOT have duplicate items (items ## ${i} and ${o} are identical)`,params:({params:{i:o,j:i}})=>(0,r._)`{i: ${o}, j: ${i}}`},n={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:c,code(o){let{gen:i,data:d,$data:v,schema:b,parentSchema:x,schemaCode:j,it:E}=o;if(!v&&!b)return;let S=i.let("valid"),f=x.items?(0,t.getSchemaTypes)(x.items):[];o.block$data(S,l,(0,r._)`${j} === false`),o.ok(S);function l(){let $=i.let("i",(0,r._)`${d}.length`),m=i.let("j");o.setParams({i:$,j:m}),i.assign(S,!0),i.if((0,r._)`${$} > 1`,()=>(g()?p:y)($,m))}function g(){return f.length>0&&!f.some($=>$==="object"||$==="array")}function p($,m){let h=i.name("item"),k=(0,t.checkDataTypes)(f,h,E.opts.strictNumbers,t.DataType.Wrong),T=i.const("indices",(0,r._)`{}`);i.for((0,r._)`;${$}--;`,()=>{i.let(h,(0,r._)`${d}[${$}]`),i.if(k,(0,r._)`continue`),f.length>1&&i.if((0,r._)`typeof ${h} == "string"`,(0,r._)`${h} += "_"`),i.if((0,r._)`typeof ${T}[${h}] == "number"`,()=>{i.assign(m,(0,r._)`${T}[${h}]`),o.error(),i.assign(S,!1).break()}).code((0,r._)`${T}[${h}] = ${$}`)})}function y($,m){let h=(0,a.useFunc)(i,s.default),k=i.name("outer");i.label(k).for((0,r._)`;${$}--;`,()=>i.for((0,r._)`${m} = ${$}; ${m}--;`,()=>i.if((0,r._)`${h}(${d}[${$}], ${d}[${m}])`,()=>{o.error(),i.assign(S,!1).break(k)})))}}};e.default=n}),fi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a=wr(),s={message:"must be equal to constant",params:({schemaCode:n})=>(0,t._)`{allowedValue: ${n}}`},c={keyword:"const",$data:!0,error:s,code(n){let{gen:o,data:i,$data:d,schemaCode:v,schema:b}=n;d||b&&typeof b=="object"?n.fail$data((0,t._)`!${(0,r.useFunc)(o,a.default)}(${i}, ${v})`):n.fail((0,t._)`${b} !== ${i}`)}};e.default=c}),mi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a=wr(),s={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,t._)`{allowedValues: ${n}}`},c={keyword:"enum",schemaType:"array",$data:!0,error:s,code(n){let{gen:o,data:i,$data:d,schema:v,schemaCode:b,it:x}=n;if(!d&&v.length===0)throw new Error("enum must have non-empty array");let j=v.length>=x.opts.loopEnum,E,S=()=>E??(E=(0,r.useFunc)(o,a.default)),f;if(j||d)f=o.let("valid"),n.block$data(f,l);else{if(!Array.isArray(v))throw new Error("ajv implementation error");let p=o.const("vSchema",b);f=(0,t.or)(...v.map((y,$)=>g(p,$)))}n.pass(f);function l(){o.assign(f,!1),o.forOf("v",b,p=>o.if((0,t._)`${S()}(${i}, ${p})`,()=>o.assign(f,!0).break()))}function g(p,y){let $=v[y];return typeof $=="object"&&$!==null?(0,t._)`${S()}(${i}, ${p}[${y}])`:(0,t._)`${i} === ${$}`}}};e.default=c}),yi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ii(),r=ni(),a=li(),s=di(),c=ci(),n=ui(),o=pi(),i=hi(),d=fi(),v=mi(),b=[t.default,r.default,a.default,s.default,c.default,n.default,o.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,v.default];e.default=b}),ea=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAdditionalItems=void 0;var t=ne(),r=he(),a={message:({params:{len:n}})=>(0,t.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,t._)`{limit: ${n}}`},s={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:a,code(n){let{parentSchema:o,it:i}=n,{items:d}=o;if(!Array.isArray(d)){(0,r.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}c(n,d)}};function c(n,o){let{gen:i,schema:d,data:v,keyword:b,it:x}=n;x.items=!0;let j=i.const("len",(0,t._)`${v}.length`);if(d===!1)n.setParams({len:o.length}),n.pass((0,t._)`${j} <= ${o.length}`);else if(typeof d=="object"&&!(0,r.alwaysValidSchema)(x,d)){let S=i.var("valid",(0,t._)`${j} <= ${o.length}`);i.if((0,t.not)(S),()=>E(S)),n.ok(S)}function E(S){i.forRange("i",o.length,j,f=>{n.subschema({keyword:b,dataProp:f,dataPropType:r.Type.Num},S),x.allErrors||i.if((0,t.not)(S),()=>i.break())})}}e.validateAdditionalItems=c,e.default=s}),ta=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateTuple=void 0;var t=ne(),r=he(),a=Ae(),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){let{schema:o,it:i}=n;if(Array.isArray(o))return c(n,"additionalItems",o);i.items=!0,!(0,r.alwaysValidSchema)(i,o)&&n.ok((0,a.validateArray)(n))}};function c(n,o,i=n.schema){let{gen:d,parentSchema:v,data:b,keyword:x,it:j}=n;f(v),j.opts.unevaluated&&i.length&&j.items!==!0&&(j.items=r.mergeEvaluated.items(d,i.length,j.items));let E=d.name("valid"),S=d.const("len",(0,t._)`${b}.length`);i.forEach((l,g)=>{(0,r.alwaysValidSchema)(j,l)||(d.if((0,t._)`${S} > ${g}`,()=>n.subschema({keyword:x,schemaProp:g,dataProp:g},E)),n.ok(E))});function f(l){let{opts:g,errSchemaPath:p}=j,y=i.length,$=y===l.minItems&&(y===l.maxItems||l[o]===!1);if(g.strictTuples&&!$){let m=`"${x}" is ${y}-tuple, but minItems or maxItems/${o} are not specified or different at path "${p}"`;(0,r.checkStrictMode)(j,m,g.strictTuples)}}}e.validateTuple=c,e.default=s}),gi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ta(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:a=>(0,t.validateTuple)(a,"items")};e.default=r}),vi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a=Ae(),s=ea(),c={message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},n={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:c,code(o){let{schema:i,parentSchema:d,it:v}=o,{prefixItems:b}=d;v.items=!0,!(0,r.alwaysValidSchema)(v,i)&&(b?(0,s.validateAdditionalItems)(o,b):o.ok((0,a.validateArray)(o)))}};e.default=n}),_i=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a={message:({params:{min:c,max:n}})=>n===void 0?(0,t.str)`must contain at least ${c} valid item(s)`:(0,t.str)`must contain at least ${c} and no more than ${n} valid item(s)`,params:({params:{min:c,max:n}})=>n===void 0?(0,t._)`{minContains: ${c}}`:(0,t._)`{minContains: ${c}, maxContains: ${n}}`},s={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:a,code(c){let{gen:n,schema:o,parentSchema:i,data:d,it:v}=c,b,x,{minContains:j,maxContains:E}=i;v.opts.next?(b=j===void 0?1:j,x=E):b=1;let S=n.const("len",(0,t._)`${d}.length`);if(c.setParams({min:b,max:x}),x===void 0&&b===0){(0,r.checkStrictMode)(v,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(x!==void 0&&b>x){(0,r.checkStrictMode)(v,'"minContains" > "maxContains" is always invalid'),c.fail();return}if((0,r.alwaysValidSchema)(v,o)){let y=(0,t._)`${S} >= ${b}`;x!==void 0&&(y=(0,t._)`${y} && ${S} <= ${x}`),c.pass(y);return}v.items=!0;let f=n.name("valid");x===void 0&&b===1?g(f,()=>n.if(f,()=>n.break())):b===0?(n.let(f,!0),x!==void 0&&n.if((0,t._)`${d}.length > 0`,l)):(n.let(f,!1),l()),c.result(f,()=>c.reset());function l(){let y=n.name("_valid"),$=n.let("count",0);g(y,()=>n.if(y,()=>p($)))}function g(y,$){n.forRange("i",0,S,m=>{c.subschema({keyword:"contains",dataProp:m,dataPropType:r.Type.Num,compositeRule:!0},y),$()})}function p(y){n.code((0,t._)`${y}++`),x===void 0?n.if((0,t._)`${y} >= ${b}`,()=>n.assign(f,!0).break()):(n.if((0,t._)`${y} > ${x}`,()=>n.assign(f,!1).break()),b===1?n.assign(f,!0):n.if((0,t._)`${y} >= ${b}`,()=>n.assign(f,!0)))}}};e.default=s}),$i=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=ne(),r=he(),a=Ae();e.error={message:({params:{property:i,depsCount:d,deps:v}})=>{let b=d===1?"property":"properties";return(0,t.str)`must have ${b} ${v} when property ${i} is present`},params:({params:{property:i,depsCount:d,deps:v,missingProperty:b}})=>(0,t._)`{property: ${i},
    missingProperty: ${b},
    depsCount: ${d},
    deps: ${v}}`};var s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(i){let[d,v]=c(i);n(i,d),o(i,v)}};function c({schema:i}){let d={},v={};for(let b in i){if(b==="__proto__")continue;let x=Array.isArray(i[b])?d:v;x[b]=i[b]}return[d,v]}function n(i,d=i.schema){let{gen:v,data:b,it:x}=i;if(Object.keys(d).length===0)return;let j=v.let("missing");for(let E in d){let S=d[E];if(S.length===0)continue;let f=(0,a.propertyInData)(v,b,E,x.opts.ownProperties);i.setParams({property:E,depsCount:S.length,deps:S.join(", ")}),x.allErrors?v.if(f,()=>{for(let l of S)(0,a.checkReportMissingProp)(i,l)}):(v.if((0,t._)`${f} && (${(0,a.checkMissingProp)(i,S,j)})`),(0,a.reportMissingProp)(i,j),v.else())}}e.validatePropertyDeps=n;function o(i,d=i.schema){let{gen:v,data:b,keyword:x,it:j}=i,E=v.name("valid");for(let S in d)(0,r.alwaysValidSchema)(j,d[S])||(v.if((0,a.propertyInData)(v,b,S,j.opts.ownProperties),()=>{let f=i.subschema({keyword:x,schemaProp:S},E);i.mergeValidEvaluated(f,E)},()=>v.var(E,!0)),i.ok(E))}e.validateSchemaDeps=o,e.default=s}),bi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a={message:"property name must be valid",params:({params:c})=>(0,t._)`{propertyName: ${c.propertyName}}`},s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:a,code(c){let{gen:n,schema:o,data:i,it:d}=c;if((0,r.alwaysValidSchema)(d,o))return;let v=n.name("valid");n.forIn("key",i,b=>{c.setParams({propertyName:b}),c.subschema({keyword:"propertyNames",data:b,dataTypes:["string"],propertyName:b,compositeRule:!0},v),n.if((0,t.not)(v),()=>{c.error(!0),d.allErrors||n.break()})}),c.ok(v)}};e.default=s}),ra=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ne(),a=Be(),s=he(),c={message:"must NOT have additional properties",params:({params:o})=>(0,r._)`{additionalProperty: ${o.additionalProperty}}`},n={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:c,code(o){let{gen:i,schema:d,parentSchema:v,data:b,errsCount:x,it:j}=o;if(!x)throw new Error("ajv implementation error");let{allErrors:E,opts:S}=j;if(j.props=!0,S.removeAdditional!=="all"&&(0,s.alwaysValidSchema)(j,d))return;let f=(0,t.allSchemaProperties)(v.properties),l=(0,t.allSchemaProperties)(v.patternProperties);g(),o.ok((0,r._)`${x} === ${a.default.errors}`);function g(){i.forIn("key",b,h=>{!f.length&&!l.length?$(h):i.if(p(h),()=>$(h))})}function p(h){let k;if(f.length>8){let T=(0,s.schemaRefOrVal)(j,v.properties,"properties");k=(0,t.isOwnProperty)(i,T,h)}else f.length?k=(0,r.or)(...f.map(T=>(0,r._)`${h} === ${T}`)):k=r.nil;return l.length&&(k=(0,r.or)(k,...l.map(T=>(0,r._)`${(0,t.usePattern)(o,T)}.test(${h})`))),(0,r.not)(k)}function y(h){i.code((0,r._)`delete ${b}[${h}]`)}function $(h){if(S.removeAdditional==="all"||S.removeAdditional&&d===!1){y(h);return}if(d===!1){o.setParams({additionalProperty:h}),o.error(),E||i.break();return}if(typeof d=="object"&&!(0,s.alwaysValidSchema)(j,d)){let k=i.name("valid");S.removeAdditional==="failing"?(m(h,k,!1),i.if((0,r.not)(k),()=>{o.reset(),y(h)})):(m(h,k),E||i.if((0,r.not)(k),()=>i.break()))}}function m(h,k,T){let M={keyword:"additionalProperties",dataProp:h,dataPropType:s.Type.Str};T===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(M,k)}}};e.default=n}),wi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Qt(),r=Ae(),a=he(),s=ra(),c={keyword:"properties",type:"object",schemaType:"object",code(n){let{gen:o,schema:i,parentSchema:d,data:v,it:b}=n;b.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&s.default.code(new t.KeywordCxt(b,s.default,"additionalProperties"));let x=(0,r.allSchemaProperties)(i);for(let l of x)b.definedProperties.add(l);b.opts.unevaluated&&x.length&&b.props!==!0&&(b.props=a.mergeEvaluated.props(o,(0,a.toHash)(x),b.props));let j=x.filter(l=>!(0,a.alwaysValidSchema)(b,i[l]));if(j.length===0)return;let E=o.name("valid");for(let l of j)S(l)?f(l):(o.if((0,r.propertyInData)(o,v,l,b.opts.ownProperties)),f(l),b.allErrors||o.else().var(E,!0),o.endIf()),n.it.definedProperties.add(l),n.ok(E);function S(l){return b.opts.useDefaults&&!b.compositeRule&&i[l].default!==void 0}function f(l){n.subschema({keyword:"properties",schemaProp:l,dataProp:l},E)}}};e.default=c}),ki=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ne(),a=he(),s=he(),c={keyword:"patternProperties",type:"object",schemaType:"object",code(n){let{gen:o,schema:i,data:d,parentSchema:v,it:b}=n,{opts:x}=b,j=(0,t.allSchemaProperties)(i),E=j.filter($=>(0,a.alwaysValidSchema)(b,i[$]));if(j.length===0||E.length===j.length&&(!b.opts.unevaluated||b.props===!0))return;let S=x.strictSchema&&!x.allowMatchingProperties&&v.properties,f=o.name("valid");b.props!==!0&&!(b.props instanceof r.Name)&&(b.props=(0,s.evaluatedPropsToName)(o,b.props));let{props:l}=b;g();function g(){for(let $ of j)S&&p($),b.allErrors?y($):(o.var(f,!0),y($),o.if(f))}function p($){for(let m in S)new RegExp($).test(m)&&(0,a.checkStrictMode)(b,`property ${m} matches pattern ${$} (use allowMatchingProperties)`)}function y($){o.forIn("key",d,m=>{o.if((0,r._)`${(0,t.usePattern)(n,$)}.test(${m})`,()=>{let h=E.includes($);h||n.subschema({keyword:"patternProperties",schemaProp:$,dataProp:m,dataPropType:s.Type.Str},f),b.opts.unevaluated&&l!==!0?o.assign((0,r._)`${l}[${m}]`,!0):!h&&!b.allErrors&&o.if((0,r.not)(f),()=>o.break())})})}}};e.default=c}),Si=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=he(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(a){let{gen:s,schema:c,it:n}=a;if((0,t.alwaysValidSchema)(n,c)){a.fail();return}let o=s.name("valid");a.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),a.failResult(o,()=>a.reset(),()=>a.error())},error:{message:"must NOT be valid"}};e.default=r}),Ei=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:t.validateUnion,error:{message:"must match a schema in anyOf"}};e.default=r}),Pi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a={message:"must match exactly one schema in oneOf",params:({params:c})=>(0,t._)`{passingSchemas: ${c.passing}}`},s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:a,code(c){let{gen:n,schema:o,parentSchema:i,it:d}=c;if(!Array.isArray(o))throw new Error("ajv implementation error");if(d.opts.discriminator&&i.discriminator)return;let v=o,b=n.let("valid",!1),x=n.let("passing",null),j=n.name("_valid");c.setParams({passing:x}),n.block(E),c.result(b,()=>c.reset(),()=>c.error(!0));function E(){v.forEach((S,f)=>{let l;(0,r.alwaysValidSchema)(d,S)?n.var(j,!0):l=c.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},j),f>0&&n.if((0,t._)`${j} && ${b}`).assign(b,!1).assign(x,(0,t._)`[${x}, ${f}]`).else(),n.if(j,()=>{n.assign(b,!0),n.assign(x,f),l&&c.mergeEvaluated(l,t.Name)})})}}};e.default=s}),Ni=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=he(),r={keyword:"allOf",schemaType:"array",code(a){let{gen:s,schema:c,it:n}=a;if(!Array.isArray(c))throw new Error("ajv implementation error");let o=s.name("valid");c.forEach((i,d)=>{if((0,t.alwaysValidSchema)(n,i))return;let v=a.subschema({keyword:"allOf",schemaProp:d},o);a.ok(o),a.mergeEvaluated(v)})}};e.default=r}),ji=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=he(),a={message:({params:n})=>(0,t.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,t._)`{failingKeyword: ${n.ifClause}}`},s={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:a,code(n){let{gen:o,parentSchema:i,it:d}=n;i.then===void 0&&i.else===void 0&&(0,r.checkStrictMode)(d,'"if" without "then" and "else" is ignored');let v=c(d,"then"),b=c(d,"else");if(!v&&!b)return;let x=o.let("valid",!0),j=o.name("_valid");if(E(),n.reset(),v&&b){let f=o.let("ifClause");n.setParams({ifClause:f}),o.if(j,S("then",f),S("else",f))}else v?o.if(j,S("then")):o.if((0,t.not)(j),S("else"));n.pass(x,()=>n.error(!0));function E(){let f=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},j);n.mergeEvaluated(f)}function S(f,l){return()=>{let g=n.subschema({keyword:f},j);o.assign(x,j),n.mergeValidEvaluated(g,x),l?o.assign(l,(0,t._)`${f}`):n.setParams({ifClause:f})}}}};function c(n,o){let i=n.schema[o];return i!==void 0&&!(0,r.alwaysValidSchema)(n,i)}e.default=s}),xi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=he(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:a,parentSchema:s,it:c}){s.if===void 0&&(0,t.checkStrictMode)(c,`"${a}" without "if" is ignored`)}};e.default=r}),Oi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ea(),r=gi(),a=ta(),s=vi(),c=_i(),n=$i(),o=bi(),i=ra(),d=wi(),v=ki(),b=Si(),x=Ei(),j=Pi(),E=Ni(),S=ji(),f=xi();function l(g=!1){let p=[b.default,x.default,j.default,E.default,S.default,f.default,o.default,i.default,n.default,d.default,v.default];return g?p.push(r.default,s.default):p.push(t.default,a.default),p.push(c.default),p}e.default=l}),Ci=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r={message:({schemaCode:s})=>(0,t.str)`must match format "${s}"`,params:({schemaCode:s})=>(0,t._)`{format: ${s}}`},a={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:r,code(s,c){let{gen:n,data:o,$data:i,schema:d,schemaCode:v,it:b}=s,{opts:x,errSchemaPath:j,schemaEnv:E,self:S}=b;if(!x.validateFormats)return;i?f():l();function f(){let g=n.scopeValue("formats",{ref:S.formats,code:x.code.formats}),p=n.const("fDef",(0,t._)`${g}[${v}]`),y=n.let("fType"),$=n.let("format");n.if((0,t._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,()=>n.assign(y,(0,t._)`${p}.type || "string"`).assign($,(0,t._)`${p}.validate`),()=>n.assign(y,(0,t._)`"string"`).assign($,p)),s.fail$data((0,t.or)(m(),h()));function m(){return x.strictSchema===!1?t.nil:(0,t._)`${v} && !${$}`}function h(){let k=E.$async?(0,t._)`(${p}.async ? await ${$}(${o}) : ${$}(${o}))`:(0,t._)`${$}(${o})`,T=(0,t._)`(typeof ${$} == "function" ? ${k} : ${$}.test(${o}))`;return(0,t._)`${$} && ${$} !== true && ${y} === ${c} && !${T}`}}function l(){let g=S.formats[d];if(!g){m();return}if(g===!0)return;let[p,y,$]=h(g);p===c&&s.pass(k());function m(){if(x.strictSchema===!1){S.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${d}" ignored in schema at path "${j}"`}}function h(T){let M=T instanceof RegExp?(0,t.regexpCode)(T):x.code.formats?(0,t._)`${x.code.formats}${(0,t.getProperty)(d)}`:void 0,D=n.scopeValue("formats",{key:d,ref:T,code:M});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,t._)`${D}.validate`]:["string",T,D]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!E.$async)throw new Error("async format in sync schema");return(0,t._)`await ${$}(${o})`}return typeof y=="function"?(0,t._)`${$}(${o})`:(0,t._)`${$}.test(${o})`}}}};e.default=a}),Ti=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Ci(),r=[t.default];e.default=r}),Ii=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),Ri=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=si(),r=yi(),a=Oi(),s=Ti(),c=Ii(),n=[t.default,r.default,(0,a.default)(),s.default,c.metadataVocabulary,c.contentVocabulary];e.default=n}),Ai=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0;var t;(function(r){r.Tag="tag",r.Mapping="mapping"})(t||(e.DiscrError=t={}))}),Di=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=ne(),r=Ai(),a=br(),s=er(),c=he(),n={message:({params:{discrError:i,tagName:d}})=>i===r.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:i,tag:d,tagName:v}})=>(0,t._)`{error: ${i}, tag: ${v}, tagValue: ${d}}`},o={keyword:"discriminator",type:"object",schemaType:"object",error:n,code(i){let{gen:d,data:v,schema:b,parentSchema:x,it:j}=i,{oneOf:E}=x;if(!j.opts.discriminator)throw new Error("discriminator: requires discriminator option");let S=b.propertyName;if(typeof S!="string")throw new Error("discriminator: requires propertyName");if(b.mapping)throw new Error("discriminator: mapping is not supported");if(!E)throw new Error("discriminator: requires oneOf keyword");let f=d.let("valid",!1),l=d.const("tag",(0,t._)`${v}${(0,t.getProperty)(S)}`);d.if((0,t._)`typeof ${l} == "string"`,()=>g(),()=>i.error(!1,{discrError:r.DiscrError.Tag,tag:l,tagName:S})),i.ok(f);function g(){let $=y();d.if(!1);for(let m in $)d.elseIf((0,t._)`${l} === ${m}`),d.assign(f,p($[m]));d.else(),i.error(!1,{discrError:r.DiscrError.Mapping,tag:l,tagName:S}),d.endIf()}function p($){let m=d.name("valid"),h=i.subschema({keyword:"oneOf",schemaProp:$},m);return i.mergeEvaluated(h,t.Name),m}function y(){var $;let m={},h=T(x),k=!0;for(let q=0;q<E.length;q++){let F=E[q];if(F?.$ref&&!(0,c.schemaHasRulesButRef)(F,j.self.RULES)){let W=F.$ref;if(F=a.resolveRef.call(j.self,j.schemaEnv.root,j.baseId,W),F instanceof a.SchemaEnv&&(F=F.schema),F===void 0)throw new s.default(j.opts.uriResolver,j.baseId,W)}let U=($=F?.properties)===null||$===void 0?void 0:$[S];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${S}"`);k=k&&(h||T(F)),M(U,q)}if(!k)throw new Error(`discriminator: "${S}" must be required`);return m;function T({required:q}){return Array.isArray(q)&&q.includes(S)}function M(q,F){if(q.const)D(q.const,F);else if(q.enum)for(let U of q.enum)D(U,F);else throw new Error(`discriminator: "properties/${S}" must have "const" or "enum"`)}function D(q,F){if(typeof q!="string"||q in m)throw new Error(`discriminator: "${S}" values must be unique strings`);m[q]=F}}}};e.default=o}),Mi=z((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),qi=z((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;var r=ti(),a=Ri(),s=Di(),c=Mi(),n=["/properties"],o="http://json-schema.org/draft-07/schema",i=class extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(j=>this.addVocabulary(j)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let j=this.opts.$data?this.$dataMetaSchema(c,n):c;this.addMetaSchema(j,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}};e.Ajv=i,t.exports=e=i,t.exports.Ajv=i,Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var d=Qt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var v=ne();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});var b=$r();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return b.default}});var x=er();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return x.default}})}),Vi=z(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;var t=qi(),r=ne(),a=r.operators,s={formatMaximum:{okStr:"<=",ok:a.LTE,fail:a.GT},formatMinimum:{okStr:">=",ok:a.GTE,fail:a.LT},formatExclusiveMaximum:{okStr:"<",ok:a.LT,fail:a.GTE},formatExclusiveMinimum:{okStr:">",ok:a.GT,fail:a.LTE}},c={message:({keyword:o,schemaCode:i})=>(0,r.str)`should be ${s[o].okStr} ${i}`,params:({keyword:o,schemaCode:i})=>(0,r._)`{comparison: ${s[o].okStr}, limit: ${i}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:c,code(o){let{gen:i,data:d,schemaCode:v,keyword:b,it:x}=o,{opts:j,self:E}=x;if(!j.validateFormats)return;let S=new t.KeywordCxt(x,E.RULES.all.format.definition,"format");S.$data?f():l();function f(){let p=i.scopeValue("formats",{ref:E.formats,code:j.code.formats}),y=i.const("fmt",(0,r._)`${p}[${S.schemaCode}]`);o.fail$data((0,r.or)((0,r._)`typeof ${y} != "object"`,(0,r._)`${y} instanceof RegExp`,(0,r._)`typeof ${y}.compare != "function"`,g(y)))}function l(){let p=S.schema,y=E.formats[p];if(!y||y===!0)return;if(typeof y!="object"||y instanceof RegExp||typeof y.compare!="function")throw new Error(`"${b}": format "${p}" does not define "compare" function`);let $=i.scopeValue("formats",{key:p,ref:y,code:j.code.formats?(0,r._)`${j.code.formats}${(0,r.getProperty)(p)}`:void 0});o.fail$data(g($))}function g(p){return(0,r._)`${p}.compare(${d}, ${v}) ${s[b].fail} 0`}},dependencies:["format"]};var n=o=>(o.addKeyword(e.formatLimitDefinition),o);e.default=n}),zi=z((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Gs(),a=Vi(),s=ne(),c=new s.Name("fullFormats"),n=new s.Name("fastFormats"),o=(d,v={keywords:!0})=>{if(Array.isArray(v))return i(d,v,r.fullFormats,c),d;let[b,x]=v.mode==="fast"?[r.fastFormats,n]:[r.fullFormats,c],j=v.formats||r.formatNames;return i(d,j,b,x),v.keywords&&(0,a.default)(d),d};o.get=(d,v="full")=>{let b=(v==="fast"?r.fastFormats:r.fullFormats)[d];if(!b)throw new Error(`Unknown format "${d}"`);return b};function i(d,v,b,x){var j,E;(j=(E=d.opts.code).formats)!==null&&j!==void 0||(E.formats=(0,s._)`require("ajv-formats/dist/formats").${x}`);for(let S of v)d.addFormat(S,b[S])}t.exports=e=o,Object.defineProperty(e,"__esModule",{value:!0}),e.default=o}),N={};Qa(N,{BRAND:()=>hn,DIRTY:()=>qt,EMPTY_PATH:()=>Li,INVALID:()=>te,NEVER:()=>Wn,OK:()=>ke,ParseStatus:()=>Se,Schema:()=>ie,ZodAny:()=>at,ZodArray:()=>Xe,ZodBigInt:()=>ct,ZodBoolean:()=>ut,ZodBranded:()=>kr,ZodCatch:()=>bt,ZodDate:()=>pt,ZodDefault:()=>$t,ZodDiscriminatedUnion:()=>ca,ZodEffects:()=>Ie,ZodEnum:()=>kt,ZodError:()=>Te,ZodFirstPartyTypeKind:()=>re,ZodFunction:()=>fa,ZodIntersection:()=>yt,ZodIssueCode:()=>G,ZodLazy:()=>gt,ZodLiteral:()=>vt,ZodMap:()=>Ft,ZodNaN:()=>Zt,ZodNativeEnum:()=>_t,ZodNever:()=>Fe,ZodNull:()=>ft,ZodNullable:()=>Le,ZodNumber:()=>dt,ZodObject:()=>Ne,ZodOptional:()=>De,ZodParsedType:()=>X,ZodPipeline:()=>Sr,ZodPromise:()=>st,ZodReadonly:()=>wt,ZodRecord:()=>ha,ZodSchema:()=>ie,ZodSet:()=>Ut,ZodString:()=>rt,ZodSymbol:()=>Vt,ZodTransformer:()=>Ie,ZodTuple:()=>Ze,ZodType:()=>ie,ZodUndefined:()=>ht,ZodUnion:()=>mt,ZodUnknown:()=>We,ZodVoid:()=>zt,addIssueToContext:()=>H,any:()=>wn,array:()=>Pn,bigint:()=>gn,boolean:()=>$a,coerce:()=>Hn,custom:()=>ga,date:()=>vn,datetimeRegex:()=>la,defaultErrorMap:()=>tt,discriminatedUnion:()=>On,effect:()=>qr,enum:()=>Vn,function:()=>Dn,getErrorMap:()=>Dt,getParsedType:()=>Ve,instanceof:()=>mn,intersection:()=>Cn,isAborted:()=>lr,isAsync:()=>lt,isDirty:()=>dr,isValid:()=>Ye,late:()=>fn,lazy:()=>Mn,literal:()=>qn,makeIssue:()=>Mt,map:()=>Rn,nan:()=>yn,nativeEnum:()=>zn,never:()=>Sn,null:()=>bn,nullable:()=>Zn,number:()=>_a,object:()=>Nn,objectUtil:()=>or,oboolean:()=>Jn,onumber:()=>Gn,optional:()=>Un,ostring:()=>Bn,pipeline:()=>Kn,preprocess:()=>Ln,promise:()=>Fn,quotelessJson:()=>Fi,record:()=>In,set:()=>An,setErrorMap:()=>Zi,strictObject:()=>jn,string:()=>va,symbol:()=>_n,transformer:()=>qr,tuple:()=>Tn,undefined:()=>$n,union:()=>xn,unknown:()=>kn,util:()=>ce,void:()=>En});var ce;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{let c={};for(let n of s)c[n]=n;return c},e.getValidEnumValues=s=>{let c=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),n={};for(let o of c)n[o]=s[o];return e.objectValues(n)},e.objectValues=s=>e.objectKeys(s).map(function(c){return s[c]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let c=[];for(let n in s)Object.prototype.hasOwnProperty.call(s,n)&&c.push(n);return c},e.find=(s,c)=>{for(let n of s)if(c(n))return n},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,c=" | "){return s.map(n=>typeof n=="string"?`'${n}'`:n).join(c)}e.joinValues=a,e.jsonStringifyReplacer=(s,c)=>typeof c=="bigint"?c.toString():c})(ce||(ce={}));var or;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(or||(or={}));var X=ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ve=e=>{switch(typeof e){case"undefined":return X.undefined;case"string":return X.string;case"number":return Number.isNaN(e)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(e)?X.array:e===null?X.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?X.promise:typeof Map<"u"&&e instanceof Map?X.map:typeof Set<"u"&&e instanceof Set?X.set:typeof Date<"u"&&e instanceof Date?X.date:X.object;default:return X.unknown}},G=ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Fi=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Te=class aa extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(c){return c.message},a={_errors:[]},s=c=>{for(let n of c.issues)if(n.code==="invalid_union")n.unionErrors.map(s);else if(n.code==="invalid_return_type")s(n.returnTypeError);else if(n.code==="invalid_arguments")s(n.argumentsError);else if(n.path.length===0)a._errors.push(r(n));else{let o=a,i=0;for(;i<n.path.length;){let d=n.path[i];i===n.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(n))):o[d]=o[d]||{_errors:[]},o=o[d],i++}}};return s(this),a}static assert(t){if(!(t instanceof aa))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},a=[];for(let s of this.issues)if(s.path.length>0){let c=s.path[0];r[c]=r[c]||[],r[c].push(t(s))}else a.push(t(s));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};Te.create=e=>new Te(e);var Ui=(e,t)=>{let r;switch(e.code){case G.invalid_type:e.received===X.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ce.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${ce.joinValues(e.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ce.joinValues(e.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${ce.joinValues(e.options)}, received '${e.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ce.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case G.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case G.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=t.defaultError,ce.assertNever(e)}return{message:r}},tt=Ui,sa=tt;function Zi(e){sa=e}function Dt(){return sa}var Mt=e=>{let{data:t,path:r,errorMaps:a,issueData:s}=e,c=[...r,...s.path||[]],n={...s,path:c};if(s.message!==void 0)return{...s,path:c,message:s.message};let o="",i=a.filter(d=>!!d).slice().reverse();for(let d of i)o=d(n,{data:t,defaultError:o}).message;return{...s,path:c,message:o}},Li=[];function H(e,t){let r=Dt(),a=Mt({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===tt?void 0:tt].filter(s=>!!s)});e.common.issues.push(a)}var Se=class ia{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let a=[];for(let s of r){if(s.status==="aborted")return te;s.status==="dirty"&&t.dirty(),a.push(s.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,r){let a=[];for(let s of r){let c=await s.key,n=await s.value;a.push({key:c,value:n})}return ia.mergeObjectSync(t,a)}static mergeObjectSync(t,r){let a={};for(let s of r){let{key:c,value:n}=s;if(c.status==="aborted"||n.status==="aborted")return te;c.status==="dirty"&&t.dirty(),n.status==="dirty"&&t.dirty(),c.value!=="__proto__"&&(typeof n.value<"u"||s.alwaysSet)&&(a[c.value]=n.value)}return{status:t.value,value:a}}},te=Object.freeze({status:"aborted"}),qt=e=>({status:"dirty",value:e}),ke=e=>({status:"valid",value:e}),lr=e=>e.status==="aborted",dr=e=>e.status==="dirty",Ye=e=>e.status==="valid",lt=e=>typeof Promise<"u"&&e instanceof Promise,Q;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Q||(Q={}));var Me=class{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Dr=(e,t)=>{if(Ye(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Te(e.common.issues);return this._error=r,this._error}}};function ae(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:s}=e;if(t&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(c,n)=>{let{message:o}=e;return c.code==="invalid_enum_value"?{message:o??n.defaultError}:typeof n.data>"u"?{message:o??a??n.defaultError}:c.code!=="invalid_type"?{message:n.defaultError}:{message:o??r??n.defaultError}},description:s}}var ie=class{get description(){return this._def.description}_getType(e){return Ve(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Se,ctx:{common:e.parent.common,data:e.data,parsedType:Ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(lt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ve(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Dr(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ve(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return Ye(r)?{value:r.value}:{issues:t.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Ye(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ve(e)},a=this._parse({data:e,path:r.path,parent:r}),s=await(lt(a)?a:Promise.resolve(a));return Dr(r,s)}refine(e,t){let r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,s)=>{let c=e(a),n=()=>s.addIssue({code:G.custom,...r(a)});return typeof Promise<"u"&&c instanceof Promise?c.then(o=>o?!0:(n(),!1)):c?!0:(n(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new Ie({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return De.create(this,this._def)}nullable(){return Le.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xe.create(this)}promise(){return st.create(this,this._def)}or(e){return mt.create([this,e],this._def)}and(e){return yt.create(this,e,this._def)}transform(e){return new Ie({...ae(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new $t({...ae(this._def),innerType:this,defaultValue:t,typeName:re.ZodDefault})}brand(){return new kr({typeName:re.ZodBranded,type:this,...ae(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new bt({...ae(this._def),innerType:this,catchValue:t,typeName:re.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Sr.create(this,e)}readonly(){return wt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Ki=/^c[^\s-]{8,}$/i,Bi=/^[0-9a-z]+$/,Gi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ji=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Hi=/^[a-z0-9_-]{21}$/i,Wi=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Yi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Xi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",nr,en=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,rn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,an=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,na="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",on=new RegExp(`^${na}$`);function oa(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function ln(e){return new RegExp(`^${oa(e)}$`)}function la(e){let t=`${na}T${oa(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function dn(e,t){return!!((t==="v4"||!t)&&en.test(e)||(t==="v6"||!t)&&rn.test(e))}function cn(e,t){if(!Wi.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(a));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function un(e,t){return!!((t==="v4"||!t)&&tn.test(e)||(t==="v6"||!t)&&an.test(e))}var rt=class ot extends ie{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==X.string){let s=this._getOrReturnCtx(t);return H(s,{code:G.invalid_type,expected:X.string,received:s.parsedType}),te}let r=new Se,a;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(a=this._getOrReturnCtx(t,a),H(a,{code:G.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(a=this._getOrReturnCtx(t,a),H(a,{code:G.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){let c=t.data.length>s.value,n=t.data.length<s.value;(c||n)&&(a=this._getOrReturnCtx(t,a),c?H(a,{code:G.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):n&&H(a,{code:G.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Xi.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"email",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")nr||(nr=new RegExp(Qi,"u")),nr.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"emoji",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Ji.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"uuid",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Hi.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"nanoid",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Ki.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"cuid",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Bi.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"cuid2",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Gi.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"ulid",code:G.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),H(a,{validation:"url",code:G.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"regex",code:G.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?la(s).test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?on.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?ln(s).test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{code:G.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Yi.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"duration",code:G.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?dn(t.data,s.version)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"ip",code:G.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?cn(t.data,s.alg)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"jwt",code:G.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?un(t.data,s.version)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"cidr",code:G.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?sn.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"base64",code:G.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?nn.test(t.data)||(a=this._getOrReturnCtx(t,a),H(a,{validation:"base64url",code:G.invalid_string,message:s.message}),r.dirty()):ce.assertNever(s);return{status:r.value,value:t.data}}_regex(t,r,a){return this.refinement(s=>t.test(s),{validation:r,code:G.invalid_string,...Q.errToObj(a)})}_addCheck(t){return new ot({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Q.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Q.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Q.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Q.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Q.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Q.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Q.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Q.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Q.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Q.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Q.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Q.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Q.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Q.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Q.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Q.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Q.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Q.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Q.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Q.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Q.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Q.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Q.errToObj(r)})}nonempty(t){return this.min(1,Q.errToObj(t))}trim(){return new ot({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ot({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ot({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};rt.create=e=>new rt({checks:[],typeName:re.ZodString,coerce:e?.coerce??!1,...ae(e)});function pn(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,s=r>a?r:a,c=Number.parseInt(e.toFixed(s).replace(".","")),n=Number.parseInt(t.toFixed(s).replace(".",""));return c%n/10**s}var dt=class cr extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==X.number){let s=this._getOrReturnCtx(t);return H(s,{code:G.invalid_type,expected:X.number,received:s.parsedType}),te}let r,a=new Se;for(let s of this._def.checks)s.kind==="int"?ce.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),H(r,{code:G.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?pn(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),H(r,{code:G.not_finite,message:s.message}),a.dirty()):ce.assertNever(s);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Q.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Q.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Q.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Q.toString(r))}setLimit(t,r,a,s){return new cr({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Q.toString(s)}]})}_addCheck(t){return new cr({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Q.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Q.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Q.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Q.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Q.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Q.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Q.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Q.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Q.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ce.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(t===null||a.value<t)&&(t=a.value)}return Number.isFinite(r)&&Number.isFinite(t)}};dt.create=e=>new dt({checks:[],typeName:re.ZodNumber,coerce:e?.coerce||!1,...ae(e)});var ct=class ur extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==X.bigint)return this._getInvalidInput(t);let r,a=new Se;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),H(r,{code:G.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):ce.assertNever(s);return{status:a.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return H(r,{code:G.invalid_type,expected:X.bigint,received:r.parsedType}),te}gte(t,r){return this.setLimit("min",t,!0,Q.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Q.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Q.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Q.toString(r))}setLimit(t,r,a,s){return new ur({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Q.toString(s)}]})}_addCheck(t){return new ur({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Q.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Q.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Q.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Q.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Q.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};ct.create=e=>new ct({checks:[],typeName:re.ZodBigInt,coerce:e?.coerce??!1,...ae(e)});var ut=class extends ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.boolean,received:t.parsedType}),te}return ke(e.data)}};ut.create=e=>new ut({typeName:re.ZodBoolean,coerce:e?.coerce||!1,...ae(e)});var pt=class da extends ie{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==X.date){let s=this._getOrReturnCtx(t);return H(s,{code:G.invalid_type,expected:X.date,received:s.parsedType}),te}if(Number.isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return H(s,{code:G.invalid_date}),te}let r=new Se,a;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(a=this._getOrReturnCtx(t,a),H(a,{code:G.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(a=this._getOrReturnCtx(t,a),H(a,{code:G.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ce.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new da({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Q.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Q.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};pt.create=e=>new pt({checks:[],coerce:e?.coerce||!1,typeName:re.ZodDate,...ae(e)});var Vt=class extends ie{_parse(e){if(this._getType(e)!==X.symbol){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.symbol,received:t.parsedType}),te}return ke(e.data)}};Vt.create=e=>new Vt({typeName:re.ZodSymbol,...ae(e)});var ht=class extends ie{_parse(e){if(this._getType(e)!==X.undefined){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.undefined,received:t.parsedType}),te}return ke(e.data)}};ht.create=e=>new ht({typeName:re.ZodUndefined,...ae(e)});var ft=class extends ie{_parse(e){if(this._getType(e)!==X.null){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.null,received:t.parsedType}),te}return ke(e.data)}};ft.create=e=>new ft({typeName:re.ZodNull,...ae(e)});var at=class extends ie{constructor(){super(...arguments),this._any=!0}_parse(e){return ke(e.data)}};at.create=e=>new at({typeName:re.ZodAny,...ae(e)});var We=class extends ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ke(e.data)}};We.create=e=>new We({typeName:re.ZodUnknown,...ae(e)});var Fe=class extends ie{_parse(e){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.never,received:t.parsedType}),te}};Fe.create=e=>new Fe({typeName:re.ZodNever,...ae(e)});var zt=class extends ie{_parse(e){if(this._getType(e)!==X.undefined){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.void,received:t.parsedType}),te}return ke(e.data)}};zt.create=e=>new zt({typeName:re.ZodVoid,...ae(e)});var Xe=class Ot extends ie{_parse(t){let{ctx:r,status:a}=this._processInputParams(t),s=this._def;if(r.parsedType!==X.array)return H(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),te;if(s.exactLength!==null){let n=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(n||o)&&(H(r,{code:n?G.too_big:G.too_small,minimum:o?s.exactLength.value:void 0,maximum:n?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(H(r,{code:G.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(H(r,{code:G.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((n,o)=>s.type._parseAsync(new Me(r,n,r.path,o)))).then(n=>Se.mergeArray(a,n));let c=[...r.data].map((n,o)=>s.type._parseSync(new Me(r,n,r.path,o)));return Se.mergeArray(a,c)}get element(){return this._def.type}min(t,r){return new Ot({...this._def,minLength:{value:t,message:Q.toString(r)}})}max(t,r){return new Ot({...this._def,maxLength:{value:t,message:Q.toString(r)}})}length(t,r){return new Ot({...this._def,exactLength:{value:t,message:Q.toString(r)}})}nonempty(t){return this.min(1,t)}};Xe.create=(e,t)=>new Xe({type:e,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...ae(t)});function et(e){if(e instanceof Ne){let t={};for(let r in e.shape){let a=e.shape[r];t[r]=De.create(et(a))}return new Ne({...e._def,shape:()=>t})}else return e instanceof Xe?new Xe({...e._def,type:et(e.element)}):e instanceof De?De.create(et(e.unwrap())):e instanceof Le?Le.create(et(e.unwrap())):e instanceof Ze?Ze.create(e.items.map(t=>et(t))):e}var Ne=class Ce extends ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ce.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==X.object){let i=this._getOrReturnCtx(t);return H(i,{code:G.invalid_type,expected:X.object,received:i.parsedType}),te}let{status:r,ctx:a}=this._processInputParams(t),{shape:s,keys:c}=this._getCached(),n=[];if(!(this._def.catchall instanceof Fe&&this._def.unknownKeys==="strip"))for(let i in a.data)c.includes(i)||n.push(i);let o=[];for(let i of c){let d=s[i],v=a.data[i];o.push({key:{status:"valid",value:i},value:d._parse(new Me(a,v,a.path,i)),alwaysSet:i in a.data})}if(this._def.catchall instanceof Fe){let i=this._def.unknownKeys;if(i==="passthrough")for(let d of n)o.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(i==="strict")n.length>0&&(H(a,{code:G.unrecognized_keys,keys:n}),r.dirty());else if(i!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let i=this._def.catchall;for(let d of n){let v=a.data[d];o.push({key:{status:"valid",value:d},value:i._parse(new Me(a,v,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let i=[];for(let d of o){let v=await d.key,b=await d.value;i.push({key:v,value:b,alwaysSet:d.alwaysSet})}return i}).then(i=>Se.mergeObjectSync(r,i)):Se.mergeObjectSync(r,o)}get shape(){return this._def.shape()}strict(t){return Q.errToObj,new Ce({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,a)=>{let s=this._def.errorMap?.(r,a).message??a.defaultError;return r.code==="unrecognized_keys"?{message:Q.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new Ce({...this._def,unknownKeys:"strip"})}passthrough(){return new Ce({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ce({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ce({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:re.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Ce({...this._def,catchall:t})}pick(t){let r={};for(let a of ce.objectKeys(t))t[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new Ce({...this._def,shape:()=>r})}omit(t){let r={};for(let a of ce.objectKeys(this.shape))t[a]||(r[a]=this.shape[a]);return new Ce({...this._def,shape:()=>r})}deepPartial(){return et(this)}partial(t){let r={};for(let a of ce.objectKeys(this.shape)){let s=this.shape[a];t&&!t[a]?r[a]=s:r[a]=s.optional()}return new Ce({...this._def,shape:()=>r})}required(t){let r={};for(let a of ce.objectKeys(this.shape))if(t&&!t[a])r[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof De;)s=s._def.innerType;r[a]=s}return new Ce({...this._def,shape:()=>r})}keyof(){return ma(ce.objectKeys(this.shape))}};Ne.create=(e,t)=>new Ne({shape:()=>e,unknownKeys:"strip",catchall:Fe.create(),typeName:re.ZodObject,...ae(t)});Ne.strictCreate=(e,t)=>new Ne({shape:()=>e,unknownKeys:"strict",catchall:Fe.create(),typeName:re.ZodObject,...ae(t)});Ne.lazycreate=(e,t)=>new Ne({shape:e,unknownKeys:"strip",catchall:Fe.create(),typeName:re.ZodObject,...ae(t)});var mt=class extends ie{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function a(s){for(let n of s)if(n.result.status==="valid")return n.result;for(let n of s)if(n.result.status==="dirty")return t.common.issues.push(...n.ctx.common.issues),n.result;let c=s.map(n=>new Te(n.ctx.common.issues));return H(t,{code:G.invalid_union,unionErrors:c}),te}if(t.common.async)return Promise.all(r.map(async s=>{let c={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(a);{let s,c=[];for(let o of r){let i={...t,common:{...t.common,issues:[]},parent:null},d=o._parseSync({data:t.data,path:t.path,parent:i});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:i}),i.common.issues.length&&c.push(i.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;let n=c.map(o=>new Te(o));return H(t,{code:G.invalid_union,unionErrors:n}),te}}get options(){return this._def.options}};mt.create=(e,t)=>new mt({options:e,typeName:re.ZodUnion,...ae(t)});var Ue=e=>e instanceof gt?Ue(e.schema):e instanceof Ie?Ue(e.innerType()):e instanceof vt?[e.value]:e instanceof kt?e.options:e instanceof _t?ce.objectValues(e.enum):e instanceof $t?Ue(e._def.innerType):e instanceof ht?[void 0]:e instanceof ft?[null]:e instanceof De?[void 0,...Ue(e.unwrap())]:e instanceof Le?[null,...Ue(e.unwrap())]:e instanceof kr||e instanceof wt?Ue(e.unwrap()):e instanceof bt?Ue(e._def.innerType):[],ca=class ua extends ie{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==X.object)return H(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),te;let a=this.discriminator,s=r.data[a],c=this.optionsMap.get(s);return c?r.common.async?c._parseAsync({data:r.data,path:r.path,parent:r}):c._parseSync({data:r.data,path:r.path,parent:r}):(H(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,a){let s=new Map;for(let c of r){let n=Ue(c.shape[t]);if(!n.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let o of n){if(s.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);s.set(o,c)}}return new ua({typeName:re.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...ae(a)})}};function pr(e,t){let r=Ve(e),a=Ve(t);if(e===t)return{valid:!0,data:e};if(r===X.object&&a===X.object){let s=ce.objectKeys(t),c=ce.objectKeys(e).filter(o=>s.indexOf(o)!==-1),n={...e,...t};for(let o of c){let i=pr(e[o],t[o]);if(!i.valid)return{valid:!1};n[o]=i.data}return{valid:!0,data:n}}else if(r===X.array&&a===X.array){if(e.length!==t.length)return{valid:!1};let s=[];for(let c=0;c<e.length;c++){let n=e[c],o=t[c],i=pr(n,o);if(!i.valid)return{valid:!1};s.push(i.data)}return{valid:!0,data:s}}else return r===X.date&&a===X.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var yt=class extends ie{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(s,c)=>{if(lr(s)||lr(c))return te;let n=pr(s.value,c.value);return n.valid?((dr(s)||dr(c))&&t.dirty(),{status:t.value,value:n.data}):(H(r,{code:G.invalid_intersection_types}),te)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,c])=>a(s,c)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};yt.create=(e,t,r)=>new yt({left:e,right:t,typeName:re.ZodIntersection,...ae(r)});var Ze=class pa extends ie{_parse(t){let{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==X.array)return H(a,{code:G.invalid_type,expected:X.array,received:a.parsedType}),te;if(a.data.length<this._def.items.length)return H(a,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),te;!this._def.rest&&a.data.length>this._def.items.length&&(H(a,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...a.data].map((c,n)=>{let o=this._def.items[n]||this._def.rest;return o?o._parse(new Me(a,c,a.path,n)):null}).filter(c=>!!c);return a.common.async?Promise.all(s).then(c=>Se.mergeArray(r,c)):Se.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new pa({...this._def,rest:t})}};Ze.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ze({items:e,typeName:re.ZodTuple,rest:null,...ae(t)})};var ha=class hr extends ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==X.object)return H(a,{code:G.invalid_type,expected:X.object,received:a.parsedType}),te;let s=[],c=this._def.keyType,n=this._def.valueType;for(let o in a.data)s.push({key:c._parse(new Me(a,o,a.path,o)),value:n._parse(new Me(a,a.data[o],a.path,o)),alwaysSet:o in a.data});return a.common.async?Se.mergeObjectAsync(r,s):Se.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,a){return r instanceof ie?new hr({keyType:t,valueType:r,typeName:re.ZodRecord,...ae(a)}):new hr({keyType:rt.create(),valueType:t,typeName:re.ZodRecord,...ae(r)})}},Ft=class extends ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.map)return H(r,{code:G.invalid_type,expected:X.map,received:r.parsedType}),te;let a=this._def.keyType,s=this._def.valueType,c=[...r.data.entries()].map(([n,o],i)=>({key:a._parse(new Me(r,n,r.path,[i,"key"])),value:s._parse(new Me(r,o,r.path,[i,"value"]))}));if(r.common.async){let n=new Map;return Promise.resolve().then(async()=>{for(let o of c){let i=await o.key,d=await o.value;if(i.status==="aborted"||d.status==="aborted")return te;(i.status==="dirty"||d.status==="dirty")&&t.dirty(),n.set(i.value,d.value)}return{status:t.value,value:n}})}else{let n=new Map;for(let o of c){let i=o.key,d=o.value;if(i.status==="aborted"||d.status==="aborted")return te;(i.status==="dirty"||d.status==="dirty")&&t.dirty(),n.set(i.value,d.value)}return{status:t.value,value:n}}}};Ft.create=(e,t,r)=>new Ft({valueType:t,keyType:e,typeName:re.ZodMap,...ae(r)});var Ut=class fr extends ie{_parse(t){let{status:r,ctx:a}=this._processInputParams(t);if(a.parsedType!==X.set)return H(a,{code:G.invalid_type,expected:X.set,received:a.parsedType}),te;let s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(H(a,{code:G.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(H(a,{code:G.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let c=this._def.valueType;function n(i){let d=new Set;for(let v of i){if(v.status==="aborted")return te;v.status==="dirty"&&r.dirty(),d.add(v.value)}return{status:r.value,value:d}}let o=[...a.data.values()].map((i,d)=>c._parse(new Me(a,i,a.path,d)));return a.common.async?Promise.all(o).then(i=>n(i)):n(o)}min(t,r){return new fr({...this._def,minSize:{value:t,message:Q.toString(r)}})}max(t,r){return new fr({...this._def,maxSize:{value:t,message:Q.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Ut.create=(e,t)=>new Ut({valueType:e,minSize:null,maxSize:null,typeName:re.ZodSet,...ae(t)});var fa=class Ct extends ie{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==X.function)return H(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),te;function a(o,i){return Mt({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dt(),tt].filter(d=>!!d),issueData:{code:G.invalid_arguments,argumentsError:i}})}function s(o,i){return Mt({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dt(),tt].filter(d=>!!d),issueData:{code:G.invalid_return_type,returnTypeError:i}})}let c={errorMap:r.common.contextualErrorMap},n=r.data;if(this._def.returns instanceof st){let o=this;return ke(async function(...i){let d=new Te([]),v=await o._def.args.parseAsync(i,c).catch(x=>{throw d.addIssue(a(i,x)),d}),b=await Reflect.apply(n,this,v);return await o._def.returns._def.type.parseAsync(b,c).catch(x=>{throw d.addIssue(s(b,x)),d})})}else{let o=this;return ke(function(...i){let d=o._def.args.safeParse(i,c);if(!d.success)throw new Te([a(i,d.error)]);let v=Reflect.apply(n,this,d.data),b=o._def.returns.safeParse(v,c);if(!b.success)throw new Te([s(v,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Ct({...this._def,args:Ze.create(t).rest(We.create())})}returns(t){return new Ct({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,a){return new Ct({args:t||Ze.create([]).rest(We.create()),returns:r||We.create(),typeName:re.ZodFunction,...ae(a)})}},gt=class extends ie{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};gt.create=(e,t)=>new gt({getter:e,typeName:re.ZodLazy,...ae(t)});var vt=class extends ie{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return H(t,{received:t.data,code:G.invalid_literal,expected:this._def.value}),te}return{status:"valid",value:e.data}}get value(){return this._def.value}};vt.create=(e,t)=>new vt({value:e,typeName:re.ZodLiteral,...ae(t)});function ma(e,t){return new kt({values:e,typeName:re.ZodEnum,...ae(t)})}var kt=class mr extends ie{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),a=this._def.values;return H(r,{expected:ce.joinValues(a),received:r.parsedType,code:G.invalid_type}),te}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),a=this._def.values;return H(r,{received:r.data,code:G.invalid_enum_value,options:a}),te}return ke(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return mr.create(t,{...this._def,...r})}exclude(t,r=this._def){return mr.create(this.options.filter(a=>!t.includes(a)),{...this._def,...r})}};kt.create=ma;var _t=class extends ie{_parse(e){let t=ce.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==X.string&&r.parsedType!==X.number){let a=ce.objectValues(t);return H(r,{expected:ce.joinValues(a),received:r.parsedType,code:G.invalid_type}),te}if(this._cache||(this._cache=new Set(ce.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let a=ce.objectValues(t);return H(r,{received:r.data,code:G.invalid_enum_value,options:a}),te}return ke(e.data)}get enum(){return this._def.values}};_t.create=(e,t)=>new _t({values:e,typeName:re.ZodNativeEnum,...ae(t)});var st=class extends ie{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==X.promise&&t.common.async===!1)return H(t,{code:G.invalid_type,expected:X.promise,received:t.parsedType}),te;let r=t.parsedType===X.promise?t.data:Promise.resolve(t.data);return ke(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}};st.create=(e,t)=>new st({type:e,typeName:re.ZodPromise,...ae(t)});var Ie=class extends ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:c=>{H(r,c),c.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){let c=a.transform(r.data,s);if(r.common.async)return Promise.resolve(c).then(async n=>{if(t.value==="aborted")return te;let o=await this._def.schema._parseAsync({data:n,path:r.path,parent:r});return o.status==="aborted"?te:o.status==="dirty"||t.value==="dirty"?qt(o.value):o});{if(t.value==="aborted")return te;let n=this._def.schema._parseSync({data:c,path:r.path,parent:r});return n.status==="aborted"?te:n.status==="dirty"||t.value==="dirty"?qt(n.value):n}}if(a.type==="refinement"){let c=n=>{let o=a.refinement(n,s);if(r.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return n};if(r.common.async===!1){let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?te:(n.status==="dirty"&&t.dirty(),c(n.value),{status:t.value,value:n.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(n=>n.status==="aborted"?te:(n.status==="dirty"&&t.dirty(),c(n.value).then(()=>({status:t.value,value:n.value}))))}if(a.type==="transform")if(r.common.async===!1){let c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ye(c))return te;let n=a.transform(c.value,s);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>Ye(c)?Promise.resolve(a.transform(c.value,s)).then(n=>({status:t.value,value:n})):te);ce.assertNever(a)}};Ie.create=(e,t,r)=>new Ie({schema:e,typeName:re.ZodEffects,effect:t,...ae(r)});Ie.createWithPreprocess=(e,t,r)=>new Ie({schema:t,effect:{type:"preprocess",transform:e},typeName:re.ZodEffects,...ae(r)});var De=class extends ie{_parse(e){return this._getType(e)===X.undefined?ke(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};De.create=(e,t)=>new De({innerType:e,typeName:re.ZodOptional,...ae(t)});var Le=class extends ie{_parse(e){return this._getType(e)===X.null?ke(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Le.create=(e,t)=>new Le({innerType:e,typeName:re.ZodNullable,...ae(t)});var $t=class extends ie{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===X.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};$t.create=(e,t)=>new $t({innerType:e,typeName:re.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ae(t)});var bt=class extends ie{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lt(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Te(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Te(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};bt.create=(e,t)=>new bt({innerType:e,typeName:re.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ae(t)});var Zt=class extends ie{_parse(e){if(this._getType(e)!==X.nan){let t=this._getOrReturnCtx(e);return H(t,{code:G.invalid_type,expected:X.nan,received:t.parsedType}),te}return{status:"valid",value:e.data}}};Zt.create=e=>new Zt({typeName:re.ZodNaN,...ae(e)});var hn=Symbol("zod_brand"),kr=class extends ie{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},Sr=class ya extends ie{_parse(t){let{status:r,ctx:a}=this._processInputParams(t);if(a.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?te:s.status==="dirty"?(r.dirty(),qt(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{let s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?te:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(t,r){return new ya({in:t,out:r,typeName:re.ZodPipeline})}},wt=class extends ie{_parse(e){let t=this._def.innerType._parse(e),r=a=>(Ye(a)&&(a.value=Object.freeze(a.value)),a);return lt(t)?t.then(a=>r(a)):r(t)}unwrap(){return this._def.innerType}};wt.create=(e,t)=>new wt({innerType:e,typeName:re.ZodReadonly,...ae(t)});function Mr(e,t){let r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function ga(e,t={},r){return e?at.create().superRefine((a,s)=>{let c=e(a);if(c instanceof Promise)return c.then(n=>{if(!n){let o=Mr(t,a),i=o.fatal??r??!0;s.addIssue({code:"custom",...o,fatal:i})}});if(!c){let n=Mr(t,a),o=n.fatal??r??!0;s.addIssue({code:"custom",...n,fatal:o})}}):at.create()}var fn={object:Ne.lazycreate},re;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(re||(re={}));var mn=(e,t={message:`Input not instance of ${e.name}`})=>ga(r=>r instanceof e,t),va=rt.create,_a=dt.create,yn=Zt.create,gn=ct.create,$a=ut.create,vn=pt.create,_n=Vt.create,$n=ht.create,bn=ft.create,wn=at.create,kn=We.create,Sn=Fe.create,En=zt.create,Pn=Xe.create,Nn=Ne.create,jn=Ne.strictCreate,xn=mt.create,On=ca.create,Cn=yt.create,Tn=Ze.create,In=ha.create,Rn=Ft.create,An=Ut.create,Dn=fa.create,Mn=gt.create,qn=vt.create,Vn=kt.create,zn=_t.create,Fn=st.create,qr=Ie.create,Un=De.create,Zn=Le.create,Ln=Ie.createWithPreprocess,Kn=Sr.create,Bn=()=>va().optional(),Gn=()=>_a().optional(),Jn=()=>$a().optional(),Hn={string:e=>rt.create({...e,coerce:!0}),number:e=>dt.create({...e,coerce:!0}),boolean:e=>ut.create({...e,coerce:!0}),bigint:e=>ct.create({...e,coerce:!0}),date:e=>pt.create({...e,coerce:!0})},Wn=te,ba="2025-06-18",Yn=[ba,"2025-03-26","2024-11-05","2024-10-07"],tr="2.0",wa=N.union([N.string(),N.number().int()]),ka=N.string(),Xn=N.object({progressToken:N.optional(wa)}).passthrough(),je=N.object({_meta:N.optional(Xn)}).passthrough(),Ee=N.object({method:N.string(),params:N.optional(je)}),St=N.object({_meta:N.optional(N.object({}).passthrough())}).passthrough(),qe=N.object({method:N.string(),params:N.optional(St)}),xe=N.object({_meta:N.optional(N.object({}).passthrough())}).passthrough(),rr=N.union([N.string(),N.number().int()]),Sa=N.object({jsonrpc:N.literal(tr),id:rr}).merge(Ee).strict(),Qn=e=>Sa.safeParse(e).success,Ea=N.object({jsonrpc:N.literal(tr)}).merge(qe).strict(),eo=e=>Ea.safeParse(e).success,Pa=N.object({jsonrpc:N.literal(tr),id:rr,result:xe}).strict(),Vr=e=>Pa.safeParse(e).success,ze;(function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"})(ze||(ze={}));var Na=N.object({jsonrpc:N.literal(tr),id:rr,error:N.object({code:N.number().int(),message:N.string(),data:N.optional(N.unknown())})}).strict(),to=e=>Na.safeParse(e).success,ro=N.union([Sa,Ea,Pa,Na]),Er=xe.strict(),Pr=qe.extend({method:N.literal("notifications/cancelled"),params:St.extend({requestId:rr,reason:N.string().optional()})}),ao=N.object({src:N.string(),mimeType:N.optional(N.string()),sizes:N.optional(N.array(N.string()))}).passthrough(),Et=N.object({icons:N.array(ao).optional()}).passthrough(),Pt=N.object({name:N.string(),title:N.optional(N.string())}).passthrough(),ja=Pt.extend({version:N.string(),websiteUrl:N.optional(N.string())}).merge(Et),so=N.object({experimental:N.optional(N.object({}).passthrough()),sampling:N.optional(N.object({}).passthrough()),elicitation:N.optional(N.object({}).passthrough()),roots:N.optional(N.object({listChanged:N.optional(N.boolean())}).passthrough())}).passthrough(),xa=Ee.extend({method:N.literal("initialize"),params:je.extend({protocolVersion:N.string(),capabilities:so,clientInfo:ja})}),io=N.object({experimental:N.optional(N.object({}).passthrough()),logging:N.optional(N.object({}).passthrough()),completions:N.optional(N.object({}).passthrough()),prompts:N.optional(N.object({listChanged:N.optional(N.boolean())}).passthrough()),resources:N.optional(N.object({subscribe:N.optional(N.boolean()),listChanged:N.optional(N.boolean())}).passthrough()),tools:N.optional(N.object({listChanged:N.optional(N.boolean())}).passthrough())}).passthrough(),no=xe.extend({protocolVersion:N.string(),capabilities:io,serverInfo:ja,instructions:N.optional(N.string())}),Oa=qe.extend({method:N.literal("notifications/initialized")}),Nr=Ee.extend({method:N.literal("ping")}),oo=N.object({progress:N.number(),total:N.optional(N.number()),message:N.optional(N.string())}).passthrough(),jr=qe.extend({method:N.literal("notifications/progress"),params:St.merge(oo).extend({progressToken:wa})}),ar=Ee.extend({params:je.extend({cursor:N.optional(ka)}).optional()}),sr=xe.extend({nextCursor:N.optional(ka)}),Ca=N.object({uri:N.string(),mimeType:N.optional(N.string()),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Ta=Ca.extend({text:N.string()}),xr=N.string().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),Ia=Ca.extend({blob:xr}),Ra=Pt.extend({uri:N.string(),description:N.optional(N.string()),mimeType:N.optional(N.string()),_meta:N.optional(N.object({}).passthrough())}).merge(Et),lo=Pt.extend({uriTemplate:N.string(),description:N.optional(N.string()),mimeType:N.optional(N.string()),_meta:N.optional(N.object({}).passthrough())}).merge(Et),co=ar.extend({method:N.literal("resources/list")}),uo=sr.extend({resources:N.array(Ra)}),po=ar.extend({method:N.literal("resources/templates/list")}),ho=sr.extend({resourceTemplates:N.array(lo)}),fo=Ee.extend({method:N.literal("resources/read"),params:je.extend({uri:N.string()})}),mo=xe.extend({contents:N.array(N.union([Ta,Ia]))}),yo=qe.extend({method:N.literal("notifications/resources/list_changed")}),go=Ee.extend({method:N.literal("resources/subscribe"),params:je.extend({uri:N.string()})}),vo=Ee.extend({method:N.literal("resources/unsubscribe"),params:je.extend({uri:N.string()})}),_o=qe.extend({method:N.literal("notifications/resources/updated"),params:St.extend({uri:N.string()})}),$o=N.object({name:N.string(),description:N.optional(N.string()),required:N.optional(N.boolean())}).passthrough(),bo=Pt.extend({description:N.optional(N.string()),arguments:N.optional(N.array($o)),_meta:N.optional(N.object({}).passthrough())}).merge(Et),wo=ar.extend({method:N.literal("prompts/list")}),ko=sr.extend({prompts:N.array(bo)}),So=Ee.extend({method:N.literal("prompts/get"),params:je.extend({name:N.string(),arguments:N.optional(N.record(N.string()))})}),Or=N.object({type:N.literal("text"),text:N.string(),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Cr=N.object({type:N.literal("image"),data:xr,mimeType:N.string(),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Tr=N.object({type:N.literal("audio"),data:xr,mimeType:N.string(),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Eo=N.object({type:N.literal("resource"),resource:N.union([Ta,Ia]),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Po=Ra.extend({type:N.literal("resource_link")}),Aa=N.union([Or,Cr,Tr,Po,Eo]),No=N.object({role:N.enum(["user","assistant"]),content:Aa}).passthrough(),jo=xe.extend({description:N.optional(N.string()),messages:N.array(No)}),xo=qe.extend({method:N.literal("notifications/prompts/list_changed")}),Oo=N.object({title:N.optional(N.string()),readOnlyHint:N.optional(N.boolean()),destructiveHint:N.optional(N.boolean()),idempotentHint:N.optional(N.boolean()),openWorldHint:N.optional(N.boolean())}).passthrough(),Co=Pt.extend({description:N.optional(N.string()),inputSchema:N.object({type:N.literal("object"),properties:N.optional(N.object({}).passthrough()),required:N.optional(N.array(N.string()))}).passthrough(),outputSchema:N.optional(N.object({type:N.literal("object"),properties:N.optional(N.object({}).passthrough()),required:N.optional(N.array(N.string()))}).passthrough()),annotations:N.optional(Oo),_meta:N.optional(N.object({}).passthrough())}).merge(Et),Da=ar.extend({method:N.literal("tools/list")}),To=sr.extend({tools:N.array(Co)}),Ma=xe.extend({content:N.array(Aa).default([]),structuredContent:N.object({}).passthrough().optional(),isError:N.optional(N.boolean())}),td=Ma.or(xe.extend({toolResult:N.unknown()})),qa=Ee.extend({method:N.literal("tools/call"),params:je.extend({name:N.string(),arguments:N.optional(N.record(N.unknown()))})}),Io=qe.extend({method:N.literal("notifications/tools/list_changed")}),Lt=N.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Va=Ee.extend({method:N.literal("logging/setLevel"),params:je.extend({level:Lt})}),Ro=qe.extend({method:N.literal("notifications/message"),params:St.extend({level:Lt,logger:N.optional(N.string()),data:N.unknown()})}),Ao=N.object({name:N.string().optional()}).passthrough(),Do=N.object({hints:N.optional(N.array(Ao)),costPriority:N.optional(N.number().min(0).max(1)),speedPriority:N.optional(N.number().min(0).max(1)),intelligencePriority:N.optional(N.number().min(0).max(1))}).passthrough(),Mo=N.object({role:N.enum(["user","assistant"]),content:N.union([Or,Cr,Tr])}).passthrough(),qo=Ee.extend({method:N.literal("sampling/createMessage"),params:je.extend({messages:N.array(Mo),systemPrompt:N.optional(N.string()),includeContext:N.optional(N.enum(["none","thisServer","allServers"])),temperature:N.optional(N.number()),maxTokens:N.number().int(),stopSequences:N.optional(N.array(N.string())),metadata:N.optional(N.object({}).passthrough()),modelPreferences:N.optional(Do)})}),za=xe.extend({model:N.string(),stopReason:N.optional(N.enum(["endTurn","stopSequence","maxTokens"]).or(N.string())),role:N.enum(["user","assistant"]),content:N.discriminatedUnion("type",[Or,Cr,Tr])}),Vo=N.object({type:N.literal("boolean"),title:N.optional(N.string()),description:N.optional(N.string()),default:N.optional(N.boolean())}).passthrough(),zo=N.object({type:N.literal("string"),title:N.optional(N.string()),description:N.optional(N.string()),minLength:N.optional(N.number()),maxLength:N.optional(N.number()),format:N.optional(N.enum(["email","uri","date","date-time"]))}).passthrough(),Fo=N.object({type:N.enum(["number","integer"]),title:N.optional(N.string()),description:N.optional(N.string()),minimum:N.optional(N.number()),maximum:N.optional(N.number())}).passthrough(),Uo=N.object({type:N.literal("string"),title:N.optional(N.string()),description:N.optional(N.string()),enum:N.array(N.string()),enumNames:N.optional(N.array(N.string()))}).passthrough(),Zo=N.union([Vo,zo,Fo,Uo]),Lo=Ee.extend({method:N.literal("elicitation/create"),params:je.extend({message:N.string(),requestedSchema:N.object({type:N.literal("object"),properties:N.record(N.string(),Zo),required:N.optional(N.array(N.string()))}).passthrough()})}),Fa=xe.extend({action:N.enum(["accept","decline","cancel"]),content:N.optional(N.record(N.string(),N.unknown()))}),Ko=N.object({type:N.literal("ref/resource"),uri:N.string()}).passthrough(),Bo=N.object({type:N.literal("ref/prompt"),name:N.string()}).passthrough(),Go=Ee.extend({method:N.literal("completion/complete"),params:je.extend({ref:N.union([Bo,Ko]),argument:N.object({name:N.string(),value:N.string()}).passthrough(),context:N.optional(N.object({arguments:N.optional(N.record(N.string(),N.string()))}))})}),Jo=xe.extend({completion:N.object({values:N.array(N.string()).max(100),total:N.optional(N.number().int()),hasMore:N.optional(N.boolean())}).passthrough()}),Ho=N.object({uri:N.string().startsWith("file://"),name:N.optional(N.string()),_meta:N.optional(N.object({}).passthrough())}).passthrough(),Wo=Ee.extend({method:N.literal("roots/list")}),Ua=xe.extend({roots:N.array(Ho)}),Yo=qe.extend({method:N.literal("notifications/roots/list_changed")}),rd=N.union([Nr,xa,Go,Va,So,wo,co,po,fo,go,vo,qa,Da]),ad=N.union([Pr,jr,Oa,Yo]),sd=N.union([Er,za,Fa,Ua]),id=N.union([Nr,qo,Lo,Wo]),nd=N.union([Pr,jr,Ro,_o,yo,Io,xo]),od=N.union([Er,no,Jo,jo,ko,uo,ho,mo,Ma,To]),He=class extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}},Xo=6e4,Qo=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Pr,t=>{this._requestHandlerAbortControllers.get(t.params.requestId)?.abort(t.params.reason)}),this.setNotificationHandler(jr,t=>{this._onprogress(t)}),this.setRequestHandler(Nr,t=>({}))}_setupTimeout(e,t,r,a,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(a,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:s,onTimeout:a})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new He(ze.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,r,a;this._transport=e;let s=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{s?.(),this._onclose()};let c=(r=this.transport)===null||r===void 0?void 0:r.onerror;this._transport.onerror=o=>{c?.(o),this._onerror(o)};let n=(a=this._transport)===null||a===void 0?void 0:a.onmessage;this._transport.onmessage=(o,i)=>{n?.(o,i),Vr(o)||to(o)?this._onresponse(o):Qn(o)?this._onrequest(o,i):eo(o)?this._onnotification(o):this._onerror(new Error(`Unknown message type: ${JSON.stringify(o)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new He(ze.ConnectionClosed,"Connection closed");for(let a of t.values())a(r)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let r=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(a=>this._onerror(new Error(`Uncaught error in notification handler: ${a}`)))}_onrequest(e,t){var r,a;let s=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler,c=this._transport;if(s===void 0){c?.send({jsonrpc:"2.0",id:e.id,error:{code:ze.MethodNotFound,message:"Method not found"}}).catch(i=>this._onerror(new Error(`Failed to send an error response: ${i}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);let o={signal:n.signal,sessionId:c?.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:i=>this.notification(i,{relatedRequestId:e.id}),sendRequest:(i,d,v)=>this.request(i,d,{...v,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>s(e,o)).then(i=>{if(!n.signal.aborted)return c?.send({result:i,jsonrpc:"2.0",id:e.id})},i=>{var d;if(!n.signal.aborted)return c?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(i.code)?i.code:ze.InternalError,message:(d=i.message)!==null&&d!==void 0?d:"Internal error"}})}).catch(i=>this._onerror(new Error(`Failed to send response: ${i}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,a=Number(t),s=this._progressHandlers.get(a);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let c=this._responseHandlers.get(a),n=this._timeoutInfo.get(a);if(n&&c&&n.resetTimeoutOnProgress)try{this._resetTimeout(a)}catch(o){c(o);return}s(r)}_onresponse(e){let t=Number(e.id),r=this._responseHandlers.get(t);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Vr(e))r(e);else{let a=new He(e.error.code,e.error.message,e.error.data);r(a)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,r){let{relatedRequestId:a,resumptionToken:s,onresumptiontoken:c}=r??{};return new Promise((n,o)=>{var i,d,v,b,x,j;if(!this._transport){o(new Error("Not connected"));return}((i=this._options)===null||i===void 0?void 0:i.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let E=this._requestMessageId++,S={...e,jsonrpc:"2.0",id:E};r?.onprogress&&(this._progressHandlers.set(E,r.onprogress),S.params={...e.params,_meta:{...((v=e.params)===null||v===void 0?void 0:v._meta)||{},progressToken:E}});let f=p=>{var y;this._responseHandlers.delete(E),this._progressHandlers.delete(E),this._cleanupTimeout(E),(y=this._transport)===null||y===void 0||y.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:E,reason:String(p)}},{relatedRequestId:a,resumptionToken:s,onresumptiontoken:c}).catch($=>this._onerror(new Error(`Failed to send cancellation: ${$}`))),o(p)};this._responseHandlers.set(E,p=>{var y;if(!(!((y=r?.signal)===null||y===void 0)&&y.aborted)){if(p instanceof Error)return o(p);try{let $=t.parse(p.result);n($)}catch($){o($)}}}),(b=r?.signal)===null||b===void 0||b.addEventListener("abort",()=>{var p;f((p=r?.signal)===null||p===void 0?void 0:p.reason)});let l=(x=r?.timeout)!==null&&x!==void 0?x:Xo,g=()=>f(new He(ze.RequestTimeout,"Request timed out",{timeout:l}));this._setupTimeout(E,l,r?.maxTotalTimeout,g,(j=r?.resetTimeoutOnProgress)!==null&&j!==void 0?j:!1),this._transport.send(S,{relatedRequestId:a,resumptionToken:s,onresumptiontoken:c}).catch(p=>{this._cleanupTimeout(E),o(p)})})}async notification(e,t){var r,a;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((a=(r=this._options)===null||r===void 0?void 0:r.debouncedNotificationMethods)!==null&&a!==void 0?a:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var c;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let n={...e,jsonrpc:"2.0"};(c=this._transport)===null||c===void 0||c.send(n,t).catch(o=>this._onerror(o))});return}let s={...e,jsonrpc:"2.0"};await this._transport.send(s,t)}setRequestHandler(e,t){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(a,s)=>Promise.resolve(t(e.parse(a),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function el(e,t){return Object.entries(t).reduce((r,[a,s])=>(s&&typeof s=="object"?r[a]=r[a]?{...r[a],...s}:s:r[a]=s,r),{...e})}var tl=Lr(Bs(),1),rl=Lr(zi(),1);function al(){let e=new tl.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,rl.default)(e),e}var sl=class{constructor(e){this._ajv=e??al()}getValidator(e){var t;let r="$id"in e&&typeof e.$id=="string"?(t=this._ajv.getSchema(e.$id))!==null&&t!==void 0?t:this._ajv.compile(e):this._ajv.compile(e);return a=>r(a)?{valid:!0,data:a,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(r.errors)}}},il=class extends Qo{constructor(e,t){var r,a;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Lt.options.map((s,c)=>[s,c])),this.isMessageIgnored=(s,c)=>{let n=this._loggingLevels.get(c);return n?this.LOG_LEVEL_SEVERITY.get(s)<this.LOG_LEVEL_SEVERITY.get(n):!1},this._capabilities=(r=t?.capabilities)!==null&&r!==void 0?r:{},this._instructions=t?.instructions,this._jsonSchemaValidator=(a=t?.jsonSchemaValidator)!==null&&a!==void 0?a:new sl,this.setRequestHandler(xa,s=>this._oninitialize(s)),this.setNotificationHandler(Oa,()=>{var s;return(s=this.oninitialized)===null||s===void 0?void 0:s.call(this)}),this._capabilities.logging&&this.setRequestHandler(Va,async(s,c)=>{var n;let o=c.sessionId||((n=c.requestInfo)===null||n===void 0?void 0:n.headers["mcp-session-id"])||void 0,{level:i}=s.params,d=Lt.safeParse(i);return d.success&&this._loggingLevels.set(o,d.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=el(this._capabilities,e)}assertCapabilityForMethod(e){var t,r,a;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((a=this._clientCapabilities)===null||a===void 0)&&a.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Yn.includes(t)?t:ba,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Er)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},za,t)}async elicitInput(e,t){let r=await this.request({method:"elicitation/create",params:e},Fa,t);if(r.action==="accept"&&r.content&&e.requestedSchema)try{let a=this._jsonSchemaValidator.getValidator(e.requestedSchema)(r.content);if(!a.valid)throw new He(ze.InvalidParams,`Elicitation response content does not match requested schema: ${a.errorMessage}`)}catch(a){throw a instanceof He?a:new He(ze.InternalError,`Error validating elicitation response: ${a instanceof Error?a.message:String(a)}`)}return r}async listRoots(e,t){return this.request({method:"roots/list",params:e},Ua,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}},nl=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),ol(t)}clear(){this._buffer=void 0}};function ol(e){return ro.parse(JSON.parse(e))}function ll(e){return JSON.stringify(e)+`
`}var dl=class{constructor(e=Ir.stdin,t=Ir.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new nl,this._started=!1,this._ondata=r=>{this._readBuffer.append(r),this.processReadBuffer()},this._onerror=r=>{var a;(a=this.onerror)===null||a===void 0||a.call(this,r)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let r=this._readBuffer.readMessage();if(r===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,r)}catch(r){(t=this.onerror)===null||t===void 0||t.call(this,r)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let r=ll(e);this._stdout.write(r)?t():this._stdout.once("drain",t)})}},zr={DEFAULT_TIMEOUT_MS:3e5,DEFAULT_MAX_BUFFER_BYTES:10485760},ld={MAX_AGE_MS:30*60*1e3,MAX_ENTRIES:100,PERSISTENCE_DEBOUNCE_MS:1e3};async function $e(e,t,r={}){let a={timeout:zr.DEFAULT_TIMEOUT_MS,maxBuffer:zr.DEFAULT_MAX_BUFFER_BYTES,...r};return new Promise((s,c)=>{let n=Ga(e,t,{cwd:a.cwd,timeout:a.timeout}),o="",i="",d=!1,v=setTimeout(()=>{d=!0,n.kill(),c(new Error(`Command timed out after ${a.timeout}ms`))},a.timeout);n.stdout?.on("data",b=>{o+=b.toString(),o.length>a.maxBuffer&&(d=!0,n.kill(),clearTimeout(v),c(new Error("Command output exceeded max buffer size")))}),n.stderr?.on("data",b=>{i+=b.toString()}),n.on("close",b=>{clearTimeout(v),d||s({stdout:o.trim(),stderr:i.trim(),code:b||0})}),n.on("error",b=>{clearTimeout(v),d||c(new Error(`Failed to execute command: ${b.message}`))})})}async function cl(e="."){try{return(await $e("find",[e,"-maxdepth","2","-name","*.xcworkspace","-type","d"])).stdout.split(`
`)[0]?.trim()||(await $e("find",[e,"-maxdepth","2","-name","*.xcodeproj","-type","d"])).stdout.split(`
`)[0]?.trim()||null}catch{return null}}function ul(e,t=10){let r=e.split(`
`),a=[];for(let s of r)if((s.includes("error:")||s.includes("Error:")||s.includes("ERROR")||s.includes("warning:")||s.includes("fatal error"))&&(a.push(s.trim()),a.length>=t))break;return a}var pl=process.env.XC_LOG_LEVEL||"info",Fr={error:0,warn:1,info:2,debug:3};function Nt(e){return Fr[e]<=Fr[pl]}var de={error(e,t){Nt("error")&&console.error(`[ERROR] ${e}`,t||"")},warn(e,t){Nt("warn")&&console.error(`[WARN] ${e}`,t||"")},info(e,t){Nt("info")&&console.error(`[INFO] ${e}`,t||"")},debug(e,t){Nt("debug")&&console.error(`[DEBUG] ${e}`,t||"")}},Za=Kt.join(Zr.homedir(),".xcplugin"),La=Kt.join(Za,"config.json"),hl=".xcplugin",Ka={maxRecentHistory:10,recentSimulators:[]};async function Ba(){try{let e=await Qe.readFile(La,"utf-8");return JSON.parse(e)}catch(e){return e.code==="ENOENT"?{}:(console.warn(`Failed to load user config: ${e.message}`),{})}}async function fl(e){let t=Kt.join(e||process.cwd(),hl);try{let r=await Qe.readFile(t,"utf-8");return JSON.parse(r)}catch(r){return r.code==="ENOENT"?{}:(console.warn(`Failed to load project config: ${r.message}`),{})}}async function ml(e){let t=await Ba(),r=await fl(e);return{...Ka,...t,...r,source:Object.keys(r).length>0?"project":Object.keys(t).length>0?"user":"merged"}}async function Ur(e,t){try{let r=await ml(t),a=r.maxRecentHistory||Ka.maxRecentHistory||10,s=r.recentSimulators||[],c=s.findIndex(i=>i.destination===e);c>=0?s[c]={destination:e,lastUsed:new Date().toISOString(),count:s[c].count+1}:s.push({destination:e,lastUsed:new Date().toISOString(),count:1}),s.sort((i,d)=>new Date(d.lastUsed).getTime()-new Date(i.lastUsed).getTime());let n=s.slice(0,a),o={...await Ba(),recentSimulators:n};await Qe.mkdir(Za,{recursive:!0}),await Qe.writeFile(La,JSON.stringify(o,null,2),"utf-8")}catch(r){console.warn(`Failed to save usage: ${r.message}`)}}function yl(e){let t=[],r=e.split(`
`),a="",s="";for(let c of r){let n=c.match(/^--\s+(.+?)\s+(\d+\.\d+)\s+--$/);if(n){a=n[1],s=n[2];continue}let o=c.match(/^\s+(.+?)\s+\(([A-Za-z0-9-]+)\)\s+\((Shutdown|Booted|Unavailable)\)/i);if(o&&a&&s){let i=o[1].trim(),d=o[2],v=o[3];t.push({name:i,udid:d,runtime:a,osVersion:s,available:v==="Shutdown"||v==="Booted"})}}return t}function gl(e,t){let r=t.filter(a=>a.available&&a.name===e);if(r.length!==0)return r.sort((a,s)=>{let c=a.osVersion.split(".").map(Number),n=s.osVersion.split(".").map(Number);for(let o=0;o<Math.max(c.length,n.length);o++){let i=c[o]||0,d=n[o]||0;if(i!==d)return d-i}return 0}),r[0]}async function vl(){try{let e=await $e("xcrun",["simctl","list","devices","available"]);if(e.code!==0)throw new Error(`simctl command failed: ${e.stderr}`);return yl(e.stdout)}catch(e){throw new Error(`Failed to query simulators: ${e instanceof Error?e.message:String(e)}`)}}function _l(e){return e.trim()?e.includes("id=")?{isValid:!0}:e.includes("platform=")&&e.includes("name=")&&!e.includes("OS=")?{isValid:!0,warning:"Destination missing OS version - will attempt auto-resolution"}:e.includes("platform=")&&e.includes("name=")&&e.includes("OS=")?{isValid:!0}:{isValid:!0,warning:"Unexpected destination format - passing through as-is"}:{isValid:!1,warning:"Destination string cannot be empty"}}async function $l(e,t){let r=_l(e);if(e.includes("OS=")||e.includes("id="))return await Ur(e,t).catch(c=>{console.warn(`Failed to track usage: ${c instanceof Error?c.message:String(c)}`)}),{destination:e,wasResolved:!1,details:"Using explicit destination format"};let a=e.match(/name=([^,]+)/);if(!a)return{destination:e,wasResolved:!1,warning:r.warning||"No device name found in destination"};let s=a[1].trim();try{let c=await vl(),n=gl(s,c);if(!n){let i=[...new Set(c.map(v=>v.name))].sort(),d=`No available simulator found for "${s}". Available: ${i.slice(0,5).join(", ")}${i.length>5?"...":""}`;return{destination:e,wasResolved:!1,warning:d}}let o=`${e},OS=${n.osVersion}`;return await Ur(o,t).catch(i=>{console.warn(`Failed to track usage: ${i instanceof Error?i.message:String(i)}`)}),{destination:o,wasResolved:!0,details:`Resolved "${s}" to ${n.runtime} ${n.osVersion} (${n.udid})`}}catch(c){return{destination:e,wasResolved:!1,warning:`Failed to resolve destination: ${c instanceof Error?c.message:String(c)}`}}}var bl={name:"xcode_build",description:"Build Xcode project for iOS apps. Check project's CLAUDE.md for preferred simulator and SDK defaults when parameters are not explicitly provided.",inputSchema:{type:"object",properties:{project_path:{type:"string",description:"Path to .xcodeproj or .xcworkspace (auto-detected if omitted)"},scheme:{type:"string",description:"Scheme name (required)"},configuration:{type:"string",enum:["Debug","Release"],description:"Build configuration (default: Debug)"},destination:{type:"string",description:'Simulator destination. Formats: "platform=iOS Simulator,name=iPhone 15" (auto-resolves OS) | "platform=iOS Simulator,name=iPhone 15,OS=18.0" | "id=UDID". If not specified, agents should check CLAUDE.md for project defaults.'}},required:["scheme"]}};async function wl(e){try{if(!e.scheme)return{success:!1,error:"Scheme required",operation:"build"};let t=e.project_path||await cl();if(!t)return{success:!1,error:"No Xcode project found in current directory",operation:"build"};let r=["-scheme",e.scheme,"-configuration",e.configuration||"Debug"];if(t.endsWith(".xcworkspace")?r.unshift("-workspace",t):r.unshift("-project",t),e.destination){let i=await $l(e.destination,t);i.wasResolved&&de.info(`Resolved destination: ${i.details}`),i.warning&&de.warn(`Destination warning: ${i.warning}`),r.push("-destination",i.destination)}r.push("build"),de.info(`Building project: ${e.scheme}`);let a=Date.now(),s=await $e("xcodebuild",r),c=((Date.now()-a)/1e3).toFixed(1),n=s.code!==0?ul(s.stdout+`
`+s.stderr):void 0,o={message:`Build ${s.code===0?"succeeded":"failed"} in ${c}s`,duration:c,errors:n};return s.code===0?{success:!0,data:o,summary:"Build succeeded"}:{success:!1,error:`Build failed in ${c}s`,details:n?.join(`
`)}}catch(t){return de.error("Build failed",t),{success:!1,error:String(t),operation:"build"}}}var kl={name:"simulator_screenshot",description:"Capture simulator screenshot",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},output_path:{type:"string",description:"Output file path (default: auto-generated)"}}}};async function Sl(e){try{let t=e.device_id||"booted",r=e.output_path||`/tmp/screenshot-${Date.now()}.png`;de.info(`Capturing screenshot from ${t}`);let a=await $e("xcrun",["simctl","io",t,"screenshot",r]),s={message:"Screenshot captured successfully",output_path:r,note:`Saved to ${r}`};return a.code===0?{success:!0,data:s,summary:"Screenshot captured"}:{success:!1,error:"Screenshot capture failed",details:a.stderr}}catch(t){return de.error("Screenshot failed",t),{success:!1,error:String(t),operation:"screenshot"}}}var El={name:"simulator_openurl",description:"Open URL or deep link in simulator",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},url:{type:"string",description:"URL to open (http://, https://, or custom scheme)"}},required:["url"]}};async function Pl(e){try{if(!e.url)return{success:!1,error:"url required",operation:"openurl"};let t=e.device_id||"booted";de.info(`Opening URL on ${t}: ${e.url}`);let r=await $e("xcrun",["simctl","openurl",t,e.url]),a={message:"URL opened successfully",app_identifier:"",note:`Opened: ${e.url}`};return r.code===0?{success:!0,data:a,summary:"URL opened"}:{success:!1,error:"Operation failed",details:r.stderr}}catch(t){return de.error("Open URL failed",t),{success:!1,error:String(t),operation:"openurl"}}}var Nl={name:"simulator_terminate_app",description:"Terminate a running app on simulator",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},app_identifier:{type:"string",description:'App bundle identifier (e.g. "com.example.MyApp")'}},required:["app_identifier"]}};async function jl(e){try{if(!e.app_identifier)return{success:!1,error:"app_identifier required",operation:"terminate-app"};let t=e.device_id||"booted";de.info(`Terminating app ${e.app_identifier} on ${t}`);let r=await $e("xcrun",["simctl","terminate",t,e.app_identifier]),a={message:"App terminated successfully",app_identifier:e.app_identifier};return r.code===0?{success:!0,data:a,summary:"App terminated"}:{success:!1,error:"Operation failed",details:r.stderr}}catch(t){return de.error("Terminate app failed",t),{success:!1,error:String(t),operation:"terminate-app"}}}var xl={name:"simulator_get_app_container",description:"Get app container filesystem path",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},app_identifier:{type:"string",description:"App bundle identifier"},container_type:{type:"string",enum:["data","bundle","group"],description:"Container type (default: data)"}},required:["app_identifier"]}};async function Ol(e){try{if(!e.app_identifier)return{success:!1,error:"app_identifier required",operation:"get-app-container"};let t=e.device_id||"booted",r=e.container_type||"data";de.info(`Getting ${r} container for ${e.app_identifier}`);let a=await $e("xcrun",["simctl","get_app_container",t,e.app_identifier,r]),s=a.stdout.trim(),c={message:"Container path retrieved",output_path:s,note:`${r} container: ${s}`};return a.code===0?{success:!0,data:c,summary:"Path retrieved"}:{success:!1,error:"Failed to retrieve container path",details:a.stderr}}catch(t){return de.error("Get app container failed",t),{success:!1,error:String(t),operation:"get-app-container"}}}var Cl={name:"simulator_list",description:"List available iOS simulators",inputSchema:{type:"object",properties:{availability:{type:"string",enum:["available","unavailable","all"],description:"Filter by availability (default: available)"},device_type:{type:"string",description:'Filter by device type (e.g. "iPhone")'},runtime:{type:"string",description:'Filter by runtime (e.g. "iOS 17")'}}}};async function Tl(e){try{de.info("Listing simulators");let t=await $e("xcrun",["simctl","list","devices","-j"]),r=JSON.parse(t.stdout),a=[];for(let[s,c]of Object.entries(r.devices))for(let n of c)e.availability==="available"&&!n.isAvailable||e.availability==="unavailable"&&n.isAvailable||e.device_type&&!n.name.includes(e.device_type)||e.runtime&&!s.includes(e.runtime)||a.push({name:n.name,udid:n.udid,state:n.state,runtime:s.replace("com.apple.CoreSimulator.SimRuntime.","").replace(/-/g," "),available:n.isAvailable});return{success:!0,data:{devices:a,count:a.length,message:`Found ${a.length} simulators`},summary:`${a.length} simulators`}}catch(t){return de.error("List simulators failed",t),{success:!1,error:String(t),operation:"list"}}}var Il={name:"simulator_boot",description:"Boot a simulator device",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or name (e.g. "iPhone 15" or full UDID)'}},required:["device_id"]}};async function Rl(e){try{if(!e.device_id)return{success:!1,error:"device_id required",operation:"boot"};de.info(`Booting simulator: ${e.device_id}`);let t=await $e("xcrun",["simctl","boot",e.device_id]),r={message:"Device booted successfully",device_id:e.device_id,note:"Device is starting up"};return t.code===0?{success:!0,data:r,summary:"Device booted"}:{success:!1,error:"Boot failed",details:t.stderr}}catch(t){return de.error("Boot failed",t),{success:!1,error:String(t),operation:"boot"}}}var Al={name:"simulator_install_app",description:"Install app on simulator",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},app_path:{type:"string",description:"Path to .app bundle"}},required:["app_path"]}};async function Dl(e){try{if(!e.app_path)return{success:!1,error:"Install failed: app_path is required",operation:"install-app"};let t=e.device_id||"booted";de.info(`Installing app on ${t}: ${e.app_path}`);let r=await $e("xcrun",["simctl","install",t,e.app_path]);return r.code===0?{success:!0,data:{message:"App installed successfully",device_id:t,app_path:e.app_path,note:`Installed on ${t}`},summary:"App installed"}:{success:!1,error:`Install failed: Unable to install app at ${e.app_path} on device ${t}`,details:r.stderr}}catch(t){return de.error("Install app failed",t),{success:!1,error:`Install failed: ${String(t)}`,operation:"install-app"}}}var Ml={name:"simulator_launch_app",description:"Launch app on simulator",inputSchema:{type:"object",properties:{device_id:{type:"string",description:'Device UDID or "booted" for active simulator'},app_identifier:{type:"string",description:'App bundle identifier (e.g. "com.example.MyApp")'}},required:["app_identifier"]}};async function ql(e){try{if(!e.app_identifier)return{success:!1,error:"Launch failed: app_identifier is required",operation:"launch-app"};let t=e.device_id||"booted";de.info(`Launching app ${e.app_identifier} on ${t}`);let r=await $e("xcrun",["simctl","launch",t,e.app_identifier]);if(r.code===0){let a=r.stdout.match(/(\d+)/),s=a?parseInt(a[1]):void 0;return{success:!0,data:{message:"App launched successfully",device_id:t,app_identifier:e.app_identifier,pid:s,note:s?`Process ID: ${s}`:void 0},summary:"App launched"}}else return{success:!1,error:`Launch failed: Unable to launch app '${e.app_identifier}' on device ${t}`,details:r.stderr}}catch(t){return de.error("Launch app failed",t),{success:!1,error:`Launch failed: ${String(t)}`,operation:"launch-app"}}}var Vl={name:"idb_describe",description:"Query UI accessibility tree",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'},operation:{type:"string",enum:["all","point"],description:"Get all elements or query specific point"},x:{type:"number",description:"X coordinate (for point operation)"},y:{type:"number",description:"Y coordinate (for point operation)"}}}};async function zl(e){try{let t=e.target||"booted",r=e.operation||"all";de.info(`Querying accessibility tree: ${r}`);let a;if(r==="all")a=await $e("idb",["ui","describe-all","--target",t,"--json"]);else if(r==="point"&&e.x!==void 0&&e.y!==void 0)a=await $e("idb",["ui","describe-point",String(e.x),String(e.y),"--target",t,"--json"]);else return{success:!1,error:"Invalid operation or missing coordinates",operation:"describe"};let s=JSON.parse(a.stdout),c=[];if(Array.isArray(s))for(let n of s)c.push({label:n.label,value:n.value,type:n.type,centerX:n.frame?.x+n.frame?.width/2,centerY:n.frame?.y+n.frame?.height/2,frame:n.frame});return{success:!0,data:{message:`Found ${c.length} UI elements`,elements:r==="all"?c:void 0,element:r==="point"?c[0]:void 0,note:"Use centerX/centerY for tap coordinates"},summary:`${c.length} elements`}}catch(t){return de.error("Describe failed",t),{success:!1,error:String(t),operation:"describe"}}}var Fl={name:"idb_tap",description:"Tap at UI coordinates",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'},x:{type:"number",description:"X coordinate"},y:{type:"number",description:"Y coordinate"},duration:{type:"number",description:"Tap duration in seconds (default: 0.1)"}},required:["x","y"]}};async function Ul(e){try{if(e.x===void 0||e.y===void 0)return{success:!1,error:"x and y coordinates required",operation:"tap"};let t=e.target||"booted",r=e.duration||.1;de.info(`Tapping at (${e.x}, ${e.y})`);let a=await $e("idb",["ui","tap",String(Math.round(e.x)),String(Math.round(e.y)),"--target",t,"--duration",String(r)]),s={message:"Tap executed successfully",coordinates:{x:e.x,y:e.y},note:"UI interaction complete"};return a.code===0?{success:!0,data:s,summary:`Tapped (${e.x}, ${e.y})`}:{success:!1,error:"Tap failed",details:a.stderr}}catch(t){return de.error("Tap failed",t),{success:!1,error:String(t),operation:"tap"}}}var Zl={name:"idb_input",description:"Type text or press keys in simulator",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'},text:{type:"string",description:"Text to type"},key:{type:"string",description:'Single key to press (e.g. "return", "delete")'},key_sequence:{type:"array",items:{type:"string"},description:"Sequence of keys to press"}}}};async function Ll(e){try{if(!e.text&&!e.key&&!e.key_sequence)return{success:!1,error:"Must provide text, key, or key_sequence",operation:"input"};let t=e.target||"booted",r;if(e.text)de.info(`Typing text: ${e.text}`),r=await $e("idb",["ui","text",e.text,"--target",t]);else if(e.key)de.info(`Pressing key: ${e.key}`),r=await $e("idb",["ui","key",e.key,"--target",t]);else if(e.key_sequence)de.info(`Pressing key sequence: ${e.key_sequence.join(", ")}`),r=await $e("idb",["ui","key-sequence",...e.key_sequence,"--target",t]);else return{success:!1,error:"Invalid input parameters",operation:"input"};let a={message:"Input executed successfully",note:e.text?`Typed: ${e.text}`:`Key: ${e.key||e.key_sequence?.join(", ")}`};return r.code===0?{success:!0,data:a,summary:"Input complete"}:{success:!1,error:"Input failed",details:r.stderr}}catch(t){return de.error("Input failed",t),{success:!1,error:String(t),operation:"input"}}}var Kl={name:"idb_gesture",description:"Perform swipe gestures or hardware button presses",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'},gesture_type:{type:"string",enum:["swipe","button"],description:"Type of gesture"},start_x:{type:"number",description:"Start X coordinate (for swipe)"},start_y:{type:"number",description:"Start Y coordinate (for swipe)"},end_x:{type:"number",description:"End X coordinate (for swipe)"},end_y:{type:"number",description:"End Y coordinate (for swipe)"},duration:{type:"number",description:"Swipe duration in milliseconds (default: 200)"},button_type:{type:"string",enum:["HOME","LOCK","SIDE_BUTTON","SIRI"],description:"Hardware button to press"}},required:["gesture_type"]}};async function Bl(e){try{let t=e.target||"booted";if(e.gesture_type==="swipe"){if(e.start_x===void 0||e.start_y===void 0||e.end_x===void 0||e.end_y===void 0)return{success:!1,error:"start_x, start_y, end_x, end_y required for swipe",operation:"gesture"};let r=e.duration||200;de.info(`Swiping from (${e.start_x}, ${e.start_y}) to (${e.end_x}, ${e.end_y})`);let a=await $e("idb",["ui","swipe",String(Math.round(e.start_x)),String(Math.round(e.start_y)),String(Math.round(e.end_x)),String(Math.round(e.end_y)),"--target",t,"--duration",String(r)]),s={message:"Swipe gesture executed",note:`From (${e.start_x}, ${e.start_y}) to (${e.end_x}, ${e.end_y})`};return a.code===0?{success:!0,data:s,summary:"Swipe complete"}:{success:!1,error:"Swipe gesture failed",details:a.stderr}}else if(e.gesture_type==="button"){if(!e.button_type)return{success:!1,error:"button_type required for button gesture",operation:"gesture"};de.info(`Pressing button: ${e.button_type}`);let r=await $e("idb",["ui","button",e.button_type,"--target",t]),a={message:"Button press executed",note:`Pressed: ${e.button_type}`};return r.code===0?{success:!0,data:a,summary:"Button pressed"}:{success:!1,error:"Button press failed",details:r.stderr}}else return{success:!1,error:"Invalid gesture_type",operation:"gesture"}}catch(t){return de.error("Gesture failed",t),{success:!1,error:String(t),operation:"gesture"}}}var Gl={name:"idb_find_element",description:"Search UI elements by label or identifier (semantic search)",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'},query:{type:"string",description:"Element label or identifier to search for"}},required:["query"]}};async function Jl(e){try{if(!e.query)return{success:!1,error:"query required",operation:"find-element"};let t=e.target||"booted";de.info(`Finding element: ${e.query}`);let r=await $e("idb",["ui","describe-all","--target",t,"--json"]),a=JSON.parse(r.stdout),s=[];if(Array.isArray(a))for(let c of a)(c.label?.toLowerCase().includes(e.query.toLowerCase())||c.value?.toLowerCase().includes(e.query.toLowerCase()))&&s.push({label:c.label,value:c.value,type:c.type,centerX:c.frame?.x+c.frame?.width/2,centerY:c.frame?.y+c.frame?.height/2,frame:c.frame});return{success:!0,data:{message:`Found ${s.length} matching elements`,matches:s,count:s.length},summary:`${s.length} matches`}}catch(t){return de.error("Find element failed",t),{success:!1,error:String(t),operation:"find-element"}}}var Hl={name:"idb_check_quality",description:"Check accessibility data quality (use before deciding on screenshot)",inputSchema:{type:"object",properties:{target:{type:"string",description:'Target device (default: "booted")'}}}};async function Wl(e){try{let t=e.target||"booted";de.info("Checking accessibility quality");let r=await $e("idb",["ui","describe-all","--target",t,"--json"]),a=JSON.parse(r.stdout),s=0,c=0,n=0;Array.isArray(a)&&(s=a.length,c=a.filter(v=>v.label&&v.label.length>0).length,n=a.filter(v=>v.type?.includes("Button")||v.type?.includes("TextField")).length);let o=s>0?c/s:0,i=Math.round(o*100),d="";return i>=70?d="Accessibility data sufficient - use idb_describe":i>=40?d="Moderate accessibility - try idb_describe first, screenshot if needed":d="Poor accessibility data - screenshot recommended",{success:!0,data:{score:i,labeled_elements:c,interactive_elements:n,total_elements:s,recommendation:d,message:`Accessibility score: ${i}%`},summary:`Score: ${i}%`}}catch(t){return de.error("Check quality failed",t),{success:!1,error:String(t),operation:"check-quality"}}}var Yl=class{server;constructor(){this.server=new il({name:"xc-assist",version:"0.5.0",title:"iOS Simulator Testing",description:"UI testing with gestures, deep links, app lifecycle, and accessibility-first automation"},{capabilities:{tools:{}}}),this.registerTools()}registerTools(){this.server.setRequestHandler(Da,async()=>({tools:[bl,Cl,Il,Al,Ml,Nl,Vl,Gl,Hl,Fl,Zl,Kl,kl,El,xl]})),this.server.setRequestHandler(qa,async e=>{let{name:t,arguments:r}=e.params;switch(t){case"xcode_build":return{content:[{type:"text",text:JSON.stringify(await wl(r))}]};case"simulator_list":return{content:[{type:"text",text:JSON.stringify(await Tl(r))}]};case"simulator_boot":return{content:[{type:"text",text:JSON.stringify(await Rl(r))}]};case"simulator_install_app":return{content:[{type:"text",text:JSON.stringify(await Dl(r))}]};case"simulator_launch_app":return{content:[{type:"text",text:JSON.stringify(await ql(r))}]};case"simulator_terminate_app":return{content:[{type:"text",text:JSON.stringify(await jl(r))}]};case"idb_describe":return{content:[{type:"text",text:JSON.stringify(await zl(r))}]};case"idb_find_element":return{content:[{type:"text",text:JSON.stringify(await Jl(r))}]};case"idb_check_quality":return{content:[{type:"text",text:JSON.stringify(await Wl(r))}]};case"idb_tap":return{content:[{type:"text",text:JSON.stringify(await Ul(r))}]};case"idb_input":return{content:[{type:"text",text:JSON.stringify(await Ll(r))}]};case"idb_gesture":return{content:[{type:"text",text:JSON.stringify(await Bl(r))}]};case"simulator_screenshot":return{content:[{type:"text",text:JSON.stringify(await Sl(r))}]};case"simulator_openurl":return{content:[{type:"text",text:JSON.stringify(await Pl(r))}]};case"simulator_get_app_container":return{content:[{type:"text",text:JSON.stringify(await Ol(r))}]};default:throw new Error(`Unknown tool: ${t}`)}})}async run(){let e=new dl;await this.server.connect(e),console.error("xc-assist MCP server running")}},Xl=new Yl;Xl.run().catch(console.error);
